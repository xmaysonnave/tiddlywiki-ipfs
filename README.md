<h1 align="center">IPFS with TiddyWiki</h1>

<h1 align="center">
  <a rel="noopener noreferrer" target="_blank" href="https://bluelightav.eth.link">
    <img src="https://gateway.ipfs.io/ipfs/bafybeibi5ldguonidlwomjxwjehodpmypgex5qd2fe6f6yuka4dqvbzvpq" alt="Blue Light"/>
  </a>
</h1>

<p align="center">
  <a rel="noopener noreferrer" target="_blank" href="https://github.com/ContributorCovenant/contributor_covenant">
    <img alt="An ethical open source project" src="https://img.shields.io/badge/open-ethical-%234baaaa"/>
  </a>
  <a rel="noopener noreferrer" target="_blank" href="LICENSE">
    <img alt="License: GPL v3" src="https://img.shields.io/badge/License-GPLv3-blue.svg"/>
  </a>
  <a rel="noopener noreferrer" target="_blank" href="CODE_OF_CONDUCT.md">
    <img alt="Covenant" src="https://img.shields.io/badge/Contributor%20Covenant-v2.0%20adopted-ff69b4.svg"/>
  </a>
  <a rel="noopener noreferrer" target="_blank" href="https://github.com/prettier/prettier">
    <img alt="Prettier" src="https://img.shields.io/badge/code_style-prettier-ff69b4.svg?style=flat-square"/>
  </a>
</p>

<p align="center">
  <a rel="noopener noreferrer" target="_blank" href="https://app.fossa.com/projects/git%2Bgithub.com%2Fxmaysonnave%2Ftiddlywiki-ipfs?ref=badge_shield" alt="FOSSA Status">
    <img src="https://app.fossa.com/api/projects/git%2Bgithub.com%2Fxmaysonnave%2Ftiddlywiki-ipfs.svg?type=shield"/>
  </a>
  <a rel="noopener noreferrer" target="_blank" href="https://travis-ci.com/xmaysonnave/tiddlywiki-ipfs">
    <img alt="TravisCI" src="https://travis-ci.com/xmaysonnave/tiddlywiki-ipfs.svg?branch=main"/>
  </a>
  <a rel="noopener noreferrer" target="_blank" href="https://snyk.io/test/github/xmaysonnave/tiddlywiki-ipfs">
    <img alt="Snyk" src="https://snyk.io/test/github/xmaysonnave/tiddlywiki-ipfs/badge.svg"/>
  </a>
</p>

<p align="center">
  <a rel="noopener noreferrer" target="_blank" href="http://127.0.0.1:8080/ipfs/QmcAfZpXFayYRuwfYs9ojL2LUQzVgcS63QXQH2EbNXxZbt">
    <img alt="Hosted on IPFS" src="https://img.shields.io/badge/Hosted%20on-IPFS-65c2cb?&logo=ipfs"/>
  </a>
</p>

<a name="ipfs-with-tiddlywiki"/>

This [TiddlyWiki](https://tiddlywiki.com/) plugin aims to help users, editors and developers to manage their wikis on [IPFS](https://ipfs.io).

This plugin provides the following features:

- Store `TiddlyWiki`'s and attachments on [IPFS](https://ipfs.io/){:rel="noopener noreferrer" target="_blank"}
- Access `TiddlyWiki`'s and attachments from [IPFS](https://ipfs.io/){:rel="noopener noreferrer" target="_blank"}
- Compress `TiddlyWiki`'s and attachments
- Encrypt, Decrypt and Sign `TiddlyWiki`'s and attachments
  - Standford
  - Ethereum
  - [SHA-3](https://en.wikipedia.org/wiki/SHA-3){:rel="noopener noreferrer" target="_blank"}
- Import and Export
- Publish and Manage IPNS Names and Keys
- [Metamask](https://metamask.io){:rel="noopener noreferrer" target="_blank"} Ethereum wallets support
- Publish to [ENS](https://ens.domains){:rel="noopener noreferrer" target="_blank"}
- Share over [IPFS](https://ipfs.io/){:rel="noopener noreferrer" target="_blank"} `TiddlyWiki`'s [Tiddlers](https://tiddlywiki.com/#Tiddlers){:rel="noopener noreferrer" target="_blank"} and attachments

According to [Wikipedia](https://en.wikipedia.org/wiki/TiddlyWiki){:rel="noopener noreferrer" target="_blank"}:

`TiddlyWiki is a personal wiki and a non-linear notebook for organising and sharing complex information. It is an open-source single page application wiki in the form of a single HTML file that includes CSS, JavaScript, and the content. It is designed to be easy to customize and re-shape depending on application. It facilitates re-use of content by dividing it into small pieces called Tiddlers.`

`IPFS with TiddlyWiki` enhances TiddlyWiki as a decentralized application (Đapps) who uses distributed computing systems:

- [IPFS](https://ipfs.io){:rel="noopener noreferrer" target="_blank"} is a decentralized storage network
- [Ethereum Smart Contracts](https://ethereum.org/learn/#smart-contracts){:rel="noopener noreferrer" target="_blank"} are decentralized applications

`IPFS with TiddlyWiki` has the following [ĐApp](https://en.wikipedia.org/wiki/Decentralized_application){:rel="noopener noreferrer" target="_blank"} characteristics:

- Open Source
- Decentralized
- Unhackable
- Unstoppable

## Using `IPFS with TiddlyWiki`:

<a name="using-ipfs-with-tiddlywiki"/>

Current `IPFS` build:

- [IPFS](http://127.0.0.1:8080/ipfs/QmcAfZpXFayYRuwfYs9ojL2LUQzVgcS63QXQH2EbNXxZbt){:rel="noopener noreferrer" target="_blank"}

Current `IPFS` <b>bluelightav.eth</b> and <b>empty</b> `TiddlyWikis` editions:

- [bluelightav.eth](http://127.0.0.1:8080/ipfs/QmcAfZpXFayYRuwfYs9ojL2LUQzVgcS63QXQH2EbNXxZbt/editions/bluelightav/index.html){:rel="noopener noreferrer" target="_blank"}
- [empty](http://127.0.0.1:8080/ipfs/QmcAfZpXFayYRuwfYs9ojL2LUQzVgcS63QXQH2EbNXxZbt/editions/empty/index.html){:rel="noopener noreferrer" target="_blank"}

Current `IPFS with TiddlyWiki` boot, documentation, libraries and plugin:

- [Boot](http://127.0.0.1:8080/ipfs/QmcAfZpXFayYRuwfYs9ojL2LUQzVgcS63QXQH2EbNXxZbt/tiddlywiki-ipfs/boot/$_boot_boot.js-0.4.0-beta-TW-v5.1.23-pre+build-201218355.json){:rel="noopener noreferrer" target="_blank"}
- [Documentation](http://127.0.0.1:8080/ipfs/QmcAfZpXFayYRuwfYs9ojL2LUQzVgcS63QXQH2EbNXxZbt/tiddlywiki-ipfs/documentation/$_ipfs_documentation.json-0.4.0-beta+build-201218355.json){:rel="noopener noreferrer" target="_blank"}
- [Library](http://127.0.0.1:8080/ipfs/QmcAfZpXFayYRuwfYs9ojL2LUQzVgcS63QXQH2EbNXxZbt/tiddlywiki-ipfs/library/$_library_ipfs-library-modules.js-1.0.0+build-201218354.json){:rel="noopener noreferrer" target="_blank"}
- [Plugin](http://127.0.0.1:8080/ipfs/QmcAfZpXFayYRuwfYs9ojL2LUQzVgcS63QXQH2EbNXxZbt/tiddlywiki-ipfs/plugin/$_plugins_ipfs.js-0.4.0-beta+build-201218355.json){:rel="noopener noreferrer" target="_blank"}

Release available with a capable [ENS](https://ens.domains/{:rel="noopener noreferrer" target="_blank"}) browser:

- [Boot](https://bluelightav.eth/#%24%3A%2Fboot%2Fboot.js){:rel="noopener noreferrer" target="_blank"}
- [Documentation](https://bluelightav.eth/#IPFS%20Documentation){:rel="noopener noreferrer" target="_blank"}
- [Library](https://bluelightav.eth/#%24%3A%2Flibrary%2Fipfs-library-modules.js){:rel="noopener noreferrer" target="_blank"}
- [Plugin](https://bluelightav.eth/#%24%3A%2Fplugins%2Fipfs){:rel="noopener noreferrer" target="_blank"}
- [bluelightav.eth](https://bluelightav.eth){:rel="noopener noreferrer" target="_blank"}

Release available with [EthDNS and EthLink](https://eth.link){:rel="noopener noreferrer" target="_blank"}

- [Boot](https://bluelightav.eth.link/#%24%3A%2Fboot%2Fboot.js){:rel="noopener noreferrer" target="_blank"}
- [Documentation](https://bluelightav.eth.link/#IPFS%20Documentation){:rel="noopener noreferrer" target="_blank"}
- [Library](https://bluelightav.eth.link/#%24%3A%2Flibrary%2Fipfs-library-modules.js){:rel="noopener noreferrer" target="_blank"}
- [Plugin](https://bluelightav.eth.link/#%24%3A%2Fplugins%2Fipfs){:rel="noopener noreferrer" target="_blank"}
- [bluelightav.eth.link](https://bluelightav.eth.link){:rel="noopener noreferrer" target="_blank"}

Recommended TiddlyWiki Plugins:

- [Locator](https://bimlas.gitlab.io/tw5-locator/#%24%3A%2Fplugins%2Fbimlas%2Flocator){:rel="noopener noreferrer" target="_blank"}
- [Relink](https://flibbles.github.io/tw5-relink/#%24%3A%2Fplugins%2Fflibbles%2Frelink){:rel="noopener noreferrer" target="_blank"}

### Getting Started

<a name="getting-started"/>

These instructions will get you a copy of the project up and running on your local machine.

### Prerequisites

<a name="pre-requisites"/>

### Users

<a name="users"/>

#### Getting running `IPFS with TiddlyWiki` in your browser

<a name="running-browser"/>

Starting from the file system, Follow the developer instructions [Running TiddlyWiki](#developer-running){:rel="noopener noreferrer" target="_blank"}

To resolve <b>.eth</b> domains you need an [Ethereum](https://ethereum.org/){:rel="noopener noreferrer" target="_blank"} capable browser:

- Use [Metamask](https://metamask.io){:rel="noopener noreferrer" target="_blank"} as a browser extension
- Use [Metamask](https://metamask.io){:rel="noopener noreferrer" target="_blank"} as an Android mobile application
- Use [IPFS with TiddlyWiki](https://bluelightav.eth.link){:rel="noopener noreferrer" target="_blank"}

To update [ENS](https://app.ens.domains/){:rel="noopener noreferrer" target="_blank"} domains you need an Ethereum wallet:

- Use [Metamask](https://metamask.io){:rel="noopener noreferrer" target="_blank"} as a browser extension
- Use [Metamask](https://metamask.io){:rel="noopener noreferrer" target="_blank"} as an Android mobile application

To run a local IPFS node, you need:

- [IPFS Companion](https://ipfs-shipyard.github.io/ipfs-companion/){:rel="noopener noreferrer" target="_blank"}
- [IPFS Desktop](https://github.com/ipfs-shipyard/ipfs-desktop){:rel="noopener noreferrer" target="_blank"}
- [IPFS Server](https://github.com/ipfs/go-ipfs){:rel="noopener noreferrer" target="_blank"}

More informations about IPFS:

- [IPFS](https://ipfs.io/){:rel="noopener noreferrer" target="_blank"}

Remarks:

[EthDNS and EthLink](https://eth.link){:rel="noopener noreferrer" target="_blank"} are able to resolve https://bluelightav.eth.link to IPFS.

#### Run a local IPFS node with IPFS Desktop

<a name="ipfs-desktop"/>

- [IPFS Desktop](https://github.com/ipfs-shipyard/ipfs-desktop){:rel="noopener noreferrer" target="_blank"}

According to the `ipfs-desktop` [README.md](https://github.com/ipfs-shipyard/ipfs-desktop/blob/master/README.md){:rel="noopener noreferrer" target="_blank"}, `IPFS Desktop allows you to run your IPFS Node on your machine without having to bother with command line tools`.

#### Use a browser extension with IPFS Companion

<a name="ipfs-companion"/>

- [IPFS Companion for Chrome](https://chrome.google.com/webstore/detail/ipfs-companion/nibjojkomfdiaoajekhjakgkdhaomnch){:rel="noopener noreferrer" target="_blank"}
- [IPFS Companion for Firefox](https://addons.mozilla.org/fr/firefox/addon/ipfs-companion/){:rel="noopener noreferrer" target="_blank"}

According to the `ipfs-companion` [README.md](https://github.com/ipfs-shipyard/ipfs-companion/blob/master/README.md){:rel="noopener noreferrer" target="_blank"}, `This add-on enables everyone to access IPFS resources the way they were meant: from locally running IPFS node :-)`.

#### Supported ENS Ethereum Networks

<a name="ens-ethereum-network"/>

- `Goerli`: Ethereum Test Network (PoA)
- `Mainnet`: Ethereum Main Network
- `Rinkeby`: Ethereum Test Network (PoA)
- `Ropsten`: Ethereum Test Network (PoW)

## Developer

<a name="developer"/>

Setup a nodejs environment to build tiddlywiki instances bundled with `IPFS with TiddlyWiki`.

### Environment

<a name="developer-environment"/>

- [Babelify](https://www.npmjs.com/package/babelify){:rel="noopener noreferrer" target="_blank"}
- [Eruda](https://github.com/liriliri/eruda){:rel="noopener noreferrer" target="_blank"}
- [Ethers](https://github.com/ethers-io/ethers.js/){:rel="noopener noreferrer" target="_blank"}
- [IPFS Provider](https://github.com/ipfs-shipyard/ipfs-provider){:rel="noopener noreferrer" target="_blank"}
- [IPFS HTTP Client](https://github.com/ipfs/js-ipfs/tree/master/packages/ipfs-http-client){:rel="noopener noreferrer" target="_blank"}
- [Mocha](https://mochajs.org/){:rel="noopener noreferrer" target="_blank"}
- [Node.js](https://nodejs.org/){:rel="noopener noreferrer" target="_blank"}
- [Snyk](https://github.com/snyk){:rel="noopener noreferrer" target="_blank"}
- [TiddyWiki5](https://www.npmjs.com/package/tiddlywiki){:rel="noopener noreferrer" target="_blank"}
- [Travis CI](https://github.com/marketplace/travis-ci){:rel="noopener noreferrer" target="_blank"}

#### Node.js

<a name="developer-nodejs"/>

##### Resource

<a name="developer-nodejs-resource"/>

jsDelivr, A free CDN for Open Source:
<https://www.jsdelivr.com/>{:rel="noopener noreferrer" target="_blank"}

Node Documentation:
<https://nodejs.org/en/docs/>{:rel="noopener noreferrer" target="_blank"}

Npm Repository:
<https://www.npmjs.com/>{:rel="noopener noreferrer" target="_blank"}

SriHash:
<https://www.srihash.org/>{:rel="noopener noreferrer" target="_blank"}

Yarn Documentation:
<https://classic.yarnpkg.com/en/docs/>{:rel="noopener noreferrer" target="_blank"}

##### Install

<a name="developer-nodejs-install"/>

On Debian Buster we don't use the default Debian repositories or the Nodesource repositories.
We use [nvm](https://github.com/nvm-sh/nvm){:rel="noopener noreferrer" target="_blank"}.

##### Setup

<a name="developer-nodejs-setup"/>

Follow the [nvm installation and update tutorial](https://github.com/nvm-sh/nvm#installation-and-update){:rel="noopener noreferrer" target="_blank"}:

Current installation and update script:

```
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.37.0/install.sh | bash
```

or

```
wget -qO- https://raw.githubusercontent.com/nvm-sh/nvm/v0.37.0/install.sh | bash
```

As we are using [zsh](https://github.com/robbyrussell/oh-my-zsh/wiki/Installing-ZSH){:rel="noopener noreferrer" target="_blank"}, here is an excerpt of our .zshrc

```
# nvm initialization!
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"  # This loads nvm
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"  # This loads nvm bash_completion

# place this after nvm initialization!
autoload -U add-zsh-hook
load-nvmrc() {
  local node_version="$(nvm version)"
  local nvmrc_path="$(nvm_find_nvmrc)"
  if [ -n "$nvmrc_path" ]; then
    local nvmrc_node_version=$(nvm version "$(cat "${nvmrc_path}")")
    if [ "$nvmrc_node_version" = "N/A" ]; then
      nvm install
    elif [ "$nvmrc_node_version" != "$node_version" ]; then
      nvm use
    fi
  elif [ "$node_version" != "$(nvm version default)" ]; then
    echo "Reverting to nvm default version"
    nvm use default
  fi
}
add-zsh-hook chpwd load-nvmrc
load-nvmrc
```

Check:

```
nvm -v
0.37.0
```

This repository contains a [.nvmrc](https://raw.githubusercontent.com/xmaysonnave/tiddlywiki-ipfs/develop/.nvmrc){:rel="noopener noreferrer" target="_blank"} who describes the node version to use.

```
v15
```

Install the recommended `node` version.

```
nvm install v15
```

Check:

```
node -v
v15.0.1
```

Install `yarn`.
<https://classic.yarnpkg.com/en/docs/install/#debian-stable>{:rel="noopener noreferrer" target="_blank"}

On Debian setup the `yarn` repository:

```
curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | sudo apt-key add -
echo "deb https://dl.yarnpkg.com/debian/ stable main" | sudo tee /etc/apt/sources.list.d/yarn.list
```

As we are using `nvm`, we avoid the `node` installation:

```
sudo apt update
sudo apt install --no-install-recommends yarn
```

Or Upgrade `yarn`.

```
yarn set version latest
```

Check your environment:

```
yarn --version
1.22.10
```

#### Repository install

<a name="developer-repository-install"/>

Clone this repository in a local folder:

```
git clone https://github.com/xmaysonnave/tiddlywiki-ipfs --depth 1
```

Change directory:

```
cd tiddlywiki-ipfs
```

Install dependencies, [Node.js](https://nodejs.org/){:rel="noopener noreferrer" target="_blank"} should be installed and setup:

```
yarn
```

#### Building TiddlyWiki

<a name="developer-building-tiddlywiki"/>

The repository contains several scripts who build TiddWiki instances bundled with `IPFS with TiddlyWiki`.

The [package.json](https://raw.githubusercontent.com/xmaysonnave/tiddlywiki-ipfs/develop/package.json){:rel="noopener noreferrer" target="_blank"} references several options:

- boot
- build
- build-noclone
- bluelightav
- cli-publish-node
- cli-semver
- cli-upload
- cli-upload-node
- dev
- documentation
- download
- editions
- empty
- ipfs-tiddlywiki
- library
- tiddlywiki-ipfs
- tiddlywiki
- precommit
- prepare
- prettier-standard
- snyk-monitor
- snyk-protect
- test
- testc
- testw

Use the `build` script to build `IPFS with TiddlyWiki`.

```
yarn build
```

Current `production` bluelightav.eth and empty `TiddlyWikis` editions from this respository:

- [bluelightav.eth](https://raw.githubusercontent.com/xmaysonnave/tiddlywiki-ipfs/develop/production/editions/bluelightav){:rel="noopener noreferrer" target="_blank"}
- [empty.html](h{:rel="noopener noreferrer" target="_blank"}ttps://raw.githubusercontent.com/xmaysonnave/tiddlywiki-ipfs/develop/production/editions/empty)

Current `IPFS with TiddlyWiki` boot, libraries and plugin from this repository:

- [\$:/boot/boot.js.json](https://raw.githubusercontent.com/{:rel="noopener noreferrer" target="_blank"}xmaysonnave/tiddlywiki-ipfs/develop/production/tiddlywiki-ipfs/boot)
- [\$:/ipfs/documentation.json](https://raw.githubusercontent.com/xmaysonnave/tiddlywiki-ipfs/develop/production/tiddlywiki-ipfs/documentation){:rel="noopener noreferrer" target="_blank"}
- [\$:/library/ipfs-library-modules.js.json](https://raw.githubusercontent.com/xmaysonnave/tiddlywiki-ipfs/develop/production/tiddlywiki-ipfs/library){:rel="noopener noreferrer" target="_blank"}
- [\$:/plugin/ipfs.json](https://raw.githubusercontent.com/xmaysonnave/tiddlywiki-ipfs/develop/production/tiddlywiki-ipfs/plugin){:rel="noopener noreferrer" target="_blank"}

The `sample` directory contains several sample runnable `TiddlyWikis`:

Use the `test` script to run the tests.

```
yarn test
```

This project is integrated with Travis CI:

- <https://travis-ci.com/github/xmaysonnave/tiddlywiki-ipfs>{:rel="noopener noreferrer" target="_blank"}

#### Running TiddlyWiki

<a name="developer-running"/>

Open `IPFS` <b>bluelightav.eth</b> or <b>empty</b> `TiddlyWikis` editions in your favorite browser:

- [bluelightav.eth](http://127.0.0.1:8080/ipfs/QmcAfZpXFayYRuwfYs9ojL2LUQzVgcS63QXQH2EbNXxZbt/editions/bluelightav/index.html){:rel="noopener noreferrer" target="_blank"}
- [empty](http://127.0.0.1:8080/ipfs/QmcAfZpXFayYRuwfYs9ojL2LUQzVgcS63QXQH2EbNXxZbt/editions/empty/index.html){:rel="noopener noreferrer" target="_blank"}

## Contributor Covenant Code of Conduct

<a name="contributing"/>

Please read [CODE_OF_CONDUCT.md](CODE_OF_CONDUCT.md){:rel="noopener noreferrer" target="_blank"} for details on our code of conduct.

## Authors

<a name="authors"/>

- **Xavier Maysonnave** - _Initial work_ - [IPFS with TiddlyWiki](https://github.com/xmaysonnave/tiddlywiki-ipfs){:rel="noopener noreferrer" target="_blank"}

See also the list of [contributors](https://github.com/xmaysonnave/tiddlywiki-ipfs/contributors){:rel="noopener noreferrer" target="_blank"} who participated in this project.

## License

<a name="license"/>

This project is licensed under the [GPL-3.0-or-later](https://spdx.org/licenses/GPL-3.0-or-later.html){:rel="noopener noreferrer" target="_blank"} - see the [LICENSE](LICENSE){:rel="noopener noreferrer" target="_blank"} file for details.

## Acknowledgments

<a name="acknowledgment"/>

- Hat tip to anyone who support this project
- Inspiration
