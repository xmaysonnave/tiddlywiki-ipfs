{
    "title": "$:/library/tiddlywiki5.js",
    "text": "// Library modules\n\"use strict\";var sjcl={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(a){this.toString=function(){return\"CORRUPT: \"+this.message};this.message=a},invalid:function(a){this.toString=function(){return\"INVALID: \"+this.message};this.message=a},bug:function(a){this.toString=function(){return\"BUG: \"+this.message};this.message=a},notReady:function(a){this.toString=function(){return\"NOT READY: \"+this.message};this.message=a}}};\nsjcl.cipher.aes=function(a){this.s[0][0][0]||this.O();var b,c,d,e,f=this.s[0][4],g=this.s[1];b=a.length;var h=1;if(4!==b&&6!==b&&8!==b)throw new sjcl.exception.invalid(\"invalid aes key size\");this.b=[d=a.slice(0),e=[]];for(a=b;a<4*b+28;a++){c=d[a-1];if(0===a%b||8===b&&4===a%b)c=f[c>>>24]<<24^f[c>>16&255]<<16^f[c>>8&255]<<8^f[c&255],0===a%b&&(c=c<<8^c>>>24^h<<24,h=h<<1^283*(h>>7));d[a]=d[a-b]^c}for(b=0;a;b++,a--)c=d[b&3?a:a-4],e[b]=4>=a||4>b?c:g[0][f[c>>>24]]^g[1][f[c>>16&255]]^g[2][f[c>>8&255]]^g[3][f[c&\n255]]};\nsjcl.cipher.aes.prototype={encrypt:function(a){return t(this,a,0)},decrypt:function(a){return t(this,a,1)},s:[[[],[],[],[],[]],[[],[],[],[],[]]],O:function(){var a=this.s[0],b=this.s[1],c=a[4],d=b[4],e,f,g,h=[],k=[],l,n,m,p;for(e=0;0x100>e;e++)k[(h[e]=e<<1^283*(e>>7))^e]=e;for(f=g=0;!c[f];f^=l||1,g=k[g]||1)for(m=g^g<<1^g<<2^g<<3^g<<4,m=m>>8^m&255^99,c[f]=m,d[m]=f,n=h[e=h[l=h[f]]],p=0x1010101*n^0x10001*e^0x101*l^0x1010100*f,n=0x101*h[m]^0x1010100*m,e=0;4>e;e++)a[e][f]=n=n<<24^n>>>8,b[e][m]=p=p<<24^p>>>8;for(e=\n0;5>e;e++)a[e]=a[e].slice(0),b[e]=b[e].slice(0)}};\nfunction t(a,b,c){if(4!==b.length)throw new sjcl.exception.invalid(\"invalid aes block size\");var d=a.b[c],e=b[0]^d[0],f=b[c?3:1]^d[1],g=b[2]^d[2];b=b[c?1:3]^d[3];var h,k,l,n=d.length/4-2,m,p=4,r=[0,0,0,0];h=a.s[c];a=h[0];var q=h[1],v=h[2],w=h[3],x=h[4];for(m=0;m<n;m++)h=a[e>>>24]^q[f>>16&255]^v[g>>8&255]^w[b&255]^d[p],k=a[f>>>24]^q[g>>16&255]^v[b>>8&255]^w[e&255]^d[p+1],l=a[g>>>24]^q[b>>16&255]^v[e>>8&255]^w[f&255]^d[p+2],b=a[b>>>24]^q[e>>16&255]^v[f>>8&255]^w[g&255]^d[p+3],p+=4,e=h,f=k,g=l;for(m=\n0;4>m;m++)r[c?3&-m:m]=x[e>>>24]<<24^x[f>>16&255]<<16^x[g>>8&255]<<8^x[b&255]^d[p++],h=e,e=f,f=g,g=b,b=h;return r}\nsjcl.bitArray={bitSlice:function(a,b,c){a=sjcl.bitArray.$(a.slice(b/32),32-(b&31)).slice(1);return void 0===c?a:sjcl.bitArray.clamp(a,c-b)},extract:function(a,b,c){var d=Math.floor(-b-c&31);return((b+c-1^b)&-32?a[b/32|0]<<32-d^a[b/32+1|0]>>>d:a[b/32|0]>>>d)&(1<<c)-1},concat:function(a,b){if(0===a.length||0===b.length)return a.concat(b);var c=a[a.length-1],d=sjcl.bitArray.getPartial(c);return 32===d?a.concat(b):sjcl.bitArray.$(b,d,c|0,a.slice(0,a.length-1))},bitLength:function(a){var b=a.length;return 0===\nb?0:32*(b-1)+sjcl.bitArray.getPartial(a[b-1])},clamp:function(a,b){if(32*a.length<b)return a;a=a.slice(0,Math.ceil(b/32));var c=a.length;b=b&31;0<c&&b&&(a[c-1]=sjcl.bitArray.partial(b,a[c-1]&2147483648>>b-1,1));return a},partial:function(a,b,c){return 32===a?b:(c?b|0:b<<32-a)+0x10000000000*a},getPartial:function(a){return Math.round(a/0x10000000000)||32},equal:function(a,b){if(sjcl.bitArray.bitLength(a)!==sjcl.bitArray.bitLength(b))return!1;var c=0,d;for(d=0;d<a.length;d++)c|=a[d]^b[d];return 0===\nc},$:function(a,b,c,d){var e;e=0;for(void 0===d&&(d=[]);32<=b;b-=32)d.push(c),c=0;if(0===b)return d.concat(a);for(e=0;e<a.length;e++)d.push(c|a[e]>>>b),c=a[e]<<32-b;e=a.length?a[a.length-1]:0;a=sjcl.bitArray.getPartial(e);d.push(sjcl.bitArray.partial(b+a&31,32<b+a?c:d.pop(),1));return d},i:function(a,b){return[a[0]^b[0],a[1]^b[1],a[2]^b[2],a[3]^b[3]]},byteswapM:function(a){var b,c;for(b=0;b<a.length;++b)c=a[b],a[b]=c>>>24|c>>>8&0xff00|(c&0xff00)<<8|c<<24;return a}};\nsjcl.codec.utf8String={fromBits:function(a){var b=\"\",c=sjcl.bitArray.bitLength(a),d,e;for(d=0;d<c/8;d++)0===(d&3)&&(e=a[d/4]),b+=String.fromCharCode(e>>>8>>>8>>>8),e<<=8;return decodeURIComponent(escape(b))},toBits:function(a){a=unescape(encodeURIComponent(a));var b=[],c,d=0;for(c=0;c<a.length;c++)d=d<<8|a.charCodeAt(c),3===(c&3)&&(b.push(d),d=0);c&3&&b.push(sjcl.bitArray.partial(8*(c&3),d));return b}};\nsjcl.codec.hex={fromBits:function(a){var b=\"\",c;for(c=0;c<a.length;c++)b+=((a[c]|0)+0xf00000000000).toString(16).substr(4);return b.substr(0,sjcl.bitArray.bitLength(a)/4)},toBits:function(a){var b,c=[],d;a=a.replace(/\\s|0x/g,\"\");d=a.length;a=a+\"00000000\";for(b=0;b<a.length;b+=8)c.push(parseInt(a.substr(b,8),16)^0);return sjcl.bitArray.clamp(c,4*d)}};\nsjcl.codec.base32={B:\"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567\",X:\"0123456789ABCDEFGHIJKLMNOPQRSTUV\",BITS:32,BASE:5,REMAINING:27,fromBits:function(a,b,c){var d=sjcl.codec.base32.BASE,e=sjcl.codec.base32.REMAINING,f=\"\",g=0,h=sjcl.codec.base32.B,k=0,l=sjcl.bitArray.bitLength(a);c&&(h=sjcl.codec.base32.X);for(c=0;f.length*d<l;)f+=h.charAt((k^a[c]>>>g)>>>e),g<d?(k=a[c]<<d-g,g+=e,c++):(k<<=d,g-=d);for(;f.length&7&&!b;)f+=\"=\";return f},toBits:function(a,b){a=a.replace(/\\s|=/g,\"\").toUpperCase();var c=sjcl.codec.base32.BITS,\nd=sjcl.codec.base32.BASE,e=sjcl.codec.base32.REMAINING,f=[],g,h=0,k=sjcl.codec.base32.B,l=0,n,m=\"base32\";b&&(k=sjcl.codec.base32.X,m=\"base32hex\");for(g=0;g<a.length;g++){n=k.indexOf(a.charAt(g));if(0>n){if(!b)try{return sjcl.codec.base32hex.toBits(a)}catch(p){}throw new sjcl.exception.invalid(\"this isn't \"+m+\"!\");}h>e?(h-=e,f.push(l^n>>>h),l=n<<c-h):(h+=d,l^=n<<c-h)}h&56&&f.push(sjcl.bitArray.partial(h&56,l,1));return f}};\nsjcl.codec.base32hex={fromBits:function(a,b){return sjcl.codec.base32.fromBits(a,b,1)},toBits:function(a){return sjcl.codec.base32.toBits(a,1)}};\nsjcl.codec.base64={B:\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",fromBits:function(a,b,c){var d=\"\",e=0,f=sjcl.codec.base64.B,g=0,h=sjcl.bitArray.bitLength(a);c&&(f=f.substr(0,62)+\"-_\");for(c=0;6*d.length<h;)d+=f.charAt((g^a[c]>>>e)>>>26),6>e?(g=a[c]<<6-e,e+=26,c++):(g<<=6,e-=6);for(;d.length&3&&!b;)d+=\"=\";return d},toBits:function(a,b){a=a.replace(/\\s|=/g,\"\");var c=[],d,e=0,f=sjcl.codec.base64.B,g=0,h;b&&(f=f.substr(0,62)+\"-_\");for(d=0;d<a.length;d++){h=f.indexOf(a.charAt(d));\nif(0>h)throw new sjcl.exception.invalid(\"this isn't base64!\");26<e?(e-=26,c.push(g^h>>>e),g=h<<32-e):(e+=6,g^=h<<32-e)}e&56&&c.push(sjcl.bitArray.partial(e&56,g,1));return c}};sjcl.codec.base64url={fromBits:function(a){return sjcl.codec.base64.fromBits(a,1,1)},toBits:function(a){return sjcl.codec.base64.toBits(a,1)}};sjcl.hash.sha256=function(a){this.b[0]||this.O();a?(this.F=a.F.slice(0),this.A=a.A.slice(0),this.l=a.l):this.reset()};sjcl.hash.sha256.hash=function(a){return(new sjcl.hash.sha256).update(a).finalize()};\nsjcl.hash.sha256.prototype={blockSize:512,reset:function(){this.F=this.Y.slice(0);this.A=[];this.l=0;return this},update:function(a){\"string\"===typeof a&&(a=sjcl.codec.utf8String.toBits(a));var b,c=this.A=sjcl.bitArray.concat(this.A,a);b=this.l;a=this.l=b+sjcl.bitArray.bitLength(a);if(0x1fffffffffffff<a)throw new sjcl.exception.invalid(\"Cannot hash more than 2^53 - 1 bits\");if(\"undefined\"!==typeof Uint32Array){var d=new Uint32Array(c),e=0;for(b=512+b-(512+b&0x1ff);b<=a;b+=512)u(this,d.subarray(16*e,\n16*(e+1))),e+=1;c.splice(0,16*e)}else for(b=512+b-(512+b&0x1ff);b<=a;b+=512)u(this,c.splice(0,16));return this},finalize:function(){var a,b=this.A,c=this.F,b=sjcl.bitArray.concat(b,[sjcl.bitArray.partial(1,1)]);for(a=b.length+2;a&15;a++)b.push(0);b.push(Math.floor(this.l/0x100000000));for(b.push(this.l|0);b.length;)u(this,b.splice(0,16));this.reset();return c},Y:[],b:[],O:function(){function a(a){return 0x100000000*(a-Math.floor(a))|0}for(var b=0,c=2,d,e;64>b;c++){e=!0;for(d=2;d*d<=c;d++)if(0===c%d){e=\n!1;break}e&&(8>b&&(this.Y[b]=a(Math.pow(c,.5))),this.b[b]=a(Math.pow(c,1/3)),b++)}}};\nfunction u(a,b){var c,d,e,f=a.F,g=a.b,h=f[0],k=f[1],l=f[2],n=f[3],m=f[4],p=f[5],r=f[6],q=f[7];for(c=0;64>c;c++)16>c?d=b[c]:(d=b[c+1&15],e=b[c+14&15],d=b[c&15]=(d>>>7^d>>>18^d>>>3^d<<25^d<<14)+(e>>>17^e>>>19^e>>>10^e<<15^e<<13)+b[c&15]+b[c+9&15]|0),d=d+q+(m>>>6^m>>>11^m>>>25^m<<26^m<<21^m<<7)+(r^m&(p^r))+g[c],q=r,r=p,p=m,m=n+d|0,n=l,l=k,k=h,h=d+(k&l^n&(k^l))+(k>>>2^k>>>13^k>>>22^k<<30^k<<19^k<<10)|0;f[0]=f[0]+h|0;f[1]=f[1]+k|0;f[2]=f[2]+l|0;f[3]=f[3]+n|0;f[4]=f[4]+m|0;f[5]=f[5]+p|0;f[6]=f[6]+r|0;f[7]=\nf[7]+q|0}\nsjcl.mode.ccm={name:\"ccm\",G:[],listenProgress:function(a){sjcl.mode.ccm.G.push(a)},unListenProgress:function(a){a=sjcl.mode.ccm.G.indexOf(a);-1<a&&sjcl.mode.ccm.G.splice(a,1)},fa:function(a){var b=sjcl.mode.ccm.G.slice(),c;for(c=0;c<b.length;c+=1)b[c](a)},encrypt:function(a,b,c,d,e){var f,g=b.slice(0),h=sjcl.bitArray,k=h.bitLength(c)/8,l=h.bitLength(g)/8;e=e||64;d=d||[];if(7>k)throw new sjcl.exception.invalid(\"ccm: iv must be at least 7 bytes\");for(f=2;4>f&&l>>>8*f;f++);f<15-k&&(f=15-k);c=h.clamp(c,\n8*(15-f));b=sjcl.mode.ccm.V(a,b,c,d,e,f);g=sjcl.mode.ccm.C(a,g,c,b,e,f);return h.concat(g.data,g.tag)},decrypt:function(a,b,c,d,e){e=e||64;d=d||[];var f=sjcl.bitArray,g=f.bitLength(c)/8,h=f.bitLength(b),k=f.clamp(b,h-e),l=f.bitSlice(b,h-e),h=(h-e)/8;if(7>g)throw new sjcl.exception.invalid(\"ccm: iv must be at least 7 bytes\");for(b=2;4>b&&h>>>8*b;b++);b<15-g&&(b=15-g);c=f.clamp(c,8*(15-b));k=sjcl.mode.ccm.C(a,k,c,l,e,b);a=sjcl.mode.ccm.V(a,k.data,c,d,e,b);if(!f.equal(k.tag,a))throw new sjcl.exception.corrupt(\"ccm: tag doesn't match\");\nreturn k.data},na:function(a,b,c,d,e,f){var g=[],h=sjcl.bitArray,k=h.i;d=[h.partial(8,(b.length?64:0)|d-2<<2|f-1)];d=h.concat(d,c);d[3]|=e;d=a.encrypt(d);if(b.length)for(c=h.bitLength(b)/8,65279>=c?g=[h.partial(16,c)]:0xffffffff>=c&&(g=h.concat([h.partial(16,65534)],[c])),g=h.concat(g,b),b=0;b<g.length;b+=4)d=a.encrypt(k(d,g.slice(b,b+4).concat([0,0,0])));return d},V:function(a,b,c,d,e,f){var g=sjcl.bitArray,h=g.i;e/=8;if(e%2||4>e||16<e)throw new sjcl.exception.invalid(\"ccm: invalid tag length\");\nif(0xffffffff<d.length||0xffffffff<b.length)throw new sjcl.exception.bug(\"ccm: can't deal with 4GiB or more data\");c=sjcl.mode.ccm.na(a,d,c,e,g.bitLength(b)/8,f);for(d=0;d<b.length;d+=4)c=a.encrypt(h(c,b.slice(d,d+4).concat([0,0,0])));return g.clamp(c,8*e)},C:function(a,b,c,d,e,f){var g,h=sjcl.bitArray;g=h.i;var k=b.length,l=h.bitLength(b),n=k/50,m=n;c=h.concat([h.partial(8,f-1)],c).concat([0,0,0]).slice(0,4);d=h.bitSlice(g(d,a.encrypt(c)),0,e);if(!k)return{tag:d,data:[]};for(g=0;g<k;g+=4)g>n&&(sjcl.mode.ccm.fa(g/\nk),n+=m),c[3]++,e=a.encrypt(c),b[g]^=e[0],b[g+1]^=e[1],b[g+2]^=e[2],b[g+3]^=e[3];return{tag:d,data:h.clamp(b,l)}}};\nsjcl.mode.ocb2={name:\"ocb2\",encrypt:function(a,b,c,d,e,f){if(128!==sjcl.bitArray.bitLength(c))throw new sjcl.exception.invalid(\"ocb iv must be 128 bits\");var g,h=sjcl.mode.ocb2.S,k=sjcl.bitArray,l=k.i,n=[0,0,0,0];c=h(a.encrypt(c));var m,p=[];d=d||[];e=e||64;for(g=0;g+4<b.length;g+=4)m=b.slice(g,g+4),n=l(n,m),p=p.concat(l(c,a.encrypt(l(c,m)))),c=h(c);m=b.slice(g);b=k.bitLength(m);g=a.encrypt(l(c,[0,0,0,b]));m=k.clamp(l(m.concat([0,0,0]),g),b);n=l(n,l(m.concat([0,0,0]),g));n=a.encrypt(l(n,l(c,h(c))));\nd.length&&(n=l(n,f?d:sjcl.mode.ocb2.pmac(a,d)));return p.concat(k.concat(m,k.clamp(n,e)))},decrypt:function(a,b,c,d,e,f){if(128!==sjcl.bitArray.bitLength(c))throw new sjcl.exception.invalid(\"ocb iv must be 128 bits\");e=e||64;var g=sjcl.mode.ocb2.S,h=sjcl.bitArray,k=h.i,l=[0,0,0,0],n=g(a.encrypt(c)),m,p,r=sjcl.bitArray.bitLength(b)-e,q=[];d=d||[];for(c=0;c+4<r/32;c+=4)m=k(n,a.decrypt(k(n,b.slice(c,c+4)))),l=k(l,m),q=q.concat(m),n=g(n);p=r-32*c;m=a.encrypt(k(n,[0,0,0,p]));m=k(m,h.clamp(b.slice(c),p).concat([0,\n0,0]));l=k(l,m);l=a.encrypt(k(l,k(n,g(n))));d.length&&(l=k(l,f?d:sjcl.mode.ocb2.pmac(a,d)));if(!h.equal(h.clamp(l,e),h.bitSlice(b,r)))throw new sjcl.exception.corrupt(\"ocb: tag doesn't match\");return q.concat(h.clamp(m,p))},pmac:function(a,b){var c,d=sjcl.mode.ocb2.S,e=sjcl.bitArray,f=e.i,g=[0,0,0,0],h=a.encrypt([0,0,0,0]),h=f(h,d(d(h)));for(c=0;c+4<b.length;c+=4)h=d(h),g=f(g,a.encrypt(f(h,b.slice(c,c+4))));c=b.slice(c);128>e.bitLength(c)&&(h=f(h,d(h)),c=e.concat(c,[-2147483648,0,0,0]));g=f(g,c);\nreturn a.encrypt(f(d(f(h,d(h))),g))},S:function(a){return[a[0]<<1^a[1]>>>31,a[1]<<1^a[2]>>>31,a[2]<<1^a[3]>>>31,a[3]<<1^135*(a[0]>>>31)]}};\nsjcl.mode.gcm={name:\"gcm\",encrypt:function(a,b,c,d,e){var f=b.slice(0);b=sjcl.bitArray;d=d||[];a=sjcl.mode.gcm.C(!0,a,f,d,c,e||128);return b.concat(a.data,a.tag)},decrypt:function(a,b,c,d,e){var f=b.slice(0),g=sjcl.bitArray,h=g.bitLength(f);e=e||128;d=d||[];e<=h?(b=g.bitSlice(f,h-e),f=g.bitSlice(f,0,h-e)):(b=f,f=[]);a=sjcl.mode.gcm.C(!1,a,f,d,c,e);if(!g.equal(a.tag,b))throw new sjcl.exception.corrupt(\"gcm: tag doesn't match\");return a.data},ka:function(a,b){var c,d,e,f,g,h=sjcl.bitArray.i;e=[0,0,\n0,0];f=b.slice(0);for(c=0;128>c;c++){(d=0!==(a[Math.floor(c/32)]&1<<31-c%32))&&(e=h(e,f));g=0!==(f[3]&1);for(d=3;0<d;d--)f[d]=f[d]>>>1|(f[d-1]&1)<<31;f[0]>>>=1;g&&(f[0]^=-0x1f000000)}return e},j:function(a,b,c){var d,e=c.length;b=b.slice(0);for(d=0;d<e;d+=4)b[0]^=0xffffffff&c[d],b[1]^=0xffffffff&c[d+1],b[2]^=0xffffffff&c[d+2],b[3]^=0xffffffff&c[d+3],b=sjcl.mode.gcm.ka(b,a);return b},C:function(a,b,c,d,e,f){var g,h,k,l,n,m,p,r,q=sjcl.bitArray;m=c.length;p=q.bitLength(c);r=q.bitLength(d);h=q.bitLength(e);\ng=b.encrypt([0,0,0,0]);96===h?(e=e.slice(0),e=q.concat(e,[1])):(e=sjcl.mode.gcm.j(g,[0,0,0,0],e),e=sjcl.mode.gcm.j(g,e,[0,0,Math.floor(h/0x100000000),h&0xffffffff]));h=sjcl.mode.gcm.j(g,[0,0,0,0],d);n=e.slice(0);d=h.slice(0);a||(d=sjcl.mode.gcm.j(g,h,c));for(l=0;l<m;l+=4)n[3]++,k=b.encrypt(n),c[l]^=k[0],c[l+1]^=k[1],c[l+2]^=k[2],c[l+3]^=k[3];c=q.clamp(c,p);a&&(d=sjcl.mode.gcm.j(g,h,c));a=[Math.floor(r/0x100000000),r&0xffffffff,Math.floor(p/0x100000000),p&0xffffffff];d=sjcl.mode.gcm.j(g,d,a);k=b.encrypt(e);\nd[0]^=k[0];d[1]^=k[1];d[2]^=k[2];d[3]^=k[3];return{tag:q.bitSlice(d,0,f),data:c}}};sjcl.misc.hmac=function(a,b){this.W=b=b||sjcl.hash.sha256;var c=[[],[]],d,e=b.prototype.blockSize/32;this.w=[new b,new b];a.length>e&&(a=b.hash(a));for(d=0;d<e;d++)c[0][d]=a[d]^909522486,c[1][d]=a[d]^1549556828;this.w[0].update(c[0]);this.w[1].update(c[1]);this.R=new b(this.w[0])};\nsjcl.misc.hmac.prototype.encrypt=sjcl.misc.hmac.prototype.mac=function(a){if(this.aa)throw new sjcl.exception.invalid(\"encrypt on already updated hmac called!\");this.update(a);return this.digest(a)};sjcl.misc.hmac.prototype.reset=function(){this.R=new this.W(this.w[0]);this.aa=!1};sjcl.misc.hmac.prototype.update=function(a){this.aa=!0;this.R.update(a)};sjcl.misc.hmac.prototype.digest=function(){var a=this.R.finalize(),a=(new this.W(this.w[1])).update(a).finalize();this.reset();return a};\nsjcl.misc.pbkdf2=function(a,b,c,d,e){c=c||1E4;if(0>d||0>c)throw new sjcl.exception.invalid(\"invalid params to pbkdf2\");\"string\"===typeof a&&(a=sjcl.codec.utf8String.toBits(a));\"string\"===typeof b&&(b=sjcl.codec.utf8String.toBits(b));e=e||sjcl.misc.hmac;a=new e(a);var f,g,h,k,l=[],n=sjcl.bitArray;for(k=1;32*l.length<(d||1);k++){e=f=a.encrypt(n.concat(b,[k]));for(g=1;g<c;g++)for(f=a.encrypt(f),h=0;h<f.length;h++)e[h]^=f[h];l=l.concat(e)}d&&(l=n.clamp(l,d));return l};\nsjcl.prng=function(a){this.c=[new sjcl.hash.sha256];this.m=[0];this.P=0;this.H={};this.N=0;this.U={};this.Z=this.f=this.o=this.ha=0;this.b=[0,0,0,0,0,0,0,0];this.h=[0,0,0,0];this.L=void 0;this.M=a;this.D=!1;this.K={progress:{},seeded:{}};this.u=this.ga=0;this.I=1;this.J=2;this.ca=0x10000;this.T=[0,48,64,96,128,192,0x100,384,512,768,1024];this.da=3E4;this.ba=80};\nsjcl.prng.prototype={randomWords:function(a,b){var c=[],d;d=this.isReady(b);var e;if(d===this.u)throw new sjcl.exception.notReady(\"generator isn't seeded\");if(d&this.J){d=!(d&this.I);e=[];var f=0,g;this.Z=e[0]=(new Date).valueOf()+this.da;for(g=0;16>g;g++)e.push(0x100000000*Math.random()|0);for(g=0;g<this.c.length&&(e=e.concat(this.c[g].finalize()),f+=this.m[g],this.m[g]=0,d||!(this.P&1<<g));g++);this.P>=1<<this.c.length&&(this.c.push(new sjcl.hash.sha256),this.m.push(0));this.f-=f;f>this.o&&(this.o=\nf);this.P++;this.b=sjcl.hash.sha256.hash(this.b.concat(e));this.L=new sjcl.cipher.aes(this.b);for(d=0;4>d&&(this.h[d]=this.h[d]+1|0,!this.h[d]);d++);}for(d=0;d<a;d+=4)0===(d+1)%this.ca&&y(this),e=z(this),c.push(e[0],e[1],e[2],e[3]);y(this);return c.slice(0,a)},setDefaultParanoia:function(a,b){if(0===a&&\"Setting paranoia=0 will ruin your security; use it only for testing\"!==b)throw new sjcl.exception.invalid(\"Setting paranoia=0 will ruin your security; use it only for testing\");this.M=a},addEntropy:function(a,\nb,c){c=c||\"user\";var d,e,f=(new Date).valueOf(),g=this.H[c],h=this.isReady(),k=0;d=this.U[c];void 0===d&&(d=this.U[c]=this.ha++);void 0===g&&(g=this.H[c]=0);this.H[c]=(this.H[c]+1)%this.c.length;switch(typeof a){case \"number\":void 0===b&&(b=1);this.c[g].update([d,this.N++,1,b,f,1,a|0]);break;case \"object\":c=Object.prototype.toString.call(a);if(\"[object Uint32Array]\"===c){e=[];for(c=0;c<a.length;c++)e.push(a[c]);a=e}else for(\"[object Array]\"!==c&&(k=1),c=0;c<a.length&&!k;c++)\"number\"!==typeof a[c]&&\n(k=1);if(!k){if(void 0===b)for(c=b=0;c<a.length;c++)for(e=a[c];0<e;)b++,e=e>>>1;this.c[g].update([d,this.N++,2,b,f,a.length].concat(a))}break;case \"string\":void 0===b&&(b=a.length);this.c[g].update([d,this.N++,3,b,f,a.length]);this.c[g].update(a);break;default:k=1}if(k)throw new sjcl.exception.bug(\"random: addEntropy only supports number, array of numbers or string\");this.m[g]+=b;this.f+=b;h===this.u&&(this.isReady()!==this.u&&A(\"seeded\",Math.max(this.o,this.f)),A(\"progress\",this.getProgress()))},\nisReady:function(a){a=this.T[void 0!==a?a:this.M];return this.o&&this.o>=a?this.m[0]>this.ba&&(new Date).valueOf()>this.Z?this.J|this.I:this.I:this.f>=a?this.J|this.u:this.u},getProgress:function(a){a=this.T[a?a:this.M];return this.o>=a?1:this.f>a?1:this.f/a},startCollectors:function(){if(!this.D){this.a={loadTimeCollector:B(this,this.ma),mouseCollector:B(this,this.oa),keyboardCollector:B(this,this.la),accelerometerCollector:B(this,this.ea),touchCollector:B(this,this.qa)};if(window.addEventListener)window.addEventListener(\"load\",\nthis.a.loadTimeCollector,!1),window.addEventListener(\"mousemove\",this.a.mouseCollector,!1),window.addEventListener(\"keypress\",this.a.keyboardCollector,!1),window.addEventListener(\"devicemotion\",this.a.accelerometerCollector,!1),window.addEventListener(\"touchmove\",this.a.touchCollector,!1);else if(document.attachEvent)document.attachEvent(\"onload\",this.a.loadTimeCollector),document.attachEvent(\"onmousemove\",this.a.mouseCollector),document.attachEvent(\"keypress\",this.a.keyboardCollector);else throw new sjcl.exception.bug(\"can't attach event\");\nthis.D=!0}},stopCollectors:function(){this.D&&(window.removeEventListener?(window.removeEventListener(\"load\",this.a.loadTimeCollector,!1),window.removeEventListener(\"mousemove\",this.a.mouseCollector,!1),window.removeEventListener(\"keypress\",this.a.keyboardCollector,!1),window.removeEventListener(\"devicemotion\",this.a.accelerometerCollector,!1),window.removeEventListener(\"touchmove\",this.a.touchCollector,!1)):document.detachEvent&&(document.detachEvent(\"onload\",this.a.loadTimeCollector),document.detachEvent(\"onmousemove\",\nthis.a.mouseCollector),document.detachEvent(\"keypress\",this.a.keyboardCollector)),this.D=!1)},addEventListener:function(a,b){this.K[a][this.ga++]=b},removeEventListener:function(a,b){var c,d,e=this.K[a],f=[];for(d in e)e.hasOwnProperty(d)&&e[d]===b&&f.push(d);for(c=0;c<f.length;c++)d=f[c],delete e[d]},la:function(){C(this,1)},oa:function(a){var b,c;try{b=a.x||a.clientX||a.offsetX||0,c=a.y||a.clientY||a.offsetY||0}catch(d){c=b=0}0!=b&&0!=c&&this.addEntropy([b,c],2,\"mouse\");C(this,0)},qa:function(a){a=\na.touches[0]||a.changedTouches[0];this.addEntropy([a.pageX||a.clientX,a.pageY||a.clientY],1,\"touch\");C(this,0)},ma:function(){C(this,2)},ea:function(a){a=a.accelerationIncludingGravity.x||a.accelerationIncludingGravity.y||a.accelerationIncludingGravity.z;if(window.orientation){var b=window.orientation;\"number\"===typeof b&&this.addEntropy(b,1,\"accelerometer\")}a&&this.addEntropy(a,2,\"accelerometer\");C(this,0)}};\nfunction A(a,b){var c,d=sjcl.random.K[a],e=[];for(c in d)d.hasOwnProperty(c)&&e.push(d[c]);for(c=0;c<e.length;c++)e[c](b)}function C(a,b){\"undefined\"!==typeof window&&window.performance&&\"function\"===typeof window.performance.now?a.addEntropy(window.performance.now(),b,\"loadtime\"):a.addEntropy((new Date).valueOf(),b,\"loadtime\")}function y(a){a.b=z(a).concat(z(a));a.L=new sjcl.cipher.aes(a.b)}function z(a){for(var b=0;4>b&&(a.h[b]=a.h[b]+1|0,!a.h[b]);b++);return a.L.encrypt(a.h)}\nfunction B(a,b){return function(){b.apply(a,arguments)}}sjcl.random=new sjcl.prng(6);\na:try{var D,E,F,G;if(G=\"undefined\"!==typeof module&&module.exports){var H;try{H=require(\"crypto\")}catch(a){H=null}G=E=H}if(G&&E.randomBytes)D=E.randomBytes(128),D=new Uint32Array((new Uint8Array(D)).buffer),sjcl.random.addEntropy(D,1024,\"crypto['randomBytes']\");else if(\"undefined\"!==typeof window&&\"undefined\"!==typeof Uint32Array){F=new Uint32Array(32);if(window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(F);else if(window.msCrypto&&window.msCrypto.getRandomValues)window.msCrypto.getRandomValues(F);\nelse break a;sjcl.random.addEntropy(F,1024,\"crypto['getRandomValues']\")}}catch(a){\"undefined\"!==typeof window&&window.console&&(console.log(\"There was an error collecting entropy from the browser:\"),console.log(a))}\nsjcl.json={defaults:{v:1,iter:1E4,ks:128,ts:64,mode:\"ccm\",adata:\"\",cipher:\"aes\"},ja:function(a,b,c,d){c=c||{};d=d||{};var e=sjcl.json,f=e.g({iv:sjcl.random.randomWords(4,0)},e.defaults),g;e.g(f,c);c=f.adata;\"string\"===typeof f.salt&&(f.salt=sjcl.codec.base64.toBits(f.salt));\"string\"===typeof f.iv&&(f.iv=sjcl.codec.base64.toBits(f.iv));if(!sjcl.mode[f.mode]||!sjcl.cipher[f.cipher]||\"string\"===typeof a&&100>=f.iter||64!==f.ts&&96!==f.ts&&128!==f.ts||128!==f.ks&&192!==f.ks&&0x100!==f.ks||2>f.iv.length||\n4<f.iv.length)throw new sjcl.exception.invalid(\"json encrypt: invalid parameters\");\"string\"===typeof a?(g=sjcl.misc.cachedPbkdf2(a,f),a=g.key.slice(0,f.ks/32),f.salt=g.salt):sjcl.ecc&&a instanceof sjcl.ecc.elGamal.publicKey&&(g=a.kem(),f.kemtag=g.tag,a=g.key.slice(0,f.ks/32));\"string\"===typeof b&&(b=sjcl.codec.utf8String.toBits(b));\"string\"===typeof c&&(f.adata=c=sjcl.codec.utf8String.toBits(c));g=new sjcl.cipher[f.cipher](a);e.g(d,f);d.key=a;f.ct=\"ccm\"===f.mode&&sjcl.arrayBuffer&&sjcl.arrayBuffer.ccm&&\nb instanceof ArrayBuffer?sjcl.arrayBuffer.ccm.encrypt(g,b,f.iv,c,f.ts):sjcl.mode[f.mode].encrypt(g,b,f.iv,c,f.ts);return f},encrypt:function(a,b,c,d){var e=sjcl.json,f=e.ja.apply(e,arguments);return e.encode(f)},ia:function(a,b,c,d){c=c||{};d=d||{};var e=sjcl.json;b=e.g(e.g(e.g({},e.defaults),b),c,!0);var f,g;f=b.adata;\"string\"===typeof b.salt&&(b.salt=sjcl.codec.base64.toBits(b.salt));\"string\"===typeof b.iv&&(b.iv=sjcl.codec.base64.toBits(b.iv));if(!sjcl.mode[b.mode]||!sjcl.cipher[b.cipher]||\"string\"===\ntypeof a&&100>=b.iter||64!==b.ts&&96!==b.ts&&128!==b.ts||128!==b.ks&&192!==b.ks&&0x100!==b.ks||!b.iv||2>b.iv.length||4<b.iv.length)throw new sjcl.exception.invalid(\"json decrypt: invalid parameters\");\"string\"===typeof a?(g=sjcl.misc.cachedPbkdf2(a,b),a=g.key.slice(0,b.ks/32),b.salt=g.salt):sjcl.ecc&&a instanceof sjcl.ecc.elGamal.secretKey&&(a=a.unkem(sjcl.codec.base64.toBits(b.kemtag)).slice(0,b.ks/32));\"string\"===typeof f&&(f=sjcl.codec.utf8String.toBits(f));g=new sjcl.cipher[b.cipher](a);f=\"ccm\"===\nb.mode&&sjcl.arrayBuffer&&sjcl.arrayBuffer.ccm&&b.ct instanceof ArrayBuffer?sjcl.arrayBuffer.ccm.decrypt(g,b.ct,b.iv,b.tag,f,b.ts):sjcl.mode[b.mode].decrypt(g,b.ct,b.iv,f,b.ts);e.g(d,b);d.key=a;return 1===c.raw?f:sjcl.codec.utf8String.fromBits(f)},decrypt:function(a,b,c,d){var e=sjcl.json;return e.ia(a,e.decode(b),c,d)},encode:function(a){var b,c=\"{\",d=\"\";for(b in a)if(a.hasOwnProperty(b)){if(!b.match(/^[a-z0-9]+$/i))throw new sjcl.exception.invalid(\"json encode: invalid property name\");c+=d+'\"'+\nb+'\":';d=\",\";switch(typeof a[b]){case \"number\":case \"boolean\":c+=a[b];break;case \"string\":c+='\"'+escape(a[b])+'\"';break;case \"object\":c+='\"'+sjcl.codec.base64.fromBits(a[b],0)+'\"';break;default:throw new sjcl.exception.bug(\"json encode: unsupported type\");}}return c+\"}\"},decode:function(a){a=a.replace(/\\s/g,\"\");if(!a.match(/^\\{.*\\}$/))throw new sjcl.exception.invalid(\"json decode: this isn't json!\");a=a.replace(/^\\{|\\}$/g,\"\").split(/,/);var b={},c,d;for(c=0;c<a.length;c++){if(!(d=a[c].match(/^\\s*(?:([\"']?)([a-z][a-z0-9]*)\\1)\\s*:\\s*(?:(-?\\d+)|\"([a-z0-9+\\/%*_.@=\\-]*)\"|(true|false))$/i)))throw new sjcl.exception.invalid(\"json decode: this isn't json!\");\nnull!=d[3]?b[d[2]]=parseInt(d[3],10):null!=d[4]?b[d[2]]=d[2].match(/^(ct|adata|salt|iv)$/)?sjcl.codec.base64.toBits(d[4]):unescape(d[4]):null!=d[5]&&(b[d[2]]=\"true\"===d[5])}return b},g:function(a,b,c){void 0===a&&(a={});if(void 0===b)return a;for(var d in b)if(b.hasOwnProperty(d)){if(c&&void 0!==a[d]&&a[d]!==b[d])throw new sjcl.exception.invalid(\"required parameter overridden\");a[d]=b[d]}return a},sa:function(a,b){var c={},d;for(d in a)a.hasOwnProperty(d)&&a[d]!==b[d]&&(c[d]=a[d]);return c},ra:function(a,\nb){var c={},d;for(d=0;d<b.length;d++)void 0!==a[b[d]]&&(c[b[d]]=a[b[d]]);return c}};sjcl.encrypt=sjcl.json.encrypt;sjcl.decrypt=sjcl.json.decrypt;sjcl.misc.pa={};sjcl.misc.cachedPbkdf2=function(a,b){var c=sjcl.misc.pa,d;b=b||{};d=b.iter||1E3;c=c[a]=c[a]||{};d=c[d]=c[d]||{firstSalt:b.salt&&b.salt.length?b.salt.slice(0):sjcl.random.randomWords(2,0)};c=void 0===b.salt?d.firstSalt:b.salt;d[c]=d[c]||sjcl.misc.pbkdf2(a,c,b.iter);return{key:d[c].slice(0),salt:c.slice(0)}};\n\"undefined\"!==typeof module&&module.exports&&(module.exports=sjcl);\"function\"===typeof define&&define([],function(){return sjcl});\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.detectEthereumProvider = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\nmodule.exports=function({mustBeMetaMask:e=!1,silent:t=!1,timeout:o=3e3}={}){!function(){if(\"boolean\"!=typeof e)throw new Error(\"@metamask/detect-provider: Expected option 'mustBeMetaMask' to be a boolean.\");if(\"boolean\"!=typeof t)throw new Error(\"@metamask/detect-provider: Expected option 'silent' to be a boolean.\");if(\"number\"!=typeof o)throw new Error(\"@metamask/detect-provider: Expected option 'timeout' to be a number.\")}();let n=!1;return new Promise(r=>{function i(){if(n)return;n=!0,window.removeEventListener(\"ethereum#initialized\",i);const{ethereum:o}=window;if(!o||e&&!o.isMetaMask){const n=e&&o?\"Non-MetaMask window.ethereum detected.\":\"Unable to detect window.ethereum.\";!t&&console.error(\"@metamask/detect-provider:\",n),r(null)}else r(o)}window.ethereum?i():(window.addEventListener(\"ethereum#initialized\",i,{once:!0}),setTimeout(()=>{i()},o))})};\n\n},{}]},{},[1])(1)\n});\n!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{(\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this).createKeccakHash=e()}}((function(){return function e(t,r,n){function i(s,a){if(!r[s]){if(!t[s]){var f=\"function\"==typeof require&&require;if(!a&&f)return f(s,!0);if(o)return o(s,!0);var u=new Error(\"Cannot find module '\"+s+\"'\");throw u.code=\"MODULE_NOT_FOUND\",u}var l=r[s]={exports:{}};t[s][0].call(l.exports,(function(e){return i(t[s][1][e]||e)}),l,l.exports,e,t,r,n)}return r[s].exports}for(var o=\"function\"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,r){\"use strict\";r.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return 3*(r+n)/4-n};r.toByteArray=function(e){var t,r,n=u(e),s=n[0],a=n[1],f=new o(function(e,t,r){return 3*(t+r)/4-r}(0,s,a)),l=0,h=a>0?s-4:s;for(r=0;r<h;r+=4){t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)];f[l++]=t>>16&255;f[l++]=t>>8&255;f[l++]=255&t}if(2===a){t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4;f[l++]=255&t}if(1===a){t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2;f[l++]=t>>8&255;f[l++]=255&t}return f};r.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],s=16383,a=0,f=r-i;a<f;a+=s)o.push(l(e,a,a+s>f?f:a+s));if(1===i){t=e[r-1];o.push(n[t>>2]+n[t<<4&63]+\"==\")}else if(2===i){t=(e[r-2]<<8)+e[r-1];o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+\"=\")}return o.join(\"\")};for(var n=[],i=[],o=\"undefined\"!=typeof Uint8Array?Uint8Array:Array,s=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",a=0,f=s.length;a<f;++a){n[a]=s[a];i[s.charCodeAt(a)]=a}i[\"-\".charCodeAt(0)]=62;i[\"_\".charCodeAt(0)]=63;function u(e){var t=e.length;if(t%4>0)throw new Error(\"Invalid string. Length must be a multiple of 4\");var r=e.indexOf(\"=\");-1===r&&(r=t);return[r,r===t?0:4-r%4]}function l(e,t,r){for(var i,o,s=[],a=t;a<r;a+=3){i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]);s.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o])}return s.join(\"\")}},{}],2:[function(e,t,r){},{}],3:[function(e,t,r){(function(t){\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n\"use strict\";var n=e(\"base64-js\"),i=e(\"ieee754\");r.Buffer=t;r.SlowBuffer=function(e){+e!=e&&(e=0);return t.alloc(+e)};r.INSPECT_MAX_BYTES=50;var o=2147483647;r.kMaxLength=o;t.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===e.foo()}catch(e){return!1}}();t.TYPED_ARRAY_SUPPORT||\"undefined\"==typeof console||\"function\"!=typeof console.error||console.error(\"This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.\");Object.defineProperty(t.prototype,\"parent\",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.buffer}});Object.defineProperty(t.prototype,\"offset\",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.byteOffset}});function s(e){if(e>o)throw new RangeError('The value \"'+e+'\" is invalid for option \"size\"');var r=new Uint8Array(e);r.__proto__=t.prototype;return r}function t(e,t,r){if(\"number\"==typeof e){if(\"string\"==typeof t)throw new TypeError('The \"string\" argument must be of type string. Received type number');return u(e)}return a(e,t,r)}\"undefined\"!=typeof Symbol&&null!=Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1});t.poolSize=8192;function a(e,r,n){if(\"string\"==typeof e)return function(e,r){\"string\"==typeof r&&\"\"!==r||(r=\"utf8\");if(!t.isEncoding(r))throw new TypeError(\"Unknown encoding: \"+r);var n=0|c(e,r),i=s(n),o=i.write(e,r);o!==n&&(i=i.slice(0,o));return i}(e,r);if(ArrayBuffer.isView(e))return l(e);if(null==e)throw TypeError(\"The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type \"+typeof e);if(P(e,ArrayBuffer)||e&&P(e.buffer,ArrayBuffer))return function(e,r,n){if(r<0||e.byteLength<r)throw new RangeError('\"offset\" is outside of buffer bounds');if(e.byteLength<r+(n||0))throw new RangeError('\"length\" is outside of buffer bounds');var i;i=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);i.__proto__=t.prototype;return i}(e,r,n);if(\"number\"==typeof e)throw new TypeError('The \"value\" argument must not be of type number. Received type number');var i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return t.from(i,r,n);var o=function(e){if(t.isBuffer(e)){var r=0|h(e.length),n=s(r);if(0===n.length)return n;e.copy(n,0,0,r);return n}if(void 0!==e.length)return\"number\"!=typeof e.length||D(e.length)?s(0):l(e);if(\"Buffer\"===e.type&&Array.isArray(e.data))return l(e.data)}(e);if(o)return o;if(\"undefined\"!=typeof Symbol&&null!=Symbol.toPrimitive&&\"function\"==typeof e[Symbol.toPrimitive])return t.from(e[Symbol.toPrimitive](\"string\"),r,n);throw new TypeError(\"The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type \"+typeof e)}t.from=function(e,t,r){return a(e,t,r)};t.prototype.__proto__=Uint8Array.prototype;t.__proto__=Uint8Array;function f(e){if(\"number\"!=typeof e)throw new TypeError('\"size\" argument must be of type number');if(e<0)throw new RangeError('The value \"'+e+'\" is invalid for option \"size\"')}t.alloc=function(e,t,r){return function(e,t,r){f(e);return e<=0?s(e):void 0!==t?\"string\"==typeof r?s(e).fill(t,r):s(e).fill(t):s(e)}(e,t,r)};function u(e){f(e);return s(e<0?0:0|h(e))}t.allocUnsafe=function(e){return u(e)};t.allocUnsafeSlow=function(e){return u(e)};function l(e){for(var t=e.length<0?0:0|h(e.length),r=s(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function h(e){if(e>=o)throw new RangeError(\"Attempt to allocate Buffer larger than maximum size: 0x\"+o.toString(16)+\" bytes\");return 0|e}t.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==t.prototype};t.compare=function(e,r){P(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength));P(r,Uint8Array)&&(r=t.from(r,r.offset,r.byteLength));if(!t.isBuffer(e)||!t.isBuffer(r))throw new TypeError('The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;for(var n=e.length,i=r.length,o=0,s=Math.min(n,i);o<s;++o)if(e[o]!==r[o]){n=e[o];i=r[o];break}return n<i?-1:i<n?1:0};t.isEncoding=function(e){switch(String(e).toLowerCase()){case\"hex\":case\"utf8\":case\"utf-8\":case\"ascii\":case\"latin1\":case\"binary\":case\"base64\":case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return!0;default:return!1}};t.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('\"list\" argument must be an Array of Buffers');if(0===e.length)return t.alloc(0);var n;if(void 0===r){r=0;for(n=0;n<e.length;++n)r+=e[n].length}var i=t.allocUnsafe(r),o=0;for(n=0;n<e.length;++n){var s=e[n];P(s,Uint8Array)&&(s=t.from(s));if(!t.isBuffer(s))throw new TypeError('\"list\" argument must be an Array of Buffers');s.copy(i,o);o+=s.length}return i};function c(e,r){if(t.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||P(e,ArrayBuffer))return e.byteLength;if(\"string\"!=typeof e)throw new TypeError('The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===n)return 0;for(var o=!1;;)switch(r){case\"ascii\":case\"latin1\":case\"binary\":return n;case\"utf8\":case\"utf-8\":return N(e).length;case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return 2*n;case\"hex\":return n>>>1;case\"base64\":return z(e).length;default:if(o)return i?-1:N(e).length;r=(\"\"+r).toLowerCase();o=!0}}t.byteLength=c;function d(e,t,r){var n=!1;(void 0===t||t<0)&&(t=0);if(t>this.length)return\"\";(void 0===r||r>this.length)&&(r=this.length);if(r<=0)return\"\";if((r>>>=0)<=(t>>>=0))return\"\";e||(e=\"utf8\");for(;;)switch(e){case\"hex\":return B(this,t,r);case\"utf8\":case\"utf-8\":return E(this,t,r);case\"ascii\":return T(this,t,r);case\"latin1\":case\"binary\":return L(this,t,r);case\"base64\":return x(this,t,r);case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return j(this,t,r);default:if(n)throw new TypeError(\"Unknown encoding: \"+e);e=(e+\"\").toLowerCase();n=!0}}t.prototype._isBuffer=!0;function p(e,t,r){var n=e[t];e[t]=e[r];e[r]=n}t.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError(\"Buffer size must be a multiple of 16-bits\");for(var t=0;t<e;t+=2)p(this,t,t+1);return this};t.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError(\"Buffer size must be a multiple of 32-bits\");for(var t=0;t<e;t+=4){p(this,t,t+3);p(this,t+1,t+2)}return this};t.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError(\"Buffer size must be a multiple of 64-bits\");for(var t=0;t<e;t+=8){p(this,t,t+7);p(this,t+1,t+6);p(this,t+2,t+5);p(this,t+3,t+4)}return this};t.prototype.toString=function(){var e=this.length;return 0===e?\"\":0===arguments.length?E(this,0,e):d.apply(this,arguments)};t.prototype.toLocaleString=t.prototype.toString;t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError(\"Argument must be a Buffer\");return this===e||0===t.compare(this,e)};t.prototype.inspect=function(){var e=\"\",t=r.INSPECT_MAX_BYTES;e=this.toString(\"hex\",0,t).replace(/(.{2})/g,\"$1 \").trim();this.length>t&&(e+=\" ... \");return\"<Buffer \"+e+\">\"};t.prototype.compare=function(e,r,n,i,o){P(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength));if(!t.isBuffer(e))throw new TypeError('The \"target\" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);void 0===r&&(r=0);void 0===n&&(n=e?e.length:0);void 0===i&&(i=0);void 0===o&&(o=this.length);if(r<0||n>e.length||i<0||o>this.length)throw new RangeError(\"out of range index\");if(i>=o&&r>=n)return 0;if(i>=o)return-1;if(r>=n)return 1;if(this===e)return 0;for(var s=(o>>>=0)-(i>>>=0),a=(n>>>=0)-(r>>>=0),f=Math.min(s,a),u=this.slice(i,o),l=e.slice(r,n),h=0;h<f;++h)if(u[h]!==l[h]){s=u[h];a=l[h];break}return s<a?-1:a<s?1:0};function g(e,r,n,i,o){if(0===e.length)return-1;if(\"string\"==typeof n){i=n;n=0}else n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648);D(n=+n)&&(n=o?0:e.length-1);n<0&&(n=e.length+n);if(n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}\"string\"==typeof r&&(r=t.from(r,i));if(t.isBuffer(r))return 0===r.length?-1:y(e,r,n,i,o);if(\"number\"==typeof r){r&=255;return\"function\"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,r,n):Uint8Array.prototype.lastIndexOf.call(e,r,n):y(e,[r],n,i,o)}throw new TypeError(\"val must be string, number or Buffer\")}function y(e,t,r,n,i){var o,s=1,a=e.length,f=t.length;if(void 0!==n&&(\"ucs2\"===(n=String(n).toLowerCase())||\"ucs-2\"===n||\"utf16le\"===n||\"utf-16le\"===n)){if(e.length<2||t.length<2)return-1;s=2;a/=2;f/=2;r/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var l=-1;for(o=r;o<a;o++)if(u(e,o)===u(t,-1===l?0:o-l)){-1===l&&(l=o);if(o-l+1===f)return l*s}else{-1!==l&&(o-=o-l);l=-1}}else{r+f>a&&(r=a-f);for(o=r;o>=0;o--){for(var h=!0,c=0;c<f;c++)if(u(e,o+c)!==u(t,c)){h=!1;break}if(h)return o}}return-1}t.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)};t.prototype.indexOf=function(e,t,r){return g(this,e,t,r,!0)};t.prototype.lastIndexOf=function(e,t,r){return g(this,e,t,r,!1)};function b(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(D(a))return s;e[r+s]=a}return s}function w(e,t,r,n){return q(N(t,e.length-r),e,r,n)}function m(e,t,r,n){return q(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function v(e,t,r,n){return m(e,t,r,n)}function _(e,t,r,n){return q(z(t),e,r,n)}function S(e,t,r,n){return q(function(e,t){for(var r,n,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s){n=(r=e.charCodeAt(s))>>8;i=r%256;o.push(i);o.push(n)}return o}(t,e.length-r),e,r,n)}t.prototype.write=function(e,t,r,n){if(void 0===t){n=\"utf8\";r=this.length;t=0}else if(void 0===r&&\"string\"==typeof t){n=t;r=this.length;t=0}else{if(!isFinite(t))throw new Error(\"Buffer.write(string, encoding, offset[, length]) is no longer supported\");t>>>=0;if(isFinite(r)){r>>>=0;void 0===n&&(n=\"utf8\")}else{n=r;r=void 0}}var i=this.length-t;(void 0===r||r>i)&&(r=i);if(e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError(\"Attempt to write outside buffer bounds\");n||(n=\"utf8\");for(var o=!1;;)switch(n){case\"hex\":return b(this,e,t,r);case\"utf8\":case\"utf-8\":return w(this,e,t,r);case\"ascii\":return m(this,e,t,r);case\"latin1\":case\"binary\":return v(this,e,t,r);case\"base64\":return _(this,e,t,r);case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return S(this,e,t,r);default:if(o)throw new TypeError(\"Unknown encoding: \"+n);n=(\"\"+n).toLowerCase();o=!0}};t.prototype.toJSON=function(){return{type:\"Buffer\",data:Array.prototype.slice.call(this._arr||this,0)}};function x(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function E(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o=e[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=r){var f,u,l,h;switch(a){case 1:o<128&&(s=o);break;case 2:128==(192&(f=e[i+1]))&&(h=(31&o)<<6|63&f)>127&&(s=h);break;case 3:f=e[i+1];u=e[i+2];128==(192&f)&&128==(192&u)&&(h=(15&o)<<12|(63&f)<<6|63&u)>2047&&(h<55296||h>57343)&&(s=h);break;case 4:f=e[i+1];u=e[i+2];l=e[i+3];128==(192&f)&&128==(192&u)&&128==(192&l)&&(h=(15&o)<<18|(63&f)<<12|(63&u)<<6|63&l)>65535&&h<1114112&&(s=h)}}if(null===s){s=65533;a=1}else if(s>65535){s-=65536;n.push(s>>>10&1023|55296);s=56320|1023&s}n.push(s);i+=a}return function(e){var t=e.length;if(t<=k)return String.fromCharCode.apply(String,e);var r=\"\",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=k));return r}(n)}var k=4096;function T(e,t,r){var n=\"\";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function L(e,t,r){var n=\"\";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function B(e,t,r){var n=e.length;(!t||t<0)&&(t=0);(!r||r<0||r>n)&&(r=n);for(var i=\"\",o=t;o<r;++o)i+=I(e[o]);return i}function j(e,t,r){for(var n=e.slice(t,r),i=\"\",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}t.prototype.slice=function(e,r){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n);(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n);r<e&&(r=e);var i=this.subarray(e,r);i.__proto__=t.prototype;return i};function A(e,t,r){if(e%1!=0||e<0)throw new RangeError(\"offset is not uint\");if(e+t>r)throw new RangeError(\"Trying to access beyond buffer length\")}t.prototype.readUIntLE=function(e,t,r){e>>>=0;t>>>=0;r||A(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n};t.prototype.readUIntBE=function(e,t,r){e>>>=0;t>>>=0;r||A(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n};t.prototype.readUInt8=function(e,t){e>>>=0;t||A(e,1,this.length);return this[e]};t.prototype.readUInt16LE=function(e,t){e>>>=0;t||A(e,2,this.length);return this[e]|this[e+1]<<8};t.prototype.readUInt16BE=function(e,t){e>>>=0;t||A(e,2,this.length);return this[e]<<8|this[e+1]};t.prototype.readUInt32LE=function(e,t){e>>>=0;t||A(e,4,this.length);return(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]};t.prototype.readUInt32BE=function(e,t){e>>>=0;t||A(e,4,this.length);return 16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])};t.prototype.readIntLE=function(e,t,r){e>>>=0;t>>>=0;r||A(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;n>=(i*=128)&&(n-=Math.pow(2,8*t));return n};t.prototype.readIntBE=function(e,t,r){e>>>=0;t>>>=0;r||A(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;o>=(i*=128)&&(o-=Math.pow(2,8*t));return o};t.prototype.readInt8=function(e,t){e>>>=0;t||A(e,1,this.length);return 128&this[e]?-1*(255-this[e]+1):this[e]};t.prototype.readInt16LE=function(e,t){e>>>=0;t||A(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r};t.prototype.readInt16BE=function(e,t){e>>>=0;t||A(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r};t.prototype.readInt32LE=function(e,t){e>>>=0;t||A(e,4,this.length);return this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};t.prototype.readInt32BE=function(e,t){e>>>=0;t||A(e,4,this.length);return this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};t.prototype.readFloatLE=function(e,t){e>>>=0;t||A(e,4,this.length);return i.read(this,e,!0,23,4)};t.prototype.readFloatBE=function(e,t){e>>>=0;t||A(e,4,this.length);return i.read(this,e,!1,23,4)};t.prototype.readDoubleLE=function(e,t){e>>>=0;t||A(e,8,this.length);return i.read(this,e,!0,52,8)};t.prototype.readDoubleBE=function(e,t){e>>>=0;t||A(e,8,this.length);return i.read(this,e,!1,52,8)};function M(e,r,n,i,o,s){if(!t.isBuffer(e))throw new TypeError('\"buffer\" argument must be a Buffer instance');if(r>o||r<s)throw new RangeError('\"value\" argument is out of bounds');if(n+i>e.length)throw new RangeError(\"Index out of range\")}t.prototype.writeUIntLE=function(e,t,r,n){e=+e;t>>>=0;r>>>=0;if(!n){M(this,e,t,r,Math.pow(2,8*r)-1,0)}var i=1,o=0;this[t]=255&e;for(;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r};t.prototype.writeUIntBE=function(e,t,r,n){e=+e;t>>>=0;r>>>=0;if(!n){M(this,e,t,r,Math.pow(2,8*r)-1,0)}var i=r-1,o=1;this[t+i]=255&e;for(;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r};t.prototype.writeUInt8=function(e,t,r){e=+e;t>>>=0;r||M(this,e,t,1,255,0);this[t]=255&e;return t+1};t.prototype.writeUInt16LE=function(e,t,r){e=+e;t>>>=0;r||M(this,e,t,2,65535,0);this[t]=255&e;this[t+1]=e>>>8;return t+2};t.prototype.writeUInt16BE=function(e,t,r){e=+e;t>>>=0;r||M(this,e,t,2,65535,0);this[t]=e>>>8;this[t+1]=255&e;return t+2};t.prototype.writeUInt32LE=function(e,t,r){e=+e;t>>>=0;r||M(this,e,t,4,4294967295,0);this[t+3]=e>>>24;this[t+2]=e>>>16;this[t+1]=e>>>8;this[t]=255&e;return t+4};t.prototype.writeUInt32BE=function(e,t,r){e=+e;t>>>=0;r||M(this,e,t,4,4294967295,0);this[t]=e>>>24;this[t+1]=e>>>16;this[t+2]=e>>>8;this[t+3]=255&e;return t+4};t.prototype.writeIntLE=function(e,t,r,n){e=+e;t>>>=0;if(!n){var i=Math.pow(2,8*r-1);M(this,e,t,r,i-1,-i)}var o=0,s=1,a=0;this[t]=255&e;for(;++o<r&&(s*=256);){e<0&&0===a&&0!==this[t+o-1]&&(a=1);this[t+o]=(e/s>>0)-a&255}return t+r};t.prototype.writeIntBE=function(e,t,r,n){e=+e;t>>>=0;if(!n){var i=Math.pow(2,8*r-1);M(this,e,t,r,i-1,-i)}var o=r-1,s=1,a=0;this[t+o]=255&e;for(;--o>=0&&(s*=256);){e<0&&0===a&&0!==this[t+o+1]&&(a=1);this[t+o]=(e/s>>0)-a&255}return t+r};t.prototype.writeInt8=function(e,t,r){e=+e;t>>>=0;r||M(this,e,t,1,127,-128);e<0&&(e=255+e+1);this[t]=255&e;return t+1};t.prototype.writeInt16LE=function(e,t,r){e=+e;t>>>=0;r||M(this,e,t,2,32767,-32768);this[t]=255&e;this[t+1]=e>>>8;return t+2};t.prototype.writeInt16BE=function(e,t,r){e=+e;t>>>=0;r||M(this,e,t,2,32767,-32768);this[t]=e>>>8;this[t+1]=255&e;return t+2};t.prototype.writeInt32LE=function(e,t,r){e=+e;t>>>=0;r||M(this,e,t,4,2147483647,-2147483648);this[t]=255&e;this[t+1]=e>>>8;this[t+2]=e>>>16;this[t+3]=e>>>24;return t+4};t.prototype.writeInt32BE=function(e,t,r){e=+e;t>>>=0;r||M(this,e,t,4,2147483647,-2147483648);e<0&&(e=4294967295+e+1);this[t]=e>>>24;this[t+1]=e>>>16;this[t+2]=e>>>8;this[t+3]=255&e;return t+4};function C(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError(\"Index out of range\");if(r<0)throw new RangeError(\"Index out of range\")}function R(e,t,r,n,o){t=+t;r>>>=0;o||C(e,0,r,4);i.write(e,t,r,n,23,4);return r+4}t.prototype.writeFloatLE=function(e,t,r){return R(this,e,t,!0,r)};t.prototype.writeFloatBE=function(e,t,r){return R(this,e,t,!1,r)};function U(e,t,r,n,o){t=+t;r>>>=0;o||C(e,0,r,8);i.write(e,t,r,n,52,8);return r+8}t.prototype.writeDoubleLE=function(e,t,r){return U(this,e,t,!0,r)};t.prototype.writeDoubleBE=function(e,t,r){return U(this,e,t,!1,r)};t.prototype.copy=function(e,r,n,i){if(!t.isBuffer(e))throw new TypeError(\"argument should be a Buffer\");n||(n=0);i||0===i||(i=this.length);r>=e.length&&(r=e.length);r||(r=0);i>0&&i<n&&(i=n);if(i===n)return 0;if(0===e.length||0===this.length)return 0;if(r<0)throw new RangeError(\"targetStart out of bounds\");if(n<0||n>=this.length)throw new RangeError(\"Index out of range\");if(i<0)throw new RangeError(\"sourceEnd out of bounds\");i>this.length&&(i=this.length);e.length-r<i-n&&(i=e.length-r+n);var o=i-n;if(this===e&&\"function\"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(r,n,i);else if(this===e&&n<r&&r<i)for(var s=o-1;s>=0;--s)e[s+r]=this[s+n];else Uint8Array.prototype.set.call(e,this.subarray(n,i),r);return o};t.prototype.fill=function(e,r,n,i){if(\"string\"==typeof e){if(\"string\"==typeof r){i=r;r=0;n=this.length}else if(\"string\"==typeof n){i=n;n=this.length}if(void 0!==i&&\"string\"!=typeof i)throw new TypeError(\"encoding must be a string\");if(\"string\"==typeof i&&!t.isEncoding(i))throw new TypeError(\"Unknown encoding: \"+i);if(1===e.length){var o=e.charCodeAt(0);(\"utf8\"===i&&o<128||\"latin1\"===i)&&(e=o)}}else\"number\"==typeof e&&(e&=255);if(r<0||this.length<r||this.length<n)throw new RangeError(\"Out of range index\");if(n<=r)return this;r>>>=0;n=void 0===n?this.length:n>>>0;e||(e=0);var s;if(\"number\"==typeof e)for(s=r;s<n;++s)this[s]=e;else{var a=t.isBuffer(e)?e:t.from(e,i),f=a.length;if(0===f)throw new TypeError('The value \"'+e+'\" is invalid for argument \"value\"');for(s=0;s<n-r;++s)this[s+r]=a[s%f]}return this};var O=/[^+/0-9A-Za-z-_]/g;function I(e){return e<16?\"0\"+e.toString(16):e.toString(16)}function N(e,t){t=t||1/0;for(var r,n=e.length,i=null,o=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189);i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);i=null;if(r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error(\"Invalid code point\");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function z(e){return n.toByteArray(function(e){if((e=(e=e.split(\"=\")[0]).trim().replace(O,\"\")).length<2)return\"\";for(;e.length%4!=0;)e+=\"=\";return e}(e))}function q(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function P(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function D(e){return e!=e}}).call(this,e(\"buffer\").Buffer)},{\"base64-js\":1,buffer:3,ieee754:6}],4:[function(e,t,r){(function(e){r.isArray=function(e){return Array.isArray?Array.isArray(e):\"[object Array]\"===t(e)};r.isBoolean=function(e){return\"boolean\"==typeof e};r.isNull=function(e){return null===e};r.isNullOrUndefined=function(e){return null==e};r.isNumber=function(e){return\"number\"==typeof e};r.isString=function(e){return\"string\"==typeof e};r.isSymbol=function(e){return\"symbol\"==typeof e};r.isUndefined=function(e){return void 0===e};r.isRegExp=function(e){return\"[object RegExp]\"===t(e)};r.isObject=function(e){return\"object\"==typeof e&&null!==e};r.isDate=function(e){return\"[object Date]\"===t(e)};r.isError=function(e){return\"[object Error]\"===t(e)||e instanceof Error};r.isFunction=function(e){return\"function\"==typeof e};r.isPrimitive=function(e){return null===e||\"boolean\"==typeof e||\"number\"==typeof e||\"string\"==typeof e||\"symbol\"==typeof e||void 0===e};r.isBuffer=e.isBuffer;function t(e){return Object.prototype.toString.call(e)}}).call(this,{isBuffer:e(\"../../is-buffer/index.js\")})},{\"../../is-buffer/index.js\":8}],5:[function(e,t,r){var n=Object.create||function(e){var t=function(){};t.prototype=e;return new t},i=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return r},o=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function s(){if(!this._events||!Object.prototype.hasOwnProperty.call(this,\"_events\")){this._events=n(null);this._eventsCount=0}this._maxListeners=this._maxListeners||void 0}t.exports=s;s.EventEmitter=s;s.prototype._events=void 0;s.prototype._maxListeners=void 0;var a,f=10;try{var u={};Object.defineProperty&&Object.defineProperty(u,\"x\",{value:0});a=0===u.x}catch(e){a=!1}a?Object.defineProperty(s,\"defaultMaxListeners\",{enumerable:!0,get:function(){return f},set:function(e){if(\"number\"!=typeof e||e<0||e!=e)throw new TypeError('\"defaultMaxListeners\" must be a positive number');f=e}}):s.defaultMaxListeners=f;s.prototype.setMaxListeners=function(e){if(\"number\"!=typeof e||e<0||isNaN(e))throw new TypeError('\"n\" argument must be a positive number');this._maxListeners=e;return this};function l(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}s.prototype.getMaxListeners=function(){return l(this)};function h(e,t,r){if(t)e.call(r);else for(var n=e.length,i=_(e,n),o=0;o<n;++o)i[o].call(r)}function c(e,t,r,n){if(t)e.call(r,n);else for(var i=e.length,o=_(e,i),s=0;s<i;++s)o[s].call(r,n)}function d(e,t,r,n,i){if(t)e.call(r,n,i);else for(var o=e.length,s=_(e,o),a=0;a<o;++a)s[a].call(r,n,i)}function p(e,t,r,n,i,o){if(t)e.call(r,n,i,o);else for(var s=e.length,a=_(e,s),f=0;f<s;++f)a[f].call(r,n,i,o)}function g(e,t,r,n){if(t)e.apply(r,n);else for(var i=e.length,o=_(e,i),s=0;s<i;++s)o[s].apply(r,n)}s.prototype.emit=function(e){var t,r,n,i,o,s,a=\"error\"===e;if(s=this._events)a=a&&null==s.error;else if(!a)return!1;if(a){arguments.length>1&&(t=arguments[1]);if(t instanceof Error)throw t;var f=new Error('Unhandled \"error\" event. ('+t+\")\");f.context=t;throw f}if(!(r=s[e]))return!1;var u=\"function\"==typeof r;switch(n=arguments.length){case 1:h(r,u,this);break;case 2:c(r,u,this,arguments[1]);break;case 3:d(r,u,this,arguments[1],arguments[2]);break;case 4:p(r,u,this,arguments[1],arguments[2],arguments[3]);break;default:i=new Array(n-1);for(o=1;o<n;o++)i[o-1]=arguments[o];g(r,u,this,i)}return!0};function y(e,t,r,i){var o,s,a;if(\"function\"!=typeof r)throw new TypeError('\"listener\" argument must be a function');if(s=e._events){if(s.newListener){e.emit(\"newListener\",t,r.listener?r.listener:r);s=e._events}a=s[t]}else{s=e._events=n(null);e._eventsCount=0}if(a){\"function\"==typeof a?a=s[t]=i?[r,a]:[a,r]:i?a.unshift(r):a.push(r);if(!a.warned&&(o=l(e))&&o>0&&a.length>o){a.warned=!0;var f=new Error(\"Possible EventEmitter memory leak detected. \"+a.length+' \"'+String(t)+'\" listeners added. Use emitter.setMaxListeners() to increase limit.');f.name=\"MaxListenersExceededWarning\";f.emitter=e;f.type=t;f.count=a.length;\"object\"==typeof console&&console.warn&&console.warn(\"%s: %s\",f.name,f.message)}}else{a=s[t]=r;++e._eventsCount}return e}s.prototype.addListener=function(e,t){return y(this,e,t,!1)};s.prototype.on=s.prototype.addListener;s.prototype.prependListener=function(e,t){return y(this,e,t,!0)};function b(){if(!this.fired){this.target.removeListener(this.type,this.wrapFn);this.fired=!0;switch(arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}}function w(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=o.call(b,n);i.listener=r;n.wrapFn=i;return i}s.prototype.once=function(e,t){if(\"function\"!=typeof t)throw new TypeError('\"listener\" argument must be a function');this.on(e,w(this,e,t));return this};s.prototype.prependOnceListener=function(e,t){if(\"function\"!=typeof t)throw new TypeError('\"listener\" argument must be a function');this.prependListener(e,w(this,e,t));return this};s.prototype.removeListener=function(e,t){var r,i,o,s,a;if(\"function\"!=typeof t)throw new TypeError('\"listener\" argument must be a function');if(!(i=this._events))return this;if(!(r=i[e]))return this;if(r===t||r.listener===t)if(0==--this._eventsCount)this._events=n(null);else{delete i[e];i.removeListener&&this.emit(\"removeListener\",e,r.listener||t)}else if(\"function\"!=typeof r){o=-1;for(s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){a=r[s].listener;o=s;break}if(o<0)return this;0===o?r.shift():function(e,t){for(var r=t,n=r+1,i=e.length;n<i;r+=1,n+=1)e[r]=e[n];e.pop()}(r,o);1===r.length&&(i[e]=r[0]);i.removeListener&&this.emit(\"removeListener\",e,a||t)}return this};s.prototype.removeAllListeners=function(e){var t,r,o;if(!(r=this._events))return this;if(!r.removeListener){if(0===arguments.length){this._events=n(null);this._eventsCount=0}else r[e]&&(0==--this._eventsCount?this._events=n(null):delete r[e]);return this}if(0===arguments.length){var s,a=i(r);for(o=0;o<a.length;++o)\"removeListener\"!==(s=a[o])&&this.removeAllListeners(s);this.removeAllListeners(\"removeListener\");this._events=n(null);this._eventsCount=0;return this}if(\"function\"==typeof(t=r[e]))this.removeListener(e,t);else if(t)for(o=t.length-1;o>=0;o--)this.removeListener(e,t[o]);return this};function m(e,t,r){var n=e._events;if(!n)return[];var i=n[t];return i?\"function\"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):_(i,i.length):[]}s.prototype.listeners=function(e){return m(this,e,!0)};s.prototype.rawListeners=function(e){return m(this,e,!1)};s.listenerCount=function(e,t){return\"function\"==typeof e.listenerCount?e.listenerCount(t):v.call(e,t)};s.prototype.listenerCount=v;function v(e){var t=this._events;if(t){var r=t[e];if(\"function\"==typeof r)return 1;if(r)return r.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function _(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}},{}],6:[function(e,t,r){r.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,f=(1<<a)-1,u=f>>1,l=-7,h=r?i-1:0,c=r?-1:1,d=e[t+h];h+=c;o=d&(1<<-l)-1;d>>=-l;l+=a;for(;l>0;o=256*o+e[t+h],h+=c,l-=8);s=o&(1<<-l)-1;o>>=-l;l+=n;for(;l>0;s=256*s+e[t+h],h+=c,l-=8);if(0===o)o=1-u;else{if(o===f)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n);o-=u}return(d?-1:1)*s*Math.pow(2,o-n)};r.write=function(e,t,r,n,i,o){var s,a,f,u=8*o-i-1,l=(1<<u)-1,h=l>>1,c=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,g=t<0||0===t&&1/t<0?1:0;t=Math.abs(t);if(isNaN(t)||t===1/0){a=isNaN(t)?1:0;s=l}else{s=Math.floor(Math.log(t)/Math.LN2);if(t*(f=Math.pow(2,-s))<1){s--;f*=2}if((t+=s+h>=1?c/f:c*Math.pow(2,1-h))*f>=2){s++;f/=2}if(s+h>=l){a=0;s=l}else if(s+h>=1){a=(t*f-1)*Math.pow(2,i);s+=h}else{a=t*Math.pow(2,h-1)*Math.pow(2,i);s=0}}for(;i>=8;e[r+d]=255&a,d+=p,a/=256,i-=8);s=s<<i|a;u+=i;for(;u>0;e[r+d]=255&s,d+=p,s/=256,u-=8);e[r+d-p]|=128*g}},{}],7:[function(e,t,r){\"function\"==typeof Object.create?t.exports=function(e,t){if(t){e.super_=t;e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}}:t.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype;e.prototype=new r;e.prototype.constructor=e}}},{}],8:[function(e,t,r){\n/*!\n * Determine if an object is a Buffer\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\nt.exports=function(e){return null!=e&&(n(e)||function(e){return\"function\"==typeof e.readFloatLE&&\"function\"==typeof e.slice&&n(e.slice(0,0))}(e)||!!e._isBuffer)};function n(e){return!!e.constructor&&\"function\"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},{}],9:[function(e,t,r){var n={}.toString;t.exports=Array.isArray||function(e){return\"[object Array]\"==n.call(e)}},{}],10:[function(e,t,r){t.exports=e(\"./lib/api\")(e(\"./lib/keccak\"))},{\"./lib/api\":11,\"./lib/keccak\":15}],11:[function(e,t,r){const n=e(\"./keccak\"),i=e(\"./shake\");t.exports=function(e){const t=n(e),r=i(e);return function(e,n){switch(\"string\"==typeof e?e.toLowerCase():e){case\"keccak224\":return new t(1152,448,null,224,n);case\"keccak256\":return new t(1088,512,null,256,n);case\"keccak384\":return new t(832,768,null,384,n);case\"keccak512\":return new t(576,1024,null,512,n);case\"sha3-224\":return new t(1152,448,6,224,n);case\"sha3-256\":return new t(1088,512,6,256,n);case\"sha3-384\":return new t(832,768,6,384,n);case\"sha3-512\":return new t(576,1024,6,512,n);case\"shake128\":return new r(1344,256,31,n);case\"shake256\":return new r(1088,512,31,n);default:throw new Error(\"Invald algorithm: \"+e)}}}},{\"./keccak\":12,\"./shake\":13}],12:[function(e,t,r){(function(r){const{Transform:n}=e(\"stream\");t.exports=e=>class t extends n{constructor(t,r,n,i,o){super(o);this._rate=t;this._capacity=r;this._delimitedSuffix=n;this._hashBitLength=i;this._options=o;this._state=new e;this._state.initialize(t,r);this._finalized=!1}_transform(e,t,r){let n=null;try{this.update(e,t)}catch(e){n=e}r(n)}_flush(e){let t=null;try{this.push(this.digest())}catch(e){t=e}e(t)}update(e,t){if(!r.isBuffer(e)&&\"string\"!=typeof e)throw new TypeError(\"Data must be a string or a buffer\");if(this._finalized)throw new Error(\"Digest already called\");r.isBuffer(e)||(e=r.from(e,t));this._state.absorb(e);return this}digest(e){if(this._finalized)throw new Error(\"Digest already called\");this._finalized=!0;this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let t=this._state.squeeze(this._hashBitLength/8);void 0!==e&&(t=t.toString(e));this._resetState();return t}_resetState(){this._state.initialize(this._rate,this._capacity);return this}_clone(){const e=new t(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);this._state.copy(e._state);e._finalized=this._finalized;return e}}}).call(this,e(\"buffer\").Buffer)},{buffer:3,stream:33}],13:[function(e,t,r){(function(r){const{Transform:n}=e(\"stream\");t.exports=e=>class t extends n{constructor(t,r,n,i){super(i);this._rate=t;this._capacity=r;this._delimitedSuffix=n;this._options=i;this._state=new e;this._state.initialize(t,r);this._finalized=!1}_transform(e,t,r){let n=null;try{this.update(e,t)}catch(e){n=e}r(n)}_flush(){}_read(e){this.push(this.squeeze(e))}update(e,t){if(!r.isBuffer(e)&&\"string\"!=typeof e)throw new TypeError(\"Data must be a string or a buffer\");if(this._finalized)throw new Error(\"Squeeze already called\");r.isBuffer(e)||(e=r.from(e,t));this._state.absorb(e);return this}squeeze(e,t){if(!this._finalized){this._finalized=!0;this._state.absorbLastFewBits(this._delimitedSuffix)}let r=this._state.squeeze(e);void 0!==t&&(r=r.toString(t));return r}_resetState(){this._state.initialize(this._rate,this._capacity);return this}_clone(){const e=new t(this._rate,this._capacity,this._delimitedSuffix,this._options);this._state.copy(e._state);e._finalized=this._finalized;return e}}}).call(this,e(\"buffer\").Buffer)},{buffer:3,stream:33}],14:[function(e,t,r){const n=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];r.p1600=function(e){for(let t=0;t<24;++t){const r=e[0]^e[10]^e[20]^e[30]^e[40],i=e[1]^e[11]^e[21]^e[31]^e[41],o=e[2]^e[12]^e[22]^e[32]^e[42],s=e[3]^e[13]^e[23]^e[33]^e[43],a=e[4]^e[14]^e[24]^e[34]^e[44],f=e[5]^e[15]^e[25]^e[35]^e[45],u=e[6]^e[16]^e[26]^e[36]^e[46],l=e[7]^e[17]^e[27]^e[37]^e[47],h=e[8]^e[18]^e[28]^e[38]^e[48],c=e[9]^e[19]^e[29]^e[39]^e[49];let d=h^(o<<1|s>>>31),p=c^(s<<1|o>>>31);const g=e[0]^d,y=e[1]^p,b=e[10]^d,w=e[11]^p,m=e[20]^d,v=e[21]^p,_=e[30]^d,S=e[31]^p,x=e[40]^d,E=e[41]^p;d=r^(a<<1|f>>>31);p=i^(f<<1|a>>>31);const k=e[2]^d,T=e[3]^p,L=e[12]^d,B=e[13]^p,j=e[22]^d,A=e[23]^p,M=e[32]^d,C=e[33]^p,R=e[42]^d,U=e[43]^p;d=o^(u<<1|l>>>31);p=s^(l<<1|u>>>31);const O=e[4]^d,I=e[5]^p,N=e[14]^d,z=e[15]^p,q=e[24]^d,P=e[25]^p,D=e[34]^d,W=e[35]^p,F=e[44]^d,H=e[45]^p;d=a^(h<<1|c>>>31);p=f^(c<<1|h>>>31);const Y=e[6]^d,K=e[7]^p,V=e[16]^d,X=e[17]^p,J=e[26]^d,Z=e[27]^p,G=e[36]^d,Q=e[37]^p,$=e[46]^d,ee=e[47]^p;d=u^(r<<1|i>>>31);p=l^(i<<1|r>>>31);const te=e[8]^d,re=e[9]^p,ne=e[18]^d,ie=e[19]^p,oe=e[28]^d,se=e[29]^p,ae=e[38]^d,fe=e[39]^p,ue=e[48]^d,le=e[49]^p,he=g,ce=y,de=w<<4|b>>>28,pe=b<<4|w>>>28,ge=m<<3|v>>>29,ye=v<<3|m>>>29,be=S<<9|_>>>23,we=_<<9|S>>>23,me=x<<18|E>>>14,ve=E<<18|x>>>14,_e=k<<1|T>>>31,Se=T<<1|k>>>31,xe=B<<12|L>>>20,Ee=L<<12|B>>>20,ke=j<<10|A>>>22,Te=A<<10|j>>>22,Le=C<<13|M>>>19,Be=M<<13|C>>>19,je=R<<2|U>>>30,Ae=U<<2|R>>>30,Me=I<<30|O>>>2,Ce=O<<30|I>>>2,Re=N<<6|z>>>26,Ue=z<<6|N>>>26,Oe=P<<11|q>>>21,Ie=q<<11|P>>>21,Ne=D<<15|W>>>17,ze=W<<15|D>>>17,qe=H<<29|F>>>3,Pe=F<<29|H>>>3,De=Y<<28|K>>>4,We=K<<28|Y>>>4,Fe=X<<23|V>>>9,He=V<<23|X>>>9,Ye=J<<25|Z>>>7,Ke=Z<<25|J>>>7,Ve=G<<21|Q>>>11,Xe=Q<<21|G>>>11,Je=ee<<24|$>>>8,Ze=$<<24|ee>>>8,Ge=te<<27|re>>>5,Qe=re<<27|te>>>5,$e=ne<<20|ie>>>12,et=ie<<20|ne>>>12,tt=se<<7|oe>>>25,rt=oe<<7|se>>>25,nt=ae<<8|fe>>>24,it=fe<<8|ae>>>24,ot=ue<<14|le>>>18,st=le<<14|ue>>>18;e[0]=he^~xe&Oe;e[1]=ce^~Ee&Ie;e[10]=De^~$e&ge;e[11]=We^~et&ye;e[20]=_e^~Re&Ye;e[21]=Se^~Ue&Ke;e[30]=Ge^~de&ke;e[31]=Qe^~pe&Te;e[40]=Me^~Fe&tt;e[41]=Ce^~He&rt;e[2]=xe^~Oe&Ve;e[3]=Ee^~Ie&Xe;e[12]=$e^~ge&Le;e[13]=et^~ye&Be;e[22]=Re^~Ye&nt;e[23]=Ue^~Ke&it;e[32]=de^~ke&Ne;e[33]=pe^~Te&ze;e[42]=Fe^~tt&be;e[43]=He^~rt&we;e[4]=Oe^~Ve&ot;e[5]=Ie^~Xe&st;e[14]=ge^~Le&qe;e[15]=ye^~Be&Pe;e[24]=Ye^~nt&me;e[25]=Ke^~it&ve;e[34]=ke^~Ne&Je;e[35]=Te^~ze&Ze;e[44]=tt^~be&je;e[45]=rt^~we&Ae;e[6]=Ve^~ot&he;e[7]=Xe^~st&ce;e[16]=Le^~qe&De;e[17]=Be^~Pe&We;e[26]=nt^~me&_e;e[27]=it^~ve&Se;e[36]=Ne^~Je&Ge;e[37]=ze^~Ze&Qe;e[46]=be^~je&Me;e[47]=we^~Ae&Ce;e[8]=ot^~he&xe;e[9]=st^~ce&Ee;e[18]=qe^~De&$e;e[19]=Pe^~We&et;e[28]=me^~_e&Re;e[29]=ve^~Se&Ue;e[38]=Je^~Ge&de;e[39]=Ze^~Qe&pe;e[48]=je^~Me&Fe;e[49]=Ae^~Ce&He;e[0]^=n[2*t];e[1]^=n[2*t+1]}}},{}],15:[function(e,t,r){(function(r){const n=e(\"./keccak-state-unroll\");function i(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.blockSize=null;this.count=0;this.squeezing=!1}i.prototype.initialize=function(e,t){for(let e=0;e<50;++e)this.state[e]=0;this.blockSize=e/8;this.count=0;this.squeezing=!1};i.prototype.absorb=function(e){for(let t=0;t<e.length;++t){this.state[~~(this.count/4)]^=e[t]<<this.count%4*8;this.count+=1;if(this.count===this.blockSize){n.p1600(this.state);this.count=0}}};i.prototype.absorbLastFewBits=function(e){this.state[~~(this.count/4)]^=e<<this.count%4*8;0!=(128&e)&&this.count===this.blockSize-1&&n.p1600(this.state);this.state[~~((this.blockSize-1)/4)]^=128<<(this.blockSize-1)%4*8;n.p1600(this.state);this.count=0;this.squeezing=!0};i.prototype.squeeze=function(e){this.squeezing||this.absorbLastFewBits(1);const t=r.alloc(e);for(let r=0;r<e;++r){t[r]=this.state[~~(this.count/4)]>>>this.count%4*8&255;this.count+=1;if(this.count===this.blockSize){n.p1600(this.state);this.count=0}}return t};i.prototype.copy=function(e){for(let t=0;t<50;++t)e.state[t]=this.state[t];e.blockSize=this.blockSize;e.count=this.count;e.squeezing=this.squeezing};t.exports=i}).call(this,e(\"buffer\").Buffer)},{\"./keccak-state-unroll\":14,buffer:3}],16:[function(e,t,r){(function(e){\"use strict\";void 0===e||!e.version||0===e.version.indexOf(\"v0.\")||0===e.version.indexOf(\"v1.\")&&0!==e.version.indexOf(\"v1.8.\")?t.exports={nextTick:function(t,r,n,i){if(\"function\"!=typeof t)throw new TypeError('\"callback\" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,r)}));case 3:return e.nextTick((function(){t.call(null,r,n)}));case 4:return e.nextTick((function(){t.call(null,r,n,i)}));default:o=new Array(a-1);s=0;for(;s<o.length;)o[s++]=arguments[s];return e.nextTick((function(){t.apply(null,o)}))}}}:t.exports=e}).call(this,e(\"_process\"))},{_process:17}],17:[function(e,t,r){var n,i,o=t.exports={};function s(){throw new Error(\"setTimeout has not been defined\")}function a(){throw new Error(\"clearTimeout has not been defined\")}!function(){try{n=\"function\"==typeof setTimeout?setTimeout:s}catch(e){n=s}try{i=\"function\"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();function f(e){if(n===setTimeout)return setTimeout(e,0);if((n===s||!n)&&setTimeout){n=setTimeout;return setTimeout(e,0)}try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}var u,l=[],h=!1,c=-1;function d(){if(h&&u){h=!1;u.length?l=u.concat(l):c=-1;l.length&&p()}}function p(){if(!h){var e=f(d);h=!0;for(var t=l.length;t;){u=l;l=[];for(;++c<t;)u&&u[c].run();c=-1;t=l.length}u=null;h=!1;!function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout){i=clearTimeout;return clearTimeout(e)}try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new g(e,t));1!==l.length||h||f(p)};function g(e,t){this.fun=e;this.array=t}g.prototype.run=function(){this.fun.apply(null,this.array)};o.title=\"browser\";o.browser=!0;o.env={};o.argv=[];o.version=\"\";o.versions={};function y(){}o.on=y;o.addListener=y;o.once=y;o.off=y;o.removeListener=y;o.removeAllListeners=y;o.emit=y;o.prependListener=y;o.prependOnceListener=y;o.listeners=function(e){return[]};o.binding=function(e){throw new Error(\"process.binding is not supported\")};o.cwd=function(){return\"/\"};o.chdir=function(e){throw new Error(\"process.chdir is not supported\")};o.umask=function(){return 0}},{}],18:[function(e,t,r){t.exports=e(\"./lib/_stream_duplex.js\")},{\"./lib/_stream_duplex.js\":19}],19:[function(e,t,r){\"use strict\";var n=e(\"process-nextick-args\"),i=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};t.exports=h;var o=Object.create(e(\"core-util-is\"));o.inherits=e(\"inherits\");var s=e(\"./_stream_readable\"),a=e(\"./_stream_writable\");o.inherits(h,s);for(var f=i(a.prototype),u=0;u<f.length;u++){var l=f[u];h.prototype[l]||(h.prototype[l]=a.prototype[l])}function h(e){if(!(this instanceof h))return new h(e);s.call(this,e);a.call(this,e);e&&!1===e.readable&&(this.readable=!1);e&&!1===e.writable&&(this.writable=!1);this.allowHalfOpen=!0;e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1);this.once(\"end\",c)}Object.defineProperty(h.prototype,\"writableHighWaterMark\",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function c(){this.allowHalfOpen||this._writableState.ended||n.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(h.prototype,\"destroyed\",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){if(void 0!==this._readableState&&void 0!==this._writableState){this._readableState.destroyed=e;this._writableState.destroyed=e}}});h.prototype._destroy=function(e,t){this.push(null);this.end();n.nextTick(t,e)}},{\"./_stream_readable\":21,\"./_stream_writable\":23,\"core-util-is\":4,inherits:7,\"process-nextick-args\":16}],20:[function(e,t,r){\"use strict\";t.exports=o;var n=e(\"./_stream_transform\"),i=Object.create(e(\"core-util-is\"));i.inherits=e(\"inherits\");i.inherits(o,n);function o(e){if(!(this instanceof o))return new o(e);n.call(this,e)}o.prototype._transform=function(e,t,r){r(null,e)}},{\"./_stream_transform\":22,\"core-util-is\":4,inherits:7}],21:[function(e,t,r){(function(r,n){\"use strict\";var i=e(\"process-nextick-args\");t.exports=m;var o,s=e(\"isarray\");m.ReadableState=w;e(\"events\").EventEmitter;var a=function(e,t){return e.listeners(t).length},f=e(\"./internal/streams/stream\"),u=e(\"safe-buffer\").Buffer,l=n.Uint8Array||function(){};var h=Object.create(e(\"core-util-is\"));h.inherits=e(\"inherits\");var c=e(\"util\"),d=void 0;d=c&&c.debuglog?c.debuglog(\"stream\"):function(){};var p,g=e(\"./internal/streams/BufferList\"),y=e(\"./internal/streams/destroy\");h.inherits(m,f);var b=[\"error\",\"close\",\"destroy\",\"pause\",\"resume\"];function w(t,r){t=t||{};var n=r instanceof(o=o||e(\"./_stream_duplex\"));this.objectMode=!!t.objectMode;n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,s=t.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(s||0===s)?s:a;this.highWaterMark=Math.floor(this.highWaterMark);this.buffer=new g;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=!1;this.endEmitted=!1;this.reading=!1;this.sync=!0;this.needReadable=!1;this.emittedReadable=!1;this.readableListening=!1;this.resumeScheduled=!1;this.destroyed=!1;this.defaultEncoding=t.defaultEncoding||\"utf8\";this.awaitDrain=0;this.readingMore=!1;this.decoder=null;this.encoding=null;if(t.encoding){p||(p=e(\"string_decoder/\").StringDecoder);this.decoder=new p(t.encoding);this.encoding=t.encoding}}function m(t){o=o||e(\"./_stream_duplex\");if(!(this instanceof m))return new m(t);this._readableState=new w(t,this);this.readable=!0;if(t){\"function\"==typeof t.read&&(this._read=t.read);\"function\"==typeof t.destroy&&(this._destroy=t.destroy)}f.call(this)}Object.defineProperty(m.prototype,\"destroyed\",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});m.prototype.destroy=y.destroy;m.prototype._undestroy=y.undestroy;m.prototype._destroy=function(e,t){this.push(null);t(e)};m.prototype.push=function(e,t){var r,n=this._readableState;if(n.objectMode)r=!0;else if(\"string\"==typeof e){if((t=t||n.defaultEncoding)!==n.encoding){e=u.from(e,t);t=\"\"}r=!0}return v(this,e,t,!1,r)};m.prototype.unshift=function(e){return v(this,e,null,!0,!1)};function v(e,t,r,n,i){var o=e._readableState;if(null===t){o.reading=!1;!function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();if(r&&r.length){t.buffer.push(r);t.length+=t.objectMode?1:r.length}}t.ended=!0;E(e)}(e,o)}else{var s;i||(s=function(e,t){var r;(n=t,u.isBuffer(n)||n instanceof l)||\"string\"==typeof t||void 0===t||e.objectMode||(r=new TypeError(\"Invalid non-string/buffer chunk\"));var n;return r}(o,t));if(s)e.emit(\"error\",s);else if(o.objectMode||t&&t.length>0){\"string\"==typeof t||o.objectMode||Object.getPrototypeOf(t)===u.prototype||(t=function(e){return u.from(e)}(t));if(n)o.endEmitted?e.emit(\"error\",new Error(\"stream.unshift() after end event\")):_(e,o,t,!0);else if(o.ended)e.emit(\"error\",new Error(\"stream.push() after EOF\"));else{o.reading=!1;if(o.decoder&&!r){t=o.decoder.write(t);o.objectMode||0!==t.length?_(e,o,t,!1):T(e,o)}else _(e,o,t,!1)}}else n||(o.reading=!1)}return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(o)}function _(e,t,r,n){if(t.flowing&&0===t.length&&!t.sync){e.emit(\"data\",r);e.read(0)}else{t.length+=t.objectMode?1:r.length;n?t.buffer.unshift(r):t.buffer.push(r);t.needReadable&&E(e)}T(e,t)}m.prototype.isPaused=function(){return!1===this._readableState.flowing};m.prototype.setEncoding=function(t){p||(p=e(\"string_decoder/\").StringDecoder);this._readableState.decoder=new p(t);this._readableState.encoding=t;return this};var S=8388608;function x(e,t){if(e<=0||0===t.length&&t.ended)return 0;if(t.objectMode)return 1;if(e!=e)return t.flowing&&t.length?t.buffer.head.data.length:t.length;e>t.highWaterMark&&(t.highWaterMark=function(e){if(e>=S)e=S;else{e--;e|=e>>>1;e|=e>>>2;e|=e>>>4;e|=e>>>8;e|=e>>>16;e++}return e}(e));if(e<=t.length)return e;if(!t.ended){t.needReadable=!0;return 0}return t.length}m.prototype.read=function(e){d(\"read\",e);e=parseInt(e,10);var t=this._readableState,r=e;0!==e&&(t.emittedReadable=!1);if(0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended)){d(\"read: emitReadable\",t.length,t.ended);0===t.length&&t.ended?C(this):E(this);return null}if(0===(e=x(e,t))&&t.ended){0===t.length&&C(this);return null}var n,i=t.needReadable;d(\"need readable\",i);(0===t.length||t.length-e<t.highWaterMark)&&d(\"length less than watermark\",i=!0);if(t.ended||t.reading)d(\"reading or ended\",i=!1);else if(i){d(\"do read\");t.reading=!0;t.sync=!0;0===t.length&&(t.needReadable=!0);this._read(t.highWaterMark);t.sync=!1;t.reading||(e=x(r,t))}if(null===(n=e>0?M(e,t):null)){t.needReadable=!0;e=0}else t.length-=e;if(0===t.length){t.ended||(t.needReadable=!0);r!==e&&t.ended&&C(this)}null!==n&&this.emit(\"data\",n);return n};function E(e){var t=e._readableState;t.needReadable=!1;if(!t.emittedReadable){d(\"emitReadable\",t.flowing);t.emittedReadable=!0;t.sync?i.nextTick(k,e):k(e)}}function k(e){d(\"emit readable\");e.emit(\"readable\");A(e)}function T(e,t){if(!t.readingMore){t.readingMore=!0;i.nextTick(L,e,t)}}function L(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark;){d(\"maybeReadMore read 0\");e.read(0);if(r===t.length)break;r=t.length}t.readingMore=!1}m.prototype._read=function(e){this.emit(\"error\",new Error(\"_read() is not implemented\"))};m.prototype.pipe=function(e,t){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1;d(\"pipe count=%d opts=%j\",o.pipesCount,t);var f=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?l:m;o.endEmitted?i.nextTick(f):n.once(\"end\",f);e.on(\"unpipe\",u);function u(t,r){d(\"onunpipe\");if(t===n&&r&&!1===r.hasUnpiped){r.hasUnpiped=!0;!function(){d(\"cleanup\");e.removeListener(\"close\",b);e.removeListener(\"finish\",w);e.removeListener(\"drain\",h);e.removeListener(\"error\",y);e.removeListener(\"unpipe\",u);n.removeListener(\"end\",l);n.removeListener(\"end\",m);n.removeListener(\"data\",g);c=!0;!o.awaitDrain||e._writableState&&!e._writableState.needDrain||h()}()}}function l(){d(\"onend\");e.end()}var h=function(e){return function(){var t=e._readableState;d(\"pipeOnDrain\",t.awaitDrain);t.awaitDrain&&t.awaitDrain--;if(0===t.awaitDrain&&a(e,\"data\")){t.flowing=!0;A(e)}}}(n);e.on(\"drain\",h);var c=!1;var p=!1;n.on(\"data\",g);function g(t){d(\"ondata\");p=!1;if(!1===e.write(t)&&!p){if((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==U(o.pipes,e))&&!c){d(\"false write response, pause\",n._readableState.awaitDrain);n._readableState.awaitDrain++;p=!0}n.pause()}}function y(t){d(\"onerror\",t);m();e.removeListener(\"error\",y);0===a(e,\"error\")&&e.emit(\"error\",t)}!function(e,t,r){if(\"function\"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?s(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,\"error\",y);function b(){e.removeListener(\"finish\",w);m()}e.once(\"close\",b);function w(){d(\"onfinish\");e.removeListener(\"close\",b);m()}e.once(\"finish\",w);function m(){d(\"unpipe\");n.unpipe(e)}e.emit(\"pipe\",n);if(!o.flowing){d(\"pipe resume\");n.resume()}return e};m.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount){if(e&&e!==t.pipes)return this;e||(e=t.pipes);t.pipes=null;t.pipesCount=0;t.flowing=!1;e&&e.emit(\"unpipe\",this,r);return this}if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null;t.pipesCount=0;t.flowing=!1;for(var o=0;o<i;o++)n[o].emit(\"unpipe\",this,r);return this}var s=U(t.pipes,e);if(-1===s)return this;t.pipes.splice(s,1);t.pipesCount-=1;1===t.pipesCount&&(t.pipes=t.pipes[0]);e.emit(\"unpipe\",this,r);return this};m.prototype.on=function(e,t){var r=f.prototype.on.call(this,e,t);if(\"data\"===e)!1!==this._readableState.flowing&&this.resume();else if(\"readable\"===e){var n=this._readableState;if(!n.endEmitted&&!n.readableListening){n.readableListening=n.needReadable=!0;n.emittedReadable=!1;n.reading?n.length&&E(this):i.nextTick(B,this)}}return r};m.prototype.addListener=m.prototype.on;function B(e){d(\"readable nexttick read 0\");e.read(0)}m.prototype.resume=function(){var e=this._readableState;if(!e.flowing){d(\"resume\");e.flowing=!0;!function(e,t){if(!t.resumeScheduled){t.resumeScheduled=!0;i.nextTick(j,e,t)}}(this,e)}return this};function j(e,t){if(!t.reading){d(\"resume read 0\");e.read(0)}t.resumeScheduled=!1;t.awaitDrain=0;e.emit(\"resume\");A(e);t.flowing&&!t.reading&&e.read(0)}m.prototype.pause=function(){d(\"call pause flowing=%j\",this._readableState.flowing);if(!1!==this._readableState.flowing){d(\"pause\");this._readableState.flowing=!1;this.emit(\"pause\")}return this};function A(e){var t=e._readableState;d(\"flow\",t.flowing);for(;t.flowing&&null!==e.read(););}m.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;e.on(\"end\",(function(){d(\"wrapped end\");if(r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}));e.on(\"data\",(function(i){d(\"wrapped data\");r.decoder&&(i=r.decoder.write(i));if((!r.objectMode||null!=i)&&(r.objectMode||i&&i.length)){if(!t.push(i)){n=!0;e.pause()}}}));for(var i in e)void 0===this[i]&&\"function\"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<b.length;o++)e.on(b[o],this.emit.bind(this,b[o]));this._read=function(t){d(\"wrapped _read\",t);if(n){n=!1;e.resume()}};return this};Object.defineProperty(m.prototype,\"readableHighWaterMark\",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});m._fromList=M;function M(e,t){if(0===t.length)return null;var r;if(t.objectMode)r=t.buffer.shift();else if(!e||e>=t.length){r=t.decoder?t.buffer.join(\"\"):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length);t.buffer.clear()}else r=function(e,t,r){var n;if(e<t.head.data.length){n=t.head.data.slice(0,e);t.head.data=t.head.data.slice(e)}else n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,i=r.data;e-=i.length;for(;r=r.next;){var o=r.data,s=e>o.length?o.length:e;s===o.length?i+=o:i+=o.slice(0,e);if(0===(e-=s)){if(s===o.length){++n;r.next?t.head=r.next:t.head=t.tail=null}else{t.head=r;r.data=o.slice(s)}break}++n}t.length-=n;return i}(e,t):function(e,t){var r=u.allocUnsafe(e),n=t.head,i=1;n.data.copy(r);e-=n.data.length;for(;n=n.next;){var o=n.data,s=e>o.length?o.length:e;o.copy(r,r.length-e,0,s);if(0===(e-=s)){if(s===o.length){++i;n.next?t.head=n.next:t.head=t.tail=null}else{t.head=n;n.data=o.slice(s)}break}++i}t.length-=i;return r}(e,t);return n}(e,t.buffer,t.decoder);return r}function C(e){var t=e._readableState;if(t.length>0)throw new Error('\"endReadable()\" called on non-empty stream');if(!t.endEmitted){t.ended=!0;i.nextTick(R,t,e)}}function R(e,t){if(!e.endEmitted&&0===e.length){e.endEmitted=!0;t.readable=!1;t.emit(\"end\")}}function U(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}}).call(this,e(\"_process\"),\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{})},{\"./_stream_duplex\":19,\"./internal/streams/BufferList\":24,\"./internal/streams/destroy\":25,\"./internal/streams/stream\":26,_process:17,\"core-util-is\":4,events:5,inherits:7,isarray:9,\"process-nextick-args\":16,\"safe-buffer\":27,\"string_decoder/\":28,util:2}],22:[function(e,t,r){\"use strict\";t.exports=s;var n=e(\"./_stream_duplex\"),i=Object.create(e(\"core-util-is\"));i.inherits=e(\"inherits\");i.inherits(s,n);function o(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit(\"error\",new Error(\"write callback called multiple times\"));r.writechunk=null;r.writecb=null;null!=t&&this.push(t);n(e);var i=this._readableState;i.reading=!1;(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function s(e){if(!(this instanceof s))return new s(e);n.call(this,e);this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;if(e){\"function\"==typeof e.transform&&(this._transform=e.transform);\"function\"==typeof e.flush&&(this._flush=e.flush)}this.on(\"prefinish\",a)}function a(){var e=this;\"function\"==typeof this._flush?this._flush((function(t,r){f(e,t,r)})):f(this,null,null)}s.prototype.push=function(e,t){this._transformState.needTransform=!1;return n.prototype.push.call(this,e,t)};s.prototype._transform=function(e,t,r){throw new Error(\"_transform() is not implemented\")};s.prototype._write=function(e,t,r){var n=this._transformState;n.writecb=r;n.writechunk=e;n.writeencoding=t;if(!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};s.prototype._read=function(e){var t=this._transformState;if(null!==t.writechunk&&t.writecb&&!t.transforming){t.transforming=!0;this._transform(t.writechunk,t.writeencoding,t.afterTransform)}else t.needTransform=!0};s.prototype._destroy=function(e,t){var r=this;n.prototype._destroy.call(this,e,(function(e){t(e);r.emit(\"close\")}))};function f(e,t,r){if(t)return e.emit(\"error\",t);null!=r&&e.push(r);if(e._writableState.length)throw new Error(\"Calling transform done when ws.length != 0\");if(e._transformState.transforming)throw new Error(\"Calling transform done when still transforming\");return e.push(null)}},{\"./_stream_duplex\":19,\"core-util-is\":4,inherits:7}],23:[function(e,t,r){(function(r,n,i){\"use strict\";var o=e(\"process-nextick-args\");t.exports=w;function s(e){var t=this;this.next=null;this.entry=null;this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--;i(r);n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}var a,f=!r.browser&&[\"v0.10\",\"v0.9.\"].indexOf(r.version.slice(0,5))>-1?i:o.nextTick;w.WritableState=b;var u=Object.create(e(\"core-util-is\"));u.inherits=e(\"inherits\");var l={deprecate:e(\"util-deprecate\")},h=e(\"./internal/streams/stream\"),c=e(\"safe-buffer\").Buffer,d=n.Uint8Array||function(){};var p,g=e(\"./internal/streams/destroy\");u.inherits(w,h);function y(){}function b(t,r){a=a||e(\"./_stream_duplex\");t=t||{};var n=r instanceof a;this.objectMode=!!t.objectMode;n&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,u=t.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(u||0===u)?u:l;this.highWaterMark=Math.floor(this.highWaterMark);this.finalCalled=!1;this.needDrain=!1;this.ending=!1;this.ended=!1;this.finished=!1;this.destroyed=!1;var h=!1===t.decodeStrings;this.decodeStrings=!h;this.defaultEncoding=t.defaultEncoding||\"utf8\";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;!function(e){e.writing=!1;e.writecb=null;e.length-=e.writelen;e.writelen=0}(r);if(t)!function(e,t,r,n,i){--t.pendingcb;if(r){o.nextTick(i,n);o.nextTick(E,e,t);e._writableState.errorEmitted=!0;e.emit(\"error\",n)}else{i(n);e._writableState.errorEmitted=!0;e.emit(\"error\",n);E(e,t)}}(e,r,n,t,i);else{var s=S(r);s||r.corked||r.bufferProcessing||!r.bufferedRequest||_(e,r);n?f(v,e,r,s,i):v(e,r,s,i)}}(r,e)};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=!1;this.errorEmitted=!1;this.bufferedRequestCount=0;this.corkedRequestsFree=new s(this)}b.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;){t.push(e);e=e.next}return t};!function(){try{Object.defineProperty(b.prototype,\"buffer\",{get:l.deprecate((function(){return this.getBuffer()}),\"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.\",\"DEP0003\")})}catch(e){}}();if(\"function\"==typeof Symbol&&Symbol.hasInstance&&\"function\"==typeof Function.prototype[Symbol.hasInstance]){p=Function.prototype[Symbol.hasInstance];Object.defineProperty(w,Symbol.hasInstance,{value:function(e){return!!p.call(this,e)||this===w&&(e&&e._writableState instanceof b)}})}else p=function(e){return e instanceof this};function w(t){a=a||e(\"./_stream_duplex\");if(!(p.call(w,this)||this instanceof a))return new w(t);this._writableState=new b(t,this);this.writable=!0;if(t){\"function\"==typeof t.write&&(this._write=t.write);\"function\"==typeof t.writev&&(this._writev=t.writev);\"function\"==typeof t.destroy&&(this._destroy=t.destroy);\"function\"==typeof t.final&&(this._final=t.final)}h.call(this)}w.prototype.pipe=function(){this.emit(\"error\",new Error(\"Cannot pipe, not readable\"))};w.prototype.write=function(e,t,r){var n,i=this._writableState,s=!1,a=!i.objectMode&&(n=e,c.isBuffer(n)||n instanceof d);a&&!c.isBuffer(e)&&(e=function(e){return c.from(e)}(e));if(\"function\"==typeof t){r=t;t=null}a?t=\"buffer\":t||(t=i.defaultEncoding);\"function\"!=typeof r&&(r=y);if(i.ended)!function(e,t){var r=new Error(\"write after end\");e.emit(\"error\",r);o.nextTick(t,r)}(this,r);else if(a||function(e,t,r,n){var i=!0,s=!1;null===r?s=new TypeError(\"May not write null values to stream\"):\"string\"==typeof r||void 0===r||t.objectMode||(s=new TypeError(\"Invalid non-string/buffer chunk\"));if(s){e.emit(\"error\",s);o.nextTick(n,s);i=!1}return i}(this,i,e,r)){i.pendingcb++;s=function(e,t,r,n,i,o){if(!r){var s=function(e,t,r){e.objectMode||!1===e.decodeStrings||\"string\"!=typeof t||(t=c.from(t,r));return t}(t,n,i);if(n!==s){r=!0;i=\"buffer\";n=s}}var a=t.objectMode?1:n.length;t.length+=a;var f=t.length<t.highWaterMark;f||(t.needDrain=!0);if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null};u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest;t.bufferedRequestCount+=1}else m(e,t,!1,a,n,i,o);return f}(this,i,a,e,t,r)}return s};w.prototype.cork=function(){this._writableState.corked++};w.prototype.uncork=function(){var e=this._writableState;if(e.corked){e.corked--;e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||_(this,e)}};w.prototype.setDefaultEncoding=function(e){\"string\"==typeof e&&(e=e.toLowerCase());if(!([\"hex\",\"utf8\",\"utf-8\",\"ascii\",\"binary\",\"base64\",\"ucs2\",\"ucs-2\",\"utf16le\",\"utf-16le\",\"raw\"].indexOf((e+\"\").toLowerCase())>-1))throw new TypeError(\"Unknown encoding: \"+e);this._writableState.defaultEncoding=e;return this};Object.defineProperty(w.prototype,\"writableHighWaterMark\",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function m(e,t,r,n,i,o,s){t.writelen=n;t.writecb=s;t.writing=!0;t.sync=!0;r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite);t.sync=!1}function v(e,t,r,n){r||function(e,t){if(0===t.length&&t.needDrain){t.needDrain=!1;e.emit(\"drain\")}}(e,t);t.pendingcb--;n();E(e,t)}function _(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var a=0,f=!0;r;){i[a]=r;r.isBuf||(f=!1);r=r.next;a+=1}i.allBuffers=f;m(e,t,!0,t.length,i,\"\",o.finish);t.pendingcb++;t.lastBufferedRequest=null;if(o.next){t.corkedRequestsFree=o.next;o.next=null}else t.corkedRequestsFree=new s(t);t.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,l=r.encoding,h=r.callback;m(e,t,!1,t.objectMode?1:u.length,u,l,h);r=r.next;t.bufferedRequestCount--;if(t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r;t.bufferProcessing=!1}w.prototype._write=function(e,t,r){r(new Error(\"_write() is not implemented\"))};w.prototype._writev=null;w.prototype.end=function(e,t,r){var n=this._writableState;if(\"function\"==typeof e){r=e;e=null;t=null}else if(\"function\"==typeof t){r=t;t=null}null!=e&&this.write(e,t);if(n.corked){n.corked=1;this.uncork()}n.ending||n.finished||function(e,t,r){t.ending=!0;E(e,t);r&&(t.finished?o.nextTick(r):e.once(\"finish\",r));t.ended=!0;e.writable=!1}(this,n,r)};function S(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function x(e,t){e._final((function(r){t.pendingcb--;r&&e.emit(\"error\",r);t.prefinished=!0;e.emit(\"prefinish\");E(e,t)}))}function E(e,t){var r=S(t);if(r){!function(e,t){if(!t.prefinished&&!t.finalCalled)if(\"function\"==typeof e._final){t.pendingcb++;t.finalCalled=!0;o.nextTick(x,e,t)}else{t.prefinished=!0;e.emit(\"prefinish\")}}(e,t);if(0===t.pendingcb){t.finished=!0;e.emit(\"finish\")}}return r}Object.defineProperty(w.prototype,\"destroyed\",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});w.prototype.destroy=g.destroy;w.prototype._undestroy=g.undestroy;w.prototype._destroy=function(e,t){this.end();t(e)}}).call(this,e(\"_process\"),\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{},e(\"timers\").setImmediate)},{\"./_stream_duplex\":19,\"./internal/streams/destroy\":25,\"./internal/streams/stream\":26,_process:17,\"core-util-is\":4,inherits:7,\"process-nextick-args\":16,\"safe-buffer\":27,timers:34,\"util-deprecate\":35}],24:[function(e,t,r){\"use strict\";var n=e(\"safe-buffer\").Buffer,i=e(\"util\");t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e);this.head=null;this.tail=null;this.length=0}e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t;this.tail=t;++this.length};e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t);this.head=t;++this.length};e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;1===this.length?this.head=this.tail=null:this.head=this.head.next;--this.length;return e}};e.prototype.clear=function(){this.head=this.tail=null;this.length=0};e.prototype.join=function(e){if(0===this.length)return\"\";for(var t=this.head,r=\"\"+t.data;t=t.next;)r+=e+t.data;return r};e.prototype.concat=function(e){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var t,r,i,o=n.allocUnsafe(e>>>0),s=this.head,a=0;s;){t=s.data,r=o,i=a,t.copy(r,i);a+=s.data.length;s=s.next}return o};return e}();i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+\" \"+e})},{\"safe-buffer\":27,util:2}],25:[function(e,t,r){\"use strict\";var n=e(\"process-nextick-args\");function i(e,t){e.emit(\"error\",t)}t.exports={destroy:function(e,t){var r=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;if(o||s){t?t(e):!e||this._writableState&&this._writableState.errorEmitted||n.nextTick(i,this,e);return this}this._readableState&&(this._readableState.destroyed=!0);this._writableState&&(this._writableState.destroyed=!0);this._destroy(e||null,(function(e){if(!t&&e){n.nextTick(i,r,e);r._writableState&&(r._writableState.errorEmitted=!0)}else t&&t(e)}));return this},undestroy:function(){if(this._readableState){this._readableState.destroyed=!1;this._readableState.reading=!1;this._readableState.ended=!1;this._readableState.endEmitted=!1}if(this._writableState){this._writableState.destroyed=!1;this._writableState.ended=!1;this._writableState.ending=!1;this._writableState.finished=!1;this._writableState.errorEmitted=!1}}}},{\"process-nextick-args\":16}],26:[function(e,t,r){t.exports=e(\"events\").EventEmitter},{events:5}],27:[function(e,t,r){var n=e(\"buffer\"),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}if(i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow)t.exports=n;else{o(n,r);r.Buffer=s}function s(e,t,r){return i(e,t,r)}o(i,s);s.from=function(e,t,r){if(\"number\"==typeof e)throw new TypeError(\"Argument must not be a number\");return i(e,t,r)};s.alloc=function(e,t,r){if(\"number\"!=typeof e)throw new TypeError(\"Argument must be a number\");var n=i(e);void 0!==t?\"string\"==typeof r?n.fill(t,r):n.fill(t):n.fill(0);return n};s.allocUnsafe=function(e){if(\"number\"!=typeof e)throw new TypeError(\"Argument must be a number\");return i(e)};s.allocUnsafeSlow=function(e){if(\"number\"!=typeof e)throw new TypeError(\"Argument must be a number\");return n.SlowBuffer(e)}},{buffer:3}],28:[function(e,t,r){\"use strict\";var n=e(\"safe-buffer\").Buffer,i=n.isEncoding||function(e){switch((e=\"\"+e)&&e.toLowerCase()){case\"hex\":case\"utf8\":case\"utf-8\":case\"ascii\":case\"binary\":case\"base64\":case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":case\"raw\":return!0;default:return!1}};r.StringDecoder=o;function o(e){this.encoding=function(e){var t=function(e){if(!e)return\"utf8\";for(var t;;)switch(e){case\"utf8\":case\"utf-8\":return\"utf8\";case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return\"utf16le\";case\"latin1\":case\"binary\":return\"latin1\";case\"base64\":case\"ascii\":case\"hex\":return e;default:if(t)return;e=(\"\"+e).toLowerCase();t=!0}}(e);if(\"string\"!=typeof t&&(n.isEncoding===i||!i(e)))throw new Error(\"Unknown encoding: \"+e);return t||e}(e);var t;switch(this.encoding){case\"utf16le\":this.text=f;this.end=u;t=4;break;case\"utf8\":this.fillLast=a;t=4;break;case\"base64\":this.text=l;this.end=h;t=3;break;default:this.write=c;this.end=d;return}this.lastNeed=0;this.lastTotal=0;this.lastChar=n.allocUnsafe(t)}o.prototype.write=function(e){if(0===e.length)return\"\";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return\"\";r=this.lastNeed;this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||\"\"};o.prototype.end=function(e){var t=e&&e.length?this.write(e):\"\";return this.lastNeed?t+\"\":t};o.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=s(t[n]);if(i>=0){i>0&&(e.lastNeed=i-1);return i}if(--n<r||-2===i)return 0;if((i=s(t[n]))>=0){i>0&&(e.lastNeed=i-2);return i}if(--n<r||-2===i)return 0;if((i=s(t[n]))>=0){i>0&&(2===i?i=0:e.lastNeed=i-3);return i}return 0}(this,e,t);if(!this.lastNeed)return e.toString(\"utf8\",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);e.copy(this.lastChar,0,n);return e.toString(\"utf8\",t,n)};o.prototype.fillLast=function(e){if(this.lastNeed<=e.length){e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal)}e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length);this.lastNeed-=e.length};function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0])){e.lastNeed=0;return\"\"}if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1])){e.lastNeed=1;return\"\"}if(e.lastNeed>2&&t.length>2&&128!=(192&t[2])){e.lastNeed=2;return\"\"}}}(this,e);if(void 0!==r)return r;if(this.lastNeed<=e.length){e.copy(this.lastChar,t,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal)}e.copy(this.lastChar,t,0,e.length);this.lastNeed-=e.length}function f(e,t){if((e.length-t)%2==0){var r=e.toString(\"utf16le\",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319){this.lastNeed=2;this.lastTotal=4;this.lastChar[0]=e[e.length-2];this.lastChar[1]=e[e.length-1];return r.slice(0,-1)}}return r}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=e[e.length-1];return e.toString(\"utf16le\",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):\"\";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString(\"utf16le\",0,r)}return t}function l(e,t){var r=(e.length-t)%3;if(0===r)return e.toString(\"base64\",t);this.lastNeed=3-r;this.lastTotal=3;if(1===r)this.lastChar[0]=e[e.length-1];else{this.lastChar[0]=e[e.length-2];this.lastChar[1]=e[e.length-1]}return e.toString(\"base64\",t,e.length-r)}function h(e){var t=e&&e.length?this.write(e):\"\";return this.lastNeed?t+this.lastChar.toString(\"base64\",0,3-this.lastNeed):t}function c(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):\"\"}},{\"safe-buffer\":27}],29:[function(e,t,r){t.exports=e(\"./readable\").PassThrough},{\"./readable\":30}],30:[function(e,t,r){(r=t.exports=e(\"./lib/_stream_readable.js\")).Stream=r;r.Readable=r;r.Writable=e(\"./lib/_stream_writable.js\");r.Duplex=e(\"./lib/_stream_duplex.js\");r.Transform=e(\"./lib/_stream_transform.js\");r.PassThrough=e(\"./lib/_stream_passthrough.js\")},{\"./lib/_stream_duplex.js\":19,\"./lib/_stream_passthrough.js\":20,\"./lib/_stream_readable.js\":21,\"./lib/_stream_transform.js\":22,\"./lib/_stream_writable.js\":23}],31:[function(e,t,r){t.exports=e(\"./readable\").Transform},{\"./readable\":30}],32:[function(e,t,r){t.exports=e(\"./lib/_stream_writable.js\")},{\"./lib/_stream_writable.js\":23}],33:[function(e,t,r){t.exports=i;var n=e(\"events\").EventEmitter;e(\"inherits\")(i,n);i.Readable=e(\"readable-stream/readable.js\");i.Writable=e(\"readable-stream/writable.js\");i.Duplex=e(\"readable-stream/duplex.js\");i.Transform=e(\"readable-stream/transform.js\");i.PassThrough=e(\"readable-stream/passthrough.js\");i.Stream=i;function i(){n.call(this)}i.prototype.pipe=function(e,t){var r=this;function i(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}r.on(\"data\",i);function o(){r.readable&&r.resume&&r.resume()}e.on(\"drain\",o);if(!(e._isStdio||t&&!1===t.end)){r.on(\"end\",a);r.on(\"close\",f)}var s=!1;function a(){if(!s){s=!0;e.end()}}function f(){if(!s){s=!0;\"function\"==typeof e.destroy&&e.destroy()}}function u(e){l();if(0===n.listenerCount(this,\"error\"))throw e}r.on(\"error\",u);e.on(\"error\",u);function l(){r.removeListener(\"data\",i);e.removeListener(\"drain\",o);r.removeListener(\"end\",a);r.removeListener(\"close\",f);r.removeListener(\"error\",u);e.removeListener(\"error\",u);r.removeListener(\"end\",l);r.removeListener(\"close\",l);e.removeListener(\"close\",l)}r.on(\"end\",l);r.on(\"close\",l);e.on(\"close\",l);e.emit(\"pipe\",r);return e}},{events:5,inherits:7,\"readable-stream/duplex.js\":18,\"readable-stream/passthrough.js\":29,\"readable-stream/readable.js\":30,\"readable-stream/transform.js\":31,\"readable-stream/writable.js\":32}],34:[function(e,t,r){(function(t,n){var i=e(\"process/browser.js\").nextTick,o=Function.prototype.apply,s=Array.prototype.slice,a={},f=0;r.setTimeout=function(){return new u(o.call(setTimeout,window,arguments),clearTimeout)};r.setInterval=function(){return new u(o.call(setInterval,window,arguments),clearInterval)};r.clearTimeout=r.clearInterval=function(e){e.close()};function u(e,t){this._id=e;this._clearFn=t}u.prototype.unref=u.prototype.ref=function(){};u.prototype.close=function(){this._clearFn.call(window,this._id)};r.enroll=function(e,t){clearTimeout(e._idleTimeoutId);e._idleTimeout=t};r.unenroll=function(e){clearTimeout(e._idleTimeoutId);e._idleTimeout=-1};r._unrefActive=r.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))};r.setImmediate=\"function\"==typeof t?t:function(e){var t=f++,n=!(arguments.length<2)&&s.call(arguments,1);a[t]=!0;i((function(){if(a[t]){n?e.apply(null,n):e.call(null);r.clearImmediate(t)}}));return t};r.clearImmediate=\"function\"==typeof n?n:function(e){delete a[e]}}).call(this,e(\"timers\").setImmediate,e(\"timers\").clearImmediate)},{\"process/browser.js\":17,timers:34}],35:[function(e,t,r){(function(e){t.exports=function(e,t){if(r(\"noDeprecation\"))return e;var n=!1;return function(){if(!n){if(r(\"throwDeprecation\"))throw new Error(t);r(\"traceDeprecation\")?console.trace(t):console.warn(t);n=!0}return e.apply(this,arguments)}};function r(t){try{if(!e.localStorage)return!1}catch(e){return!1}var r=e.localStorage[t];return null!=r&&\"true\"===String(r).toLowerCase()}}).call(this,\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{})},{}]},{},[10])(10)}));/*! loglevel - v1.7.0 - https://github.com/pimterry/loglevel - (c) 2020 Tim Perry - licensed MIT */\n!function(a,b){\"use strict\";\"function\"==typeof define&&define.amd?define(b):\"object\"==typeof module&&module.exports?module.exports=b():a.log=b()}(this,function(){\"use strict\";function a(a,b){var c=a[b];if(\"function\"==typeof c.bind)return c.bind(a);try{return Function.prototype.bind.call(c,a)}catch(b){return function(){return Function.prototype.apply.apply(c,[a,arguments])}}}function b(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(c){return\"debug\"===c&&(c=\"log\"),typeof console!==i&&(\"trace\"===c&&j?b:void 0!==console[c]?a(console,c):void 0!==console.log?a(console,\"log\"):h)}function d(a,b){for(var c=0;c<k.length;c++){var d=k[c];this[d]=c<a?h:this.methodFactory(d,a,b)}this.log=this.debug}function e(a,b,c){return function(){typeof console!==i&&(d.call(this,b,c),this[a].apply(this,arguments))}}function f(a,b,d){return c(a)||e.apply(this,arguments)}function g(a,b,c){function e(a){var b=(k[a]||\"silent\").toUpperCase();if(typeof window!==i&&l){try{return void(window.localStorage[l]=b)}catch(a){}try{window.document.cookie=encodeURIComponent(l)+\"=\"+b+\";\"}catch(a){}}}function g(){var a;if(typeof window!==i&&l){try{a=window.localStorage[l]}catch(a){}if(typeof a===i)try{var b=window.document.cookie,c=b.indexOf(encodeURIComponent(l)+\"=\");-1!==c&&(a=/^([^;]+)/.exec(b.slice(c))[1])}catch(a){}return void 0===j.levels[a]&&(a=void 0),a}}var h,j=this,l=\"loglevel\";\"string\"==typeof a?l+=\":\"+a:\"symbol\"==typeof a&&(l=void 0),j.name=a,j.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},j.methodFactory=c||f,j.getLevel=function(){return h},j.setLevel=function(b,c){if(\"string\"==typeof b&&void 0!==j.levels[b.toUpperCase()]&&(b=j.levels[b.toUpperCase()]),!(\"number\"==typeof b&&b>=0&&b<=j.levels.SILENT))throw\"log.setLevel() called with invalid level: \"+b;if(h=b,!1!==c&&e(b),d.call(j,b,a),typeof console===i&&b<j.levels.SILENT)return\"No console available for logging\"},j.setDefaultLevel=function(a){g()||j.setLevel(a,!1)},j.enableAll=function(a){j.setLevel(j.levels.TRACE,a)},j.disableAll=function(a){j.setLevel(j.levels.SILENT,a)};var m=g();null==m&&(m=null==b?\"WARN\":b),j.setLevel(m,!1)}var h=function(){},i=\"undefined\",j=typeof window!==i&&typeof window.navigator!==i&&/Trident\\/|MSIE /.test(window.navigator.userAgent),k=[\"trace\",\"debug\",\"info\",\"warn\",\"error\"],l=new g,m={};l.getLogger=function(a){if(\"symbol\"!=typeof a&&\"string\"!=typeof a||\"\"===a)throw new TypeError(\"You must supply a name when creating a logger.\");var b=m[a];return b||(b=m[a]=new g(a,l.getLevel(),l.methodFactory)),b};var n=typeof window!==i?window.log:void 0;return l.noConflict=function(){return typeof window!==i&&window.log===l&&(window.log=n),l},l.getLoggers=function(){return m},l.default=l,l});!function(t){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{(\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this).pako=t()}}(function(){return function r(s,o,l){function h(e,t){if(!o[e]){if(!s[e]){var a=\"function\"==typeof require&&require;if(!t&&a)return a(e,!0);if(d)return d(e,!0);var i=new Error(\"Cannot find module '\"+e+\"'\");throw i.code=\"MODULE_NOT_FOUND\",i}var n=o[e]={exports:{}};s[e][0].call(n.exports,function(t){return h(s[e][1][t]||t)},n,n.exports,r,s,o,l)}return o[e].exports}for(var d=\"function\"==typeof require&&require,t=0;t<l.length;t++)h(l[t]);return h}({1:[function(t,e,a){\"use strict\";var s=t(\"./zlib/deflate\"),o=t(\"./utils/common\"),l=t(\"./utils/strings\"),n=t(\"./zlib/messages\"),r=t(\"./zlib/zstream\"),h=Object.prototype.toString,d=0,f=-1,_=0,u=8;function c(t){if(!(this instanceof c))return new c(t);this.options=o.assign({level:f,method:u,chunkSize:16384,windowBits:15,memLevel:8,strategy:_,to:\"\"},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg=\"\",this.ended=!1,this.chunks=[],this.strm=new r,this.strm.avail_out=0;var a=s.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(a!==d)throw new Error(n[a]);if(e.header&&s.deflateSetHeader(this.strm,e.header),e.dictionary){var i;if(i=\"string\"==typeof e.dictionary?l.string2buf(e.dictionary):\"[object ArrayBuffer]\"===h.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(a=s.deflateSetDictionary(this.strm,i))!==d)throw new Error(n[a]);this._dict_set=!0}}function i(t,e){var a=new c(e);if(a.push(t,!0),a.err)throw a.msg||n[a.err];return a.result}c.prototype.push=function(t,e){var a,i,n=this.strm,r=this.options.chunkSize;if(this.ended)return!1;i=e===~~e?e:!0===e?4:0,\"string\"==typeof t?n.input=l.string2buf(t):\"[object ArrayBuffer]\"===h.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;do{if(0===n.avail_out&&(n.output=new o.Buf8(r),n.next_out=0,n.avail_out=r),1!==(a=s.deflate(n,i))&&a!==d)return this.onEnd(a),!(this.ended=!0);0!==n.avail_out&&(0!==n.avail_in||4!==i&&2!==i)||(\"string\"===this.options.to?this.onData(l.buf2binstring(o.shrinkBuf(n.output,n.next_out))):this.onData(o.shrinkBuf(n.output,n.next_out)))}while((0<n.avail_in||0===n.avail_out)&&1!==a);return 4===i?(a=s.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===d):2!==i||(this.onEnd(d),!(n.avail_out=0))},c.prototype.onData=function(t){this.chunks.push(t)},c.prototype.onEnd=function(t){t===d&&(\"string\"===this.options.to?this.result=this.chunks.join(\"\"):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},a.Deflate=c,a.deflate=i,a.deflateRaw=function(t,e){return(e=e||{}).raw=!0,i(t,e)},a.gzip=function(t,e){return(e=e||{}).gzip=!0,i(t,e)}},{\"./utils/common\":3,\"./utils/strings\":4,\"./zlib/deflate\":8,\"./zlib/messages\":13,\"./zlib/zstream\":15}],2:[function(t,e,a){\"use strict\";var f=t(\"./zlib/inflate\"),_=t(\"./utils/common\"),u=t(\"./utils/strings\"),c=t(\"./zlib/constants\"),i=t(\"./zlib/messages\"),n=t(\"./zlib/zstream\"),r=t(\"./zlib/gzheader\"),b=Object.prototype.toString;function s(t){if(!(this instanceof s))return new s(t);this.options=_.assign({chunkSize:16384,windowBits:0,to:\"\"},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg=\"\",this.ended=!1,this.chunks=[],this.strm=new n,this.strm.avail_out=0;var a=f.inflateInit2(this.strm,e.windowBits);if(a!==c.Z_OK)throw new Error(i[a]);if(this.header=new r,f.inflateGetHeader(this.strm,this.header),e.dictionary&&(\"string\"==typeof e.dictionary?e.dictionary=u.string2buf(e.dictionary):\"[object ArrayBuffer]\"===b.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(a=f.inflateSetDictionary(this.strm,e.dictionary))!==c.Z_OK))throw new Error(i[a])}function o(t,e){var a=new s(e);if(a.push(t,!0),a.err)throw a.msg||i[a.err];return a.result}s.prototype.push=function(t,e){var a,i,n,r,s,o=this.strm,l=this.options.chunkSize,h=this.options.dictionary,d=!1;if(this.ended)return!1;i=e===~~e?e:!0===e?c.Z_FINISH:c.Z_NO_FLUSH,\"string\"==typeof t?o.input=u.binstring2buf(t):\"[object ArrayBuffer]\"===b.call(t)?o.input=new Uint8Array(t):o.input=t,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new _.Buf8(l),o.next_out=0,o.avail_out=l),(a=f.inflate(o,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&h&&(a=f.inflateSetDictionary(this.strm,h)),a===c.Z_BUF_ERROR&&!0===d&&(a=c.Z_OK,d=!1),a!==c.Z_STREAM_END&&a!==c.Z_OK)return this.onEnd(a),!(this.ended=!0);o.next_out&&(0!==o.avail_out&&a!==c.Z_STREAM_END&&(0!==o.avail_in||i!==c.Z_FINISH&&i!==c.Z_SYNC_FLUSH)||(\"string\"===this.options.to?(n=u.utf8border(o.output,o.next_out),r=o.next_out-n,s=u.buf2string(o.output,n),o.next_out=r,o.avail_out=l-r,r&&_.arraySet(o.output,o.output,n,r,0),this.onData(s)):this.onData(_.shrinkBuf(o.output,o.next_out)))),0===o.avail_in&&0===o.avail_out&&(d=!0)}while((0<o.avail_in||0===o.avail_out)&&a!==c.Z_STREAM_END);return a===c.Z_STREAM_END&&(i=c.Z_FINISH),i===c.Z_FINISH?(a=f.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===c.Z_OK):i!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(o.avail_out=0))},s.prototype.onData=function(t){this.chunks.push(t)},s.prototype.onEnd=function(t){t===c.Z_OK&&(\"string\"===this.options.to?this.result=this.chunks.join(\"\"):this.result=_.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},a.Inflate=s,a.inflate=o,a.inflateRaw=function(t,e){return(e=e||{}).raw=!0,o(t,e)},a.ungzip=o},{\"./utils/common\":3,\"./utils/strings\":4,\"./zlib/constants\":6,\"./zlib/gzheader\":9,\"./zlib/inflate\":11,\"./zlib/messages\":13,\"./zlib/zstream\":15}],3:[function(t,e,a){\"use strict\";var i=\"undefined\"!=typeof Uint8Array&&\"undefined\"!=typeof Uint16Array&&\"undefined\"!=typeof Int32Array;a.assign=function(t){for(var e,a,i=Array.prototype.slice.call(arguments,1);i.length;){var n=i.shift();if(n){if(\"object\"!=typeof n)throw new TypeError(n+\"must be non-object\");for(var r in n)e=n,a=r,Object.prototype.hasOwnProperty.call(e,a)&&(t[r]=n[r])}}return t},a.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var n={arraySet:function(t,e,a,i,n){if(e.subarray&&t.subarray)t.set(e.subarray(a,a+i),n);else for(var r=0;r<i;r++)t[n+r]=e[a+r]},flattenChunks:function(t){var e,a,i,n,r,s;for(e=i=0,a=t.length;e<a;e++)i+=t[e].length;for(s=new Uint8Array(i),e=n=0,a=t.length;e<a;e++)r=t[e],s.set(r,n),n+=r.length;return s}},r={arraySet:function(t,e,a,i,n){for(var r=0;r<i;r++)t[n+r]=e[a+r]},flattenChunks:function(t){return[].concat.apply([],t)}};a.setTyped=function(t){t?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,n)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,r))},a.setTyped(i)},{}],4:[function(t,e,a){\"use strict\";var l=t(\"./common\"),n=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch(t){n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){r=!1}for(var h=new l.Buf8(256),i=0;i<256;i++)h[i]=252<=i?6:248<=i?5:240<=i?4:224<=i?3:192<=i?2:1;function d(t,e){if(e<65534&&(t.subarray&&r||!t.subarray&&n))return String.fromCharCode.apply(null,l.shrinkBuf(t,e));for(var a=\"\",i=0;i<e;i++)a+=String.fromCharCode(t[i]);return a}h[254]=h[254]=1,a.string2buf=function(t){var e,a,i,n,r,s=t.length,o=0;for(n=0;n<s;n++)55296==(64512&(a=t.charCodeAt(n)))&&n+1<s&&56320==(64512&(i=t.charCodeAt(n+1)))&&(a=65536+(a-55296<<10)+(i-56320),n++),o+=a<128?1:a<2048?2:a<65536?3:4;for(e=new l.Buf8(o),n=r=0;r<o;n++)55296==(64512&(a=t.charCodeAt(n)))&&n+1<s&&56320==(64512&(i=t.charCodeAt(n+1)))&&(a=65536+(a-55296<<10)+(i-56320),n++),a<128?e[r++]=a:(a<2048?e[r++]=192|a>>>6:(a<65536?e[r++]=224|a>>>12:(e[r++]=240|a>>>18,e[r++]=128|a>>>12&63),e[r++]=128|a>>>6&63),e[r++]=128|63&a);return e},a.buf2binstring=function(t){return d(t,t.length)},a.binstring2buf=function(t){for(var e=new l.Buf8(t.length),a=0,i=e.length;a<i;a++)e[a]=t.charCodeAt(a);return e},a.buf2string=function(t,e){var a,i,n,r,s=e||t.length,o=new Array(2*s);for(a=i=0;a<s;)if((n=t[a++])<128)o[i++]=n;else if(4<(r=h[n]))o[i++]=65533,a+=r-1;else{for(n&=2===r?31:3===r?15:7;1<r&&a<s;)n=n<<6|63&t[a++],r--;1<r?o[i++]=65533:n<65536?o[i++]=n:(n-=65536,o[i++]=55296|n>>10&1023,o[i++]=56320|1023&n)}return d(o,i)},a.utf8border=function(t,e){var a;for((e=e||t.length)>t.length&&(e=t.length),a=e-1;0<=a&&128==(192&t[a]);)a--;return a<0?e:0===a?e:a+h[t[a]]>e?a:e}},{\"./common\":3}],5:[function(t,e,a){\"use strict\";e.exports=function(t,e,a,i){for(var n=65535&t|0,r=t>>>16&65535|0,s=0;0!==a;){for(a-=s=2e3<a?2e3:a;r=r+(n=n+e[i++]|0)|0,--s;);n%=65521,r%=65521}return n|r<<16|0}},{}],6:[function(t,e,a){\"use strict\";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],7:[function(t,e,a){\"use strict\";var o=function(){for(var t,e=[],a=0;a<256;a++){t=a;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e}();e.exports=function(t,e,a,i){var n=o,r=i+a;t^=-1;for(var s=i;s<r;s++)t=t>>>8^n[255&(t^e[s])];return-1^t}},{}],8:[function(t,e,a){\"use strict\";var l,_=t(\"../utils/common\"),h=t(\"./trees\"),u=t(\"./adler32\"),c=t(\"./crc32\"),i=t(\"./messages\"),d=0,f=4,b=0,g=-2,m=-1,w=4,n=2,p=8,v=9,r=286,s=30,o=19,k=2*r+1,y=15,x=3,z=258,B=z+x+1,S=42,E=113,A=1,Z=2,R=3,C=4;function N(t,e){return t.msg=i[e],e}function O(t){return(t<<1)-(4<t?9:0)}function D(t){for(var e=t.length;0<=--e;)t[e]=0}function I(t){var e=t.state,a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(_.arraySet(t.output,e.pending_buf,e.pending_out,a,t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))}function U(t,e){h._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,I(t.strm)}function T(t,e){t.pending_buf[t.pending++]=e}function F(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function L(t,e){var a,i,n=t.max_chain_length,r=t.strstart,s=t.prev_length,o=t.nice_match,l=t.strstart>t.w_size-B?t.strstart-(t.w_size-B):0,h=t.window,d=t.w_mask,f=t.prev,_=t.strstart+z,u=h[r+s-1],c=h[r+s];t.prev_length>=t.good_match&&(n>>=2),o>t.lookahead&&(o=t.lookahead);do{if(h[(a=e)+s]===c&&h[a+s-1]===u&&h[a]===h[r]&&h[++a]===h[r+1]){r+=2,a++;do{}while(h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&r<_);if(i=z-(_-r),r=_-z,s<i){if(t.match_start=e,o<=(s=i))break;u=h[r+s-1],c=h[r+s]}}}while((e=f[e&d])>l&&0!=--n);return s<=t.lookahead?s:t.lookahead}function H(t){var e,a,i,n,r,s,o,l,h,d,f=t.w_size;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=f+(f-B)){for(_.arraySet(t.window,t.window,f,f,0),t.match_start-=f,t.strstart-=f,t.block_start-=f,e=a=t.hash_size;i=t.head[--e],t.head[e]=f<=i?i-f:0,--a;);for(e=a=f;i=t.prev[--e],t.prev[e]=f<=i?i-f:0,--a;);n+=f}if(0===t.strm.avail_in)break;if(s=t.strm,o=t.window,l=t.strstart+t.lookahead,h=n,d=void 0,d=s.avail_in,h<d&&(d=h),a=0===d?0:(s.avail_in-=d,_.arraySet(o,s.input,s.next_in,d,l),1===s.state.wrap?s.adler=u(s.adler,o,d,l):2===s.state.wrap&&(s.adler=c(s.adler,o,d,l)),s.next_in+=d,s.total_in+=d,d),t.lookahead+=a,t.lookahead+t.insert>=x)for(r=t.strstart-t.insert,t.ins_h=t.window[r],t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+x-1])&t.hash_mask,t.prev[r&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=r,r++,t.insert--,!(t.lookahead+t.insert<x)););}while(t.lookahead<B&&0!==t.strm.avail_in)}function j(t,e){for(var a,i;;){if(t.lookahead<B){if(H(t),t.lookahead<B&&e===d)return A;if(0===t.lookahead)break}if(a=0,t.lookahead>=x&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-B&&(t.match_length=L(t,a)),t.match_length>=x)if(i=h._tr_tally(t,t.strstart-t.match_start,t.match_length-x),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=x){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=h._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(U(t,!1),0===t.strm.avail_out))return A}return t.insert=t.strstart<x-1?t.strstart:x-1,e===f?(U(t,!0),0===t.strm.avail_out?R:C):t.last_lit&&(U(t,!1),0===t.strm.avail_out)?A:Z}function K(t,e){for(var a,i,n;;){if(t.lookahead<B){if(H(t),t.lookahead<B&&e===d)return A;if(0===t.lookahead)break}if(a=0,t.lookahead>=x&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=x-1,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-B&&(t.match_length=L(t,a),t.match_length<=5&&(1===t.strategy||t.match_length===x&&4096<t.strstart-t.match_start)&&(t.match_length=x-1)),t.prev_length>=x&&t.match_length<=t.prev_length){for(n=t.strstart+t.lookahead-x,i=h._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-x),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=n&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=x-1,t.strstart++,i&&(U(t,!1),0===t.strm.avail_out))return A}else if(t.match_available){if((i=h._tr_tally(t,0,t.window[t.strstart-1]))&&U(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return A}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=h._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<x-1?t.strstart:x-1,e===f?(U(t,!0),0===t.strm.avail_out?R:C):t.last_lit&&(U(t,!1),0===t.strm.avail_out)?A:Z}function M(t,e,a,i,n){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=i,this.func=n}function P(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=p,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new _.Buf16(2*k),this.dyn_dtree=new _.Buf16(2*(2*s+1)),this.bl_tree=new _.Buf16(2*(2*o+1)),D(this.dyn_ltree),D(this.dyn_dtree),D(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new _.Buf16(y+1),this.heap=new _.Buf16(2*r+1),D(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new _.Buf16(2*r+1),D(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Y(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=n,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?S:E,t.adler=2===e.wrap?0:1,e.last_flush=d,h._tr_init(e),b):N(t,g)}function q(t){var e,a=Y(t);return a===b&&((e=t.state).window_size=2*e.w_size,D(e.head),e.max_lazy_match=l[e.level].max_lazy,e.good_match=l[e.level].good_length,e.nice_match=l[e.level].nice_length,e.max_chain_length=l[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=x-1,e.match_available=0,e.ins_h=0),a}function G(t,e,a,i,n,r){if(!t)return g;var s=1;if(e===m&&(e=6),i<0?(s=0,i=-i):15<i&&(s=2,i-=16),n<1||v<n||a!==p||i<8||15<i||e<0||9<e||r<0||w<r)return N(t,g);8===i&&(i=9);var o=new P;return(t.state=o).strm=t,o.wrap=s,o.gzhead=null,o.w_bits=i,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=n+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+x-1)/x),o.window=new _.Buf8(2*o.w_size),o.head=new _.Buf16(o.hash_size),o.prev=new _.Buf16(o.w_size),o.lit_bufsize=1<<n+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new _.Buf8(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=e,o.strategy=r,o.method=a,q(t)}l=[new M(0,0,0,0,function(t,e){var a=65535;for(a>t.pending_buf_size-5&&(a=t.pending_buf_size-5);;){if(t.lookahead<=1){if(H(t),0===t.lookahead&&e===d)return A;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+a;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,U(t,!1),0===t.strm.avail_out))return A;if(t.strstart-t.block_start>=t.w_size-B&&(U(t,!1),0===t.strm.avail_out))return A}return t.insert=0,e===f?(U(t,!0),0===t.strm.avail_out?R:C):(t.strstart>t.block_start&&(U(t,!1),t.strm.avail_out),A)}),new M(4,4,8,4,j),new M(4,5,16,8,j),new M(4,6,32,32,j),new M(4,4,16,16,K),new M(8,16,32,32,K),new M(8,16,128,128,K),new M(8,32,128,256,K),new M(32,128,258,1024,K),new M(32,258,258,4096,K)],a.deflateInit=function(t,e){return G(t,e,p,15,8,0)},a.deflateInit2=G,a.deflateReset=q,a.deflateResetKeep=Y,a.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?g:(t.state.gzhead=e,b):g},a.deflate=function(t,e){var a,i,n,r;if(!t||!t.state||5<e||e<0)return t?N(t,g):g;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&e!==f)return N(t,0===t.avail_out?-5:g);if(i.strm=t,a=i.last_flush,i.last_flush=e,i.status===S)if(2===i.wrap)t.adler=0,T(i,31),T(i,139),T(i,8),i.gzhead?(T(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),T(i,255&i.gzhead.time),T(i,i.gzhead.time>>8&255),T(i,i.gzhead.time>>16&255),T(i,i.gzhead.time>>24&255),T(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),T(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(T(i,255&i.gzhead.extra.length),T(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=c(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(T(i,0),T(i,0),T(i,0),T(i,0),T(i,0),T(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),T(i,3),i.status=E);else{var s=p+(i.w_bits-8<<4)<<8;s|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(s|=32),s+=31-s%31,i.status=E,F(i,s),0!==i.strstart&&(F(i,t.adler>>>16),F(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(n=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>n&&(t.adler=c(t.adler,i.pending_buf,i.pending-n,n)),I(t),n=i.pending,i.pending!==i.pending_buf_size));)T(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>n&&(t.adler=c(t.adler,i.pending_buf,i.pending-n,n)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(t.adler=c(t.adler,i.pending_buf,i.pending-n,n)),I(t),n=i.pending,i.pending===i.pending_buf_size)){r=1;break}T(i,r=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0)}while(0!==r);i.gzhead.hcrc&&i.pending>n&&(t.adler=c(t.adler,i.pending_buf,i.pending-n,n)),0===r&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(t.adler=c(t.adler,i.pending_buf,i.pending-n,n)),I(t),n=i.pending,i.pending===i.pending_buf_size)){r=1;break}T(i,r=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0)}while(0!==r);i.gzhead.hcrc&&i.pending>n&&(t.adler=c(t.adler,i.pending_buf,i.pending-n,n)),0===r&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&I(t),i.pending+2<=i.pending_buf_size&&(T(i,255&t.adler),T(i,t.adler>>8&255),t.adler=0,i.status=E)):i.status=E),0!==i.pending){if(I(t),0===t.avail_out)return i.last_flush=-1,b}else if(0===t.avail_in&&O(e)<=O(a)&&e!==f)return N(t,-5);if(666===i.status&&0!==t.avail_in)return N(t,-5);if(0!==t.avail_in||0!==i.lookahead||e!==d&&666!==i.status){var o=2===i.strategy?function(t,e){for(var a;;){if(0===t.lookahead&&(H(t),0===t.lookahead)){if(e===d)return A;break}if(t.match_length=0,a=h._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(U(t,!1),0===t.strm.avail_out))return A}return t.insert=0,e===f?(U(t,!0),0===t.strm.avail_out?R:C):t.last_lit&&(U(t,!1),0===t.strm.avail_out)?A:Z}(i,e):3===i.strategy?function(t,e){for(var a,i,n,r,s=t.window;;){if(t.lookahead<=z){if(H(t),t.lookahead<=z&&e===d)return A;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=x&&0<t.strstart&&(i=s[n=t.strstart-1])===s[++n]&&i===s[++n]&&i===s[++n]){r=t.strstart+z;do{}while(i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&n<r);t.match_length=z-(r-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=x?(a=h._tr_tally(t,1,t.match_length-x),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=h._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(U(t,!1),0===t.strm.avail_out))return A}return t.insert=0,e===f?(U(t,!0),0===t.strm.avail_out?R:C):t.last_lit&&(U(t,!1),0===t.strm.avail_out)?A:Z}(i,e):l[i.level].func(i,e);if(o!==R&&o!==C||(i.status=666),o===A||o===R)return 0===t.avail_out&&(i.last_flush=-1),b;if(o===Z&&(1===e?h._tr_align(i):5!==e&&(h._tr_stored_block(i,0,0,!1),3===e&&(D(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),I(t),0===t.avail_out))return i.last_flush=-1,b}return e!==f?b:i.wrap<=0?1:(2===i.wrap?(T(i,255&t.adler),T(i,t.adler>>8&255),T(i,t.adler>>16&255),T(i,t.adler>>24&255),T(i,255&t.total_in),T(i,t.total_in>>8&255),T(i,t.total_in>>16&255),T(i,t.total_in>>24&255)):(F(i,t.adler>>>16),F(i,65535&t.adler)),I(t),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?b:1)},a.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==S&&69!==e&&73!==e&&91!==e&&103!==e&&e!==E&&666!==e?N(t,g):(t.state=null,e===E?N(t,-3):b):g},a.deflateSetDictionary=function(t,e){var a,i,n,r,s,o,l,h,d=e.length;if(!t||!t.state)return g;if(2===(r=(a=t.state).wrap)||1===r&&a.status!==S||a.lookahead)return g;for(1===r&&(t.adler=u(t.adler,e,d,0)),a.wrap=0,d>=a.w_size&&(0===r&&(D(a.head),a.strstart=0,a.block_start=0,a.insert=0),h=new _.Buf8(a.w_size),_.arraySet(h,e,d-a.w_size,a.w_size,0),e=h,d=a.w_size),s=t.avail_in,o=t.next_in,l=t.input,t.avail_in=d,t.next_in=0,t.input=e,H(a);a.lookahead>=x;){for(i=a.strstart,n=a.lookahead-(x-1);a.ins_h=(a.ins_h<<a.hash_shift^a.window[i+x-1])&a.hash_mask,a.prev[i&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=i,i++,--n;);a.strstart=i,a.lookahead=x-1,H(a)}return a.strstart+=a.lookahead,a.block_start=a.strstart,a.insert=a.lookahead,a.lookahead=0,a.match_length=a.prev_length=x-1,a.match_available=0,t.next_in=o,t.input=l,t.avail_in=s,a.wrap=r,b},a.deflateInfo=\"pako deflate (from Nodeca project)\"},{\"../utils/common\":3,\"./adler32\":5,\"./crc32\":7,\"./messages\":13,\"./trees\":14}],9:[function(t,e,a){\"use strict\";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name=\"\",this.comment=\"\",this.hcrc=0,this.done=!1}},{}],10:[function(t,e,a){\"use strict\";e.exports=function(t,e){var a,i,n,r,s,o,l,h,d,f,_,u,c,b,g,m,w,p,v,k,y,x,z,B,S;a=t.state,i=t.next_in,B=t.input,n=i+(t.avail_in-5),r=t.next_out,S=t.output,s=r-(e-t.avail_out),o=r+(t.avail_out-257),l=a.dmax,h=a.wsize,d=a.whave,f=a.wnext,_=a.window,u=a.hold,c=a.bits,b=a.lencode,g=a.distcode,m=(1<<a.lenbits)-1,w=(1<<a.distbits)-1;t:do{c<15&&(u+=B[i++]<<c,c+=8,u+=B[i++]<<c,c+=8),p=b[u&m];e:for(;;){if(u>>>=v=p>>>24,c-=v,0===(v=p>>>16&255))S[r++]=65535&p;else{if(!(16&v)){if(0==(64&v)){p=b[(65535&p)+(u&(1<<v)-1)];continue e}if(32&v){a.mode=12;break t}t.msg=\"invalid literal/length code\",a.mode=30;break t}k=65535&p,(v&=15)&&(c<v&&(u+=B[i++]<<c,c+=8),k+=u&(1<<v)-1,u>>>=v,c-=v),c<15&&(u+=B[i++]<<c,c+=8,u+=B[i++]<<c,c+=8),p=g[u&w];a:for(;;){if(u>>>=v=p>>>24,c-=v,!(16&(v=p>>>16&255))){if(0==(64&v)){p=g[(65535&p)+(u&(1<<v)-1)];continue a}t.msg=\"invalid distance code\",a.mode=30;break t}if(y=65535&p,c<(v&=15)&&(u+=B[i++]<<c,(c+=8)<v&&(u+=B[i++]<<c,c+=8)),l<(y+=u&(1<<v)-1)){t.msg=\"invalid distance too far back\",a.mode=30;break t}if(u>>>=v,c-=v,(v=r-s)<y){if(d<(v=y-v)&&a.sane){t.msg=\"invalid distance too far back\",a.mode=30;break t}if(z=_,(x=0)===f){if(x+=h-v,v<k){for(k-=v;S[r++]=_[x++],--v;);x=r-y,z=S}}else if(f<v){if(x+=h+f-v,(v-=f)<k){for(k-=v;S[r++]=_[x++],--v;);if(x=0,f<k){for(k-=v=f;S[r++]=_[x++],--v;);x=r-y,z=S}}}else if(x+=f-v,v<k){for(k-=v;S[r++]=_[x++],--v;);x=r-y,z=S}for(;2<k;)S[r++]=z[x++],S[r++]=z[x++],S[r++]=z[x++],k-=3;k&&(S[r++]=z[x++],1<k&&(S[r++]=z[x++]))}else{for(x=r-y;S[r++]=S[x++],S[r++]=S[x++],S[r++]=S[x++],2<(k-=3););k&&(S[r++]=S[x++],1<k&&(S[r++]=S[x++]))}break}}break}}while(i<n&&r<o);i-=k=c>>3,u&=(1<<(c-=k<<3))-1,t.next_in=i,t.next_out=r,t.avail_in=i<n?n-i+5:5-(i-n),t.avail_out=r<o?o-r+257:257-(r-o),a.hold=u,a.bits=c}},{}],11:[function(t,e,a){\"use strict\";var Z=t(\"../utils/common\"),R=t(\"./adler32\"),C=t(\"./crc32\"),N=t(\"./inffast\"),O=t(\"./inftrees\"),D=1,I=2,U=0,T=-2,F=1,i=852,n=592;function L(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function r(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Z.Buf16(320),this.work=new Z.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function s(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg=\"\",e.wrap&&(t.adler=1&e.wrap),e.mode=F,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Z.Buf32(i),e.distcode=e.distdyn=new Z.Buf32(n),e.sane=1,e.back=-1,U):T}function o(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,s(t)):T}function l(t,e){var a,i;return t&&t.state?(i=t.state,e<0?(a=0,e=-e):(a=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?T:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=a,i.wbits=e,o(t))):T}function h(t,e){var a,i;return t?(i=new r,(t.state=i).window=null,(a=l(t,e))!==U&&(t.state=null),a):T}var d,f,_=!0;function H(t){if(_){var e;for(d=new Z.Buf32(512),f=new Z.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(O(D,t.lens,0,288,d,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;O(I,t.lens,0,32,f,0,t.work,{bits:5}),_=!1}t.lencode=d,t.lenbits=9,t.distcode=f,t.distbits=5}function j(t,e,a,i){var n,r=t.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Z.Buf8(r.wsize)),i>=r.wsize?(Z.arraySet(r.window,e,a-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):(i<(n=r.wsize-r.wnext)&&(n=i),Z.arraySet(r.window,e,a-i,n,r.wnext),(i-=n)?(Z.arraySet(r.window,e,a-i,i,0),r.wnext=i,r.whave=r.wsize):(r.wnext+=n,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=n))),0}a.inflateReset=o,a.inflateReset2=l,a.inflateResetKeep=s,a.inflateInit=function(t){return h(t,15)},a.inflateInit2=h,a.inflate=function(t,e){var a,i,n,r,s,o,l,h,d,f,_,u,c,b,g,m,w,p,v,k,y,x,z,B,S=0,E=new Z.Buf8(4),A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return T;12===(a=t.state).mode&&(a.mode=13),s=t.next_out,n=t.output,l=t.avail_out,r=t.next_in,i=t.input,o=t.avail_in,h=a.hold,d=a.bits,f=o,_=l,x=U;t:for(;;)switch(a.mode){case F:if(0===a.wrap){a.mode=13;break}for(;d<16;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(2&a.wrap&&35615===h){E[a.check=0]=255&h,E[1]=h>>>8&255,a.check=C(a.check,E,2,0),d=h=0,a.mode=2;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&h)<<8)+(h>>8))%31){t.msg=\"incorrect header check\",a.mode=30;break}if(8!=(15&h)){t.msg=\"unknown compression method\",a.mode=30;break}if(d-=4,y=8+(15&(h>>>=4)),0===a.wbits)a.wbits=y;else if(y>a.wbits){t.msg=\"invalid window size\",a.mode=30;break}a.dmax=1<<y,t.adler=a.check=1,a.mode=512&h?10:12,d=h=0;break;case 2:for(;d<16;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(a.flags=h,8!=(255&a.flags)){t.msg=\"unknown compression method\",a.mode=30;break}if(57344&a.flags){t.msg=\"unknown header flags set\",a.mode=30;break}a.head&&(a.head.text=h>>8&1),512&a.flags&&(E[0]=255&h,E[1]=h>>>8&255,a.check=C(a.check,E,2,0)),d=h=0,a.mode=3;case 3:for(;d<32;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}a.head&&(a.head.time=h),512&a.flags&&(E[0]=255&h,E[1]=h>>>8&255,E[2]=h>>>16&255,E[3]=h>>>24&255,a.check=C(a.check,E,4,0)),d=h=0,a.mode=4;case 4:for(;d<16;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}a.head&&(a.head.xflags=255&h,a.head.os=h>>8),512&a.flags&&(E[0]=255&h,E[1]=h>>>8&255,a.check=C(a.check,E,2,0)),d=h=0,a.mode=5;case 5:if(1024&a.flags){for(;d<16;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}a.length=h,a.head&&(a.head.extra_len=h),512&a.flags&&(E[0]=255&h,E[1]=h>>>8&255,a.check=C(a.check,E,2,0)),d=h=0}else a.head&&(a.head.extra=null);a.mode=6;case 6:if(1024&a.flags&&(o<(u=a.length)&&(u=o),u&&(a.head&&(y=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Array(a.head.extra_len)),Z.arraySet(a.head.extra,i,r,u,y)),512&a.flags&&(a.check=C(a.check,i,u,r)),o-=u,r+=u,a.length-=u),a.length))break t;a.length=0,a.mode=7;case 7:if(2048&a.flags){if(0===o)break t;for(u=0;y=i[r+u++],a.head&&y&&a.length<65536&&(a.head.name+=String.fromCharCode(y)),y&&u<o;);if(512&a.flags&&(a.check=C(a.check,i,u,r)),o-=u,r+=u,y)break t}else a.head&&(a.head.name=null);a.length=0,a.mode=8;case 8:if(4096&a.flags){if(0===o)break t;for(u=0;y=i[r+u++],a.head&&y&&a.length<65536&&(a.head.comment+=String.fromCharCode(y)),y&&u<o;);if(512&a.flags&&(a.check=C(a.check,i,u,r)),o-=u,r+=u,y)break t}else a.head&&(a.head.comment=null);a.mode=9;case 9:if(512&a.flags){for(;d<16;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(h!==(65535&a.check)){t.msg=\"header crc mismatch\",a.mode=30;break}d=h=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),t.adler=a.check=0,a.mode=12;break;case 10:for(;d<32;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}t.adler=a.check=L(h),d=h=0,a.mode=11;case 11:if(0===a.havedict)return t.next_out=s,t.avail_out=l,t.next_in=r,t.avail_in=o,a.hold=h,a.bits=d,2;t.adler=a.check=1,a.mode=12;case 12:if(5===e||6===e)break t;case 13:if(a.last){h>>>=7&d,d-=7&d,a.mode=27;break}for(;d<3;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}switch(a.last=1&h,d-=1,3&(h>>>=1)){case 0:a.mode=14;break;case 1:if(H(a),a.mode=20,6!==e)break;h>>>=2,d-=2;break t;case 2:a.mode=17;break;case 3:t.msg=\"invalid block type\",a.mode=30}h>>>=2,d-=2;break;case 14:for(h>>>=7&d,d-=7&d;d<32;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if((65535&h)!=(h>>>16^65535)){t.msg=\"invalid stored block lengths\",a.mode=30;break}if(a.length=65535&h,d=h=0,a.mode=15,6===e)break t;case 15:a.mode=16;case 16:if(u=a.length){if(o<u&&(u=o),l<u&&(u=l),0===u)break t;Z.arraySet(n,i,r,u,s),o-=u,r+=u,l-=u,s+=u,a.length-=u;break}a.mode=12;break;case 17:for(;d<14;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(a.nlen=257+(31&h),h>>>=5,d-=5,a.ndist=1+(31&h),h>>>=5,d-=5,a.ncode=4+(15&h),h>>>=4,d-=4,286<a.nlen||30<a.ndist){t.msg=\"too many length or distance symbols\",a.mode=30;break}a.have=0,a.mode=18;case 18:for(;a.have<a.ncode;){for(;d<3;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}a.lens[A[a.have++]]=7&h,h>>>=3,d-=3}for(;a.have<19;)a.lens[A[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,z={bits:a.lenbits},x=O(0,a.lens,0,19,a.lencode,0,a.work,z),a.lenbits=z.bits,x){t.msg=\"invalid code lengths set\",a.mode=30;break}a.have=0,a.mode=19;case 19:for(;a.have<a.nlen+a.ndist;){for(;m=(S=a.lencode[h&(1<<a.lenbits)-1])>>>16&255,w=65535&S,!((g=S>>>24)<=d);){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(w<16)h>>>=g,d-=g,a.lens[a.have++]=w;else{if(16===w){for(B=g+2;d<B;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(h>>>=g,d-=g,0===a.have){t.msg=\"invalid bit length repeat\",a.mode=30;break}y=a.lens[a.have-1],u=3+(3&h),h>>>=2,d-=2}else if(17===w){for(B=g+3;d<B;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}d-=g,y=0,u=3+(7&(h>>>=g)),h>>>=3,d-=3}else{for(B=g+7;d<B;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}d-=g,y=0,u=11+(127&(h>>>=g)),h>>>=7,d-=7}if(a.have+u>a.nlen+a.ndist){t.msg=\"invalid bit length repeat\",a.mode=30;break}for(;u--;)a.lens[a.have++]=y}}if(30===a.mode)break;if(0===a.lens[256]){t.msg=\"invalid code -- missing end-of-block\",a.mode=30;break}if(a.lenbits=9,z={bits:a.lenbits},x=O(D,a.lens,0,a.nlen,a.lencode,0,a.work,z),a.lenbits=z.bits,x){t.msg=\"invalid literal/lengths set\",a.mode=30;break}if(a.distbits=6,a.distcode=a.distdyn,z={bits:a.distbits},x=O(I,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,z),a.distbits=z.bits,x){t.msg=\"invalid distances set\",a.mode=30;break}if(a.mode=20,6===e)break t;case 20:a.mode=21;case 21:if(6<=o&&258<=l){t.next_out=s,t.avail_out=l,t.next_in=r,t.avail_in=o,a.hold=h,a.bits=d,N(t,_),s=t.next_out,n=t.output,l=t.avail_out,r=t.next_in,i=t.input,o=t.avail_in,h=a.hold,d=a.bits,12===a.mode&&(a.back=-1);break}for(a.back=0;m=(S=a.lencode[h&(1<<a.lenbits)-1])>>>16&255,w=65535&S,!((g=S>>>24)<=d);){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(m&&0==(240&m)){for(p=g,v=m,k=w;m=(S=a.lencode[k+((h&(1<<p+v)-1)>>p)])>>>16&255,w=65535&S,!(p+(g=S>>>24)<=d);){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}h>>>=p,d-=p,a.back+=p}if(h>>>=g,d-=g,a.back+=g,a.length=w,0===m){a.mode=26;break}if(32&m){a.back=-1,a.mode=12;break}if(64&m){t.msg=\"invalid literal/length code\",a.mode=30;break}a.extra=15&m,a.mode=22;case 22:if(a.extra){for(B=a.extra;d<B;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}a.length+=h&(1<<a.extra)-1,h>>>=a.extra,d-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=23;case 23:for(;m=(S=a.distcode[h&(1<<a.distbits)-1])>>>16&255,w=65535&S,!((g=S>>>24)<=d);){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(0==(240&m)){for(p=g,v=m,k=w;m=(S=a.distcode[k+((h&(1<<p+v)-1)>>p)])>>>16&255,w=65535&S,!(p+(g=S>>>24)<=d);){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}h>>>=p,d-=p,a.back+=p}if(h>>>=g,d-=g,a.back+=g,64&m){t.msg=\"invalid distance code\",a.mode=30;break}a.offset=w,a.extra=15&m,a.mode=24;case 24:if(a.extra){for(B=a.extra;d<B;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}a.offset+=h&(1<<a.extra)-1,h>>>=a.extra,d-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){t.msg=\"invalid distance too far back\",a.mode=30;break}a.mode=25;case 25:if(0===l)break t;if(u=_-l,a.offset>u){if((u=a.offset-u)>a.whave&&a.sane){t.msg=\"invalid distance too far back\",a.mode=30;break}u>a.wnext?(u-=a.wnext,c=a.wsize-u):c=a.wnext-u,u>a.length&&(u=a.length),b=a.window}else b=n,c=s-a.offset,u=a.length;for(l<u&&(u=l),l-=u,a.length-=u;n[s++]=b[c++],--u;);0===a.length&&(a.mode=21);break;case 26:if(0===l)break t;n[s++]=a.length,l--,a.mode=21;break;case 27:if(a.wrap){for(;d<32;){if(0===o)break t;o--,h|=i[r++]<<d,d+=8}if(_-=l,t.total_out+=_,a.total+=_,_&&(t.adler=a.check=a.flags?C(a.check,n,_,s-_):R(a.check,n,_,s-_)),_=l,(a.flags?h:L(h))!==a.check){t.msg=\"incorrect data check\",a.mode=30;break}d=h=0}a.mode=28;case 28:if(a.wrap&&a.flags){for(;d<32;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(h!==(4294967295&a.total)){t.msg=\"incorrect length check\",a.mode=30;break}d=h=0}a.mode=29;case 29:x=1;break t;case 30:x=-3;break t;case 31:return-4;case 32:default:return T}return t.next_out=s,t.avail_out=l,t.next_in=r,t.avail_in=o,a.hold=h,a.bits=d,(a.wsize||_!==t.avail_out&&a.mode<30&&(a.mode<27||4!==e))&&j(t,t.output,t.next_out,_-t.avail_out)?(a.mode=31,-4):(f-=t.avail_in,_-=t.avail_out,t.total_in+=f,t.total_out+=_,a.total+=_,a.wrap&&_&&(t.adler=a.check=a.flags?C(a.check,n,_,t.next_out-_):R(a.check,n,_,t.next_out-_)),t.data_type=a.bits+(a.last?64:0)+(12===a.mode?128:0)+(20===a.mode||15===a.mode?256:0),(0===f&&0===_||4===e)&&x===U&&(x=-5),x)},a.inflateEnd=function(t){if(!t||!t.state)return T;var e=t.state;return e.window&&(e.window=null),t.state=null,U},a.inflateGetHeader=function(t,e){var a;return t&&t.state?0==(2&(a=t.state).wrap)?T:((a.head=e).done=!1,U):T},a.inflateSetDictionary=function(t,e){var a,i=e.length;return t&&t.state?0!==(a=t.state).wrap&&11!==a.mode?T:11===a.mode&&R(1,e,i,0)!==a.check?-3:j(t,e,i,i)?(a.mode=31,-4):(a.havedict=1,U):T},a.inflateInfo=\"pako inflate (from Nodeca project)\"},{\"../utils/common\":3,\"./adler32\":5,\"./crc32\":7,\"./inffast\":10,\"./inftrees\":12}],12:[function(t,e,a){\"use strict\";var D=t(\"../utils/common\"),I=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],U=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],T=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],F=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,a,i,n,r,s,o){var l,h,d,f,_,u,c,b,g,m=o.bits,w=0,p=0,v=0,k=0,y=0,x=0,z=0,B=0,S=0,E=0,A=null,Z=0,R=new D.Buf16(16),C=new D.Buf16(16),N=null,O=0;for(w=0;w<=15;w++)R[w]=0;for(p=0;p<i;p++)R[e[a+p]]++;for(y=m,k=15;1<=k&&0===R[k];k--);if(k<y&&(y=k),0===k)return n[r++]=20971520,n[r++]=20971520,o.bits=1,0;for(v=1;v<k&&0===R[v];v++);for(y<v&&(y=v),w=B=1;w<=15;w++)if(B<<=1,(B-=R[w])<0)return-1;if(0<B&&(0===t||1!==k))return-1;for(C[1]=0,w=1;w<15;w++)C[w+1]=C[w]+R[w];for(p=0;p<i;p++)0!==e[a+p]&&(s[C[e[a+p]]++]=p);if(0===t?(A=N=s,u=19):1===t?(A=I,Z-=257,N=U,O-=257,u=256):(A=T,N=F,u=-1),w=v,_=r,z=p=E=0,d=-1,f=(S=1<<(x=y))-1,1===t&&852<S||2===t&&592<S)return 1;for(;;){for(c=w-z,s[p]<u?(b=0,g=s[p]):s[p]>u?(b=N[O+s[p]],g=A[Z+s[p]]):(b=96,g=0),l=1<<w-z,v=h=1<<x;n[_+(E>>z)+(h-=l)]=c<<24|b<<16|g|0,0!==h;);for(l=1<<w-1;E&l;)l>>=1;if(0!==l?(E&=l-1,E+=l):E=0,p++,0==--R[w]){if(w===k)break;w=e[a+s[p]]}if(y<w&&(E&f)!==d){for(0===z&&(z=y),_+=v,B=1<<(x=w-z);x+z<k&&!((B-=R[x+z])<=0);)x++,B<<=1;if(S+=1<<x,1===t&&852<S||2===t&&592<S)return 1;n[d=E&f]=y<<24|x<<16|_-r|0}}return 0!==E&&(n[_+E]=w-z<<24|64<<16|0),o.bits=y,0}},{\"../utils/common\":3}],13:[function(t,e,a){\"use strict\";e.exports={2:\"need dictionary\",1:\"stream end\",0:\"\",\"-1\":\"file error\",\"-2\":\"stream error\",\"-3\":\"data error\",\"-4\":\"insufficient memory\",\"-5\":\"buffer error\",\"-6\":\"incompatible version\"}},{}],14:[function(t,e,a){\"use strict\";var l=t(\"../utils/common\"),o=0,h=1;function i(t){for(var e=t.length;0<=--e;)t[e]=0}var d=0,s=29,f=256,_=f+1+s,u=30,c=19,g=2*_+1,m=15,n=16,b=7,w=256,p=16,v=17,k=18,y=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],x=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S=new Array(2*(_+2));i(S);var E=new Array(2*u);i(E);var A=new Array(512);i(A);var Z=new Array(256);i(Z);var R=new Array(s);i(R);var C,N,O,D=new Array(u);function I(t,e,a,i,n){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=i,this.max_length=n,this.has_stree=t&&t.length}function r(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function U(t){return t<256?A[t]:A[256+(t>>>7)]}function T(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function F(t,e,a){t.bi_valid>n-a?(t.bi_buf|=e<<t.bi_valid&65535,T(t,t.bi_buf),t.bi_buf=e>>n-t.bi_valid,t.bi_valid+=a-n):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)}function L(t,e,a){F(t,a[2*e],a[2*e+1])}function H(t,e){for(var a=0;a|=1&t,t>>>=1,a<<=1,0<--e;);return a>>>1}function j(t,e,a){var i,n,r=new Array(m+1),s=0;for(i=1;i<=m;i++)r[i]=s=s+a[i-1]<<1;for(n=0;n<=e;n++){var o=t[2*n+1];0!==o&&(t[2*n]=H(r[o]++,o))}}function K(t){var e;for(e=0;e<_;e++)t.dyn_ltree[2*e]=0;for(e=0;e<u;e++)t.dyn_dtree[2*e]=0;for(e=0;e<c;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*w]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function M(t){8<t.bi_valid?T(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function P(t,e,a,i){var n=2*e,r=2*a;return t[n]<t[r]||t[n]===t[r]&&i[e]<=i[a]}function Y(t,e,a){for(var i=t.heap[a],n=a<<1;n<=t.heap_len&&(n<t.heap_len&&P(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!P(e,i,t.heap[n],t.depth));)t.heap[a]=t.heap[n],a=n,n<<=1;t.heap[a]=i}function q(t,e,a){var i,n,r,s,o=0;if(0!==t.last_lit)for(;i=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],n=t.pending_buf[t.l_buf+o],o++,0===i?L(t,n,e):(L(t,(r=Z[n])+f+1,e),0!==(s=y[r])&&F(t,n-=R[r],s),L(t,r=U(--i),a),0!==(s=x[r])&&F(t,i-=D[r],s)),o<t.last_lit;);L(t,w,e)}function G(t,e){var a,i,n,r=e.dyn_tree,s=e.stat_desc.static_tree,o=e.stat_desc.has_stree,l=e.stat_desc.elems,h=-1;for(t.heap_len=0,t.heap_max=g,a=0;a<l;a++)0!==r[2*a]?(t.heap[++t.heap_len]=h=a,t.depth[a]=0):r[2*a+1]=0;for(;t.heap_len<2;)r[2*(n=t.heap[++t.heap_len]=h<2?++h:0)]=1,t.depth[n]=0,t.opt_len--,o&&(t.static_len-=s[2*n+1]);for(e.max_code=h,a=t.heap_len>>1;1<=a;a--)Y(t,r,a);for(n=l;a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],Y(t,r,1),i=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=i,r[2*n]=r[2*a]+r[2*i],t.depth[n]=(t.depth[a]>=t.depth[i]?t.depth[a]:t.depth[i])+1,r[2*a+1]=r[2*i+1]=n,t.heap[1]=n++,Y(t,r,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var a,i,n,r,s,o,l=e.dyn_tree,h=e.max_code,d=e.stat_desc.static_tree,f=e.stat_desc.has_stree,_=e.stat_desc.extra_bits,u=e.stat_desc.extra_base,c=e.stat_desc.max_length,b=0;for(r=0;r<=m;r++)t.bl_count[r]=0;for(l[2*t.heap[t.heap_max]+1]=0,a=t.heap_max+1;a<g;a++)c<(r=l[2*l[2*(i=t.heap[a])+1]+1]+1)&&(r=c,b++),l[2*i+1]=r,h<i||(t.bl_count[r]++,s=0,u<=i&&(s=_[i-u]),o=l[2*i],t.opt_len+=o*(r+s),f&&(t.static_len+=o*(d[2*i+1]+s)));if(0!==b){do{for(r=c-1;0===t.bl_count[r];)r--;t.bl_count[r]--,t.bl_count[r+1]+=2,t.bl_count[c]--,b-=2}while(0<b);for(r=c;0!==r;r--)for(i=t.bl_count[r];0!==i;)h<(n=t.heap[--a])||(l[2*n+1]!==r&&(t.opt_len+=(r-l[2*n+1])*l[2*n],l[2*n+1]=r),i--)}}(t,e),j(r,h,t.bl_count)}function X(t,e,a){var i,n,r=-1,s=e[1],o=0,l=7,h=4;for(0===s&&(l=138,h=3),e[2*(a+1)+1]=65535,i=0;i<=a;i++)n=s,s=e[2*(i+1)+1],++o<l&&n===s||(o<h?t.bl_tree[2*n]+=o:0!==n?(n!==r&&t.bl_tree[2*n]++,t.bl_tree[2*p]++):o<=10?t.bl_tree[2*v]++:t.bl_tree[2*k]++,r=n,(o=0)===s?(l=138,h=3):n===s?(l=6,h=3):(l=7,h=4))}function W(t,e,a){var i,n,r=-1,s=e[1],o=0,l=7,h=4;for(0===s&&(l=138,h=3),i=0;i<=a;i++)if(n=s,s=e[2*(i+1)+1],!(++o<l&&n===s)){if(o<h)for(;L(t,n,t.bl_tree),0!=--o;);else 0!==n?(n!==r&&(L(t,n,t.bl_tree),o--),L(t,p,t.bl_tree),F(t,o-3,2)):o<=10?(L(t,v,t.bl_tree),F(t,o-3,3)):(L(t,k,t.bl_tree),F(t,o-11,7));r=n,(o=0)===s?(l=138,h=3):n===s?(l=6,h=3):(l=7,h=4)}}i(D);var J=!1;function Q(t,e,a,i){var n,r,s,o;F(t,(d<<1)+(i?1:0),3),r=e,s=a,o=!0,M(n=t),o&&(T(n,s),T(n,~s)),l.arraySet(n.pending_buf,n.window,r,s,n.pending),n.pending+=s}a._tr_init=function(t){J||(function(){var t,e,a,i,n,r=new Array(m+1);for(i=a=0;i<s-1;i++)for(R[i]=a,t=0;t<1<<y[i];t++)Z[a++]=i;for(Z[a-1]=i,i=n=0;i<16;i++)for(D[i]=n,t=0;t<1<<x[i];t++)A[n++]=i;for(n>>=7;i<u;i++)for(D[i]=n<<7,t=0;t<1<<x[i]-7;t++)A[256+n++]=i;for(e=0;e<=m;e++)r[e]=0;for(t=0;t<=143;)S[2*t+1]=8,t++,r[8]++;for(;t<=255;)S[2*t+1]=9,t++,r[9]++;for(;t<=279;)S[2*t+1]=7,t++,r[7]++;for(;t<=287;)S[2*t+1]=8,t++,r[8]++;for(j(S,_+1,r),t=0;t<u;t++)E[2*t+1]=5,E[2*t]=H(t,5);C=new I(S,y,f+1,_,m),N=new I(E,x,0,u,m),O=new I(new Array(0),z,0,c,b)}(),J=!0),t.l_desc=new r(t.dyn_ltree,C),t.d_desc=new r(t.dyn_dtree,N),t.bl_desc=new r(t.bl_tree,O),t.bi_buf=0,t.bi_valid=0,K(t)},a._tr_stored_block=Q,a._tr_flush_block=function(t,e,a,i){var n,r,s=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,a=4093624447;for(e=0;e<=31;e++,a>>>=1)if(1&a&&0!==t.dyn_ltree[2*e])return o;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return h;for(e=32;e<f;e++)if(0!==t.dyn_ltree[2*e])return h;return o}(t)),G(t,t.l_desc),G(t,t.d_desc),s=function(t){var e;for(X(t,t.dyn_ltree,t.l_desc.max_code),X(t,t.dyn_dtree,t.d_desc.max_code),G(t,t.bl_desc),e=c-1;3<=e&&0===t.bl_tree[2*B[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),n=t.opt_len+3+7>>>3,(r=t.static_len+3+7>>>3)<=n&&(n=r)):n=r=a+5,a+4<=n&&-1!==e?Q(t,e,a,i):4===t.strategy||r===n?(F(t,2+(i?1:0),3),q(t,S,E)):(F(t,4+(i?1:0),3),function(t,e,a,i){var n;for(F(t,e-257,5),F(t,a-1,5),F(t,i-4,4),n=0;n<i;n++)F(t,t.bl_tree[2*B[n]+1],3);W(t,t.dyn_ltree,e-1),W(t,t.dyn_dtree,a-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),q(t,t.dyn_ltree,t.dyn_dtree)),K(t),i&&M(t)},a._tr_tally=function(t,e,a){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&a,t.last_lit++,0===e?t.dyn_ltree[2*a]++:(t.matches++,e--,t.dyn_ltree[2*(Z[a]+f+1)]++,t.dyn_dtree[2*U(e)]++),t.last_lit===t.lit_bufsize-1},a._tr_align=function(t){var e;F(t,2,3),L(t,w,S),16===(e=t).bi_valid?(T(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},{\"../utils/common\":3}],15:[function(t,e,a){\"use strict\";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg=\"\",this.state=null,this.data_type=2,this.adler=0}},{}],\"/\":[function(t,e,a){\"use strict\";var i={};(0,t(\"./lib/utils/common\").assign)(i,t(\"./lib/deflate\"),t(\"./lib/inflate\"),t(\"./lib/zlib/constants\")),e.exports=i},{\"./lib/deflate\":1,\"./lib/inflate\":2,\"./lib/utils/common\":3,\"./lib/zlib/constants\":6}]},{},[])(\"/\")});\n\n// Boot kernel prologue\n/*\\\ntitle: $:/boot/bootprefix.js\ntype: application/javascript\n\nThis file sets up the globals that need to be available when JavaScript modules are executed in the browser. The overall sequence is:\n\n# BootPrefix.js\n# <module definitions>\n# Boot.js\n\nSee Boot.js for further details of the boot process.\n\n\\*/\nvar _bootprefix = function ($tw) {\n  'use strict'\n\n  $tw = $tw || Object.create(null)\n  $tw.boot = $tw.boot || Object.create(null)\n\n  // Detect platforms\n  if (!('browser' in $tw)) {\n    $tw.browser = typeof window !== 'undefined' ? {} : null\n  }\n  if (!('node' in $tw)) {\n    $tw.node = typeof process === 'object' ? {} : null\n  }\n  if (!('nodeWebKit' in $tw)) {\n    $tw.nodeWebKit =\n      $tw.node && global.window && global.window.nwDispatcher ? {} : null\n  }\n\n  // Set default boot tasks\n  $tw.boot.tasks = {\n    trapErrors: !!($tw.browser && !$tw.node),\n    readBrowserTiddlers: !!($tw.browser && !$tw.node)\n  }\n\n  /**\n   * Information about each module is kept in an object with these members:\n   * moduleType: type of module\n   * definition: object, function or string defining the module; see below\n   * exports: exports of the module, filled in after execution\n   *\n   * The `definition` can be of several types:\n   *\n   * An object can be used to directly specify the exports of the module\n   * A function with the arguments `module,require,exports` that returns `exports`\n   * A string function body with the same arguments\n   *\n   * Each moduleInfo object is stored in two hashmaps: $tw.modules.titles and $tw.modules.types.\n   * The first is indexed by title and the second is indexed by type and then title\n   */\n  $tw.modules = {\n    titles: {}, // hashmap by module name of moduleInfo\n    types: {} // hashmap by module type and then name of moduleInfo\n  }\n\n  /**\n   * Define a JavaScript tiddler module for later execution\n   * moduleName: name of module being defined\n   * moduleType: type of module\n   * definition: module definition; see discussion above\n   */\n  $tw.modules.define = function (moduleName, moduleType, definition) {\n    // Create the moduleInfo\n    var moduleInfo = {\n      moduleType: moduleType,\n      definition: definition,\n      exports: undefined\n    }\n    // If the definition is already an object we can use it as the exports\n    if (typeof moduleInfo.definition === 'object') {\n      moduleInfo.exports = definition\n    }\n    // Store the module in the titles hashmap\n    if (Object.prototype.hasOwnProperty.call($tw.modules.titles, moduleName)) {\n      console.log('Warning: Redefined module - ' + moduleName)\n    }\n    $tw.modules.titles[moduleName] = moduleInfo\n    // Store the module in the types hashmap\n    if (!Object.prototype.hasOwnProperty.call($tw.modules.types, moduleType)) {\n      $tw.modules.types[moduleType] = {}\n    }\n    if (\n      Object.prototype.hasOwnProperty.call(\n        $tw.modules.types[moduleType],\n        moduleName\n      )\n    ) {\n      console.log('Warning: Redefined module - ' + moduleName)\n    }\n    $tw.modules.types[moduleType][moduleName] = moduleInfo\n  }\n\n  /**\n   * External JavaScript can populate this array before calling boot.js in order to preload tiddlers\n   */\n  $tw.preloadTiddlers = $tw.preloadTiddlers || []\n\n  /**\n   * Convenience function for pushing a tiddler onto the preloading array\n   */\n  $tw.preloadTiddler = function (fields) {\n    $tw.preloadTiddlers.push(fields)\n  }\n\n  /**\n   * Convenience function for pushing an array of tiddlers onto the preloading array\n   */\n  $tw.preloadTiddlerArray = function (fieldsArray) {\n    $tw.preloadTiddlers.push.apply($tw.preloadTiddlers, fieldsArray)\n  }\n\n  return $tw\n}\n\nif (typeof exports === 'undefined') {\n  // Set up $tw global for the browser\n  window.$tw = _bootprefix(window.$tw)\n} else {\n  // Export functionality as a module\n  exports.bootprefix = _bootprefix\n}\n\n// Boot kernel\n/*\\\ntitle: $:/boot/boot.js\ntype: application/javascript\n\nThe main boot kernel for TiddlyWiki. This single file creates a barebones TW environment that is just sufficient to bootstrap the modules containing the main logic of the application.\n\nOn the server this file is executed directly to boot TiddlyWiki. In the browser, this file is packed into a single HTML file.\n\n\\*/\nvar _boot = function ($tw) {\n  /*jslint node: true, browser: true */\n  'use strict'\n\n  // Include bootprefix if we're not given module data\n  if (!$tw) {\n    $tw = require('./bootprefix.js').bootprefix()\n  }\n\n  $tw.utils = $tw.utils || Object.create(null)\n\n  /////////////////////////// Standard node.js libraries\n\n  var fs, path, vm\n  if ($tw.node) {\n    fs = require('fs')\n    path = require('path')\n    vm = require('vm')\n  }\n\n  /////////////////////////// Utility functions\n\n  $tw.boot.log = function (str) {\n    $tw.boot.logMessages = $tw.boot.logMessages || []\n    $tw.boot.logMessages.push(str)\n  }\n\n  /*\n   * Check if an object has a property\n   */\n  $tw.utils.hop = function (object, property) {\n    return object\n      ? Object.prototype.hasOwnProperty.call(object, property)\n      : false\n  }\n\n  /**\n   * Determine if a value is an array\n   */\n  $tw.utils.isArray = function (value) {\n    return Object.prototype.toString.call(value) === '[object Array]'\n  }\n\n  /**\n   * Check if an array is equal by value and by reference.\n   */\n  $tw.utils.isArrayEqual = function (array1, array2) {\n    if (array1 === array2) {\n      return true\n    }\n    array1 = array1 || []\n    array2 = array2 || []\n    if (array1.length !== array2.length) {\n      return false\n    }\n    return array1.every(function (value, index) {\n      return value === array2[index]\n    })\n  }\n\n  /**\n   * Push entries onto an array, removing them first if they already exist in the array\n   * array: array to modify (assumed to be free of duplicates)\n   * value: a single value to push or an array of values to push\n   */\n  $tw.utils.pushTop = function (array, value) {\n    var t, p\n    if ($tw.utils.isArray(value)) {\n      // Remove any array entries that are duplicated in the new values\n      if (value.length !== 0) {\n        if (array.length !== 0) {\n          if (value.length < array.length) {\n            for (t = 0; t < value.length; t++) {\n              p = array.indexOf(value[t])\n              if (p !== -1) {\n                array.splice(p, 1)\n              }\n            }\n          } else {\n            for (t = array.length - 1; t >= 0; t--) {\n              p = value.indexOf(array[t])\n              if (p !== -1) {\n                array.splice(t, 1)\n              }\n            }\n          }\n        }\n        // Push the values on top of the main array\n        array.push.apply(array, value)\n      }\n    } else {\n      p = array.indexOf(value)\n      if (p !== -1) {\n        array.splice(p, 1)\n      }\n      array.push(value)\n    }\n    return array\n  }\n\n  /**\n   * Determine if a value is a date\n   */\n  $tw.utils.isDate = function (value) {\n    return Object.prototype.toString.call(value) === '[object Date]'\n  }\n\n  /**\n   * Iterate through all the own properties of an object or array. Callback is invoked with (element,title,object)\n   */\n  $tw.utils.each = function (object, callback) {\n    var next, f, length\n    if (object) {\n      if (Object.prototype.toString.call(object) === '[object Array]') {\n        for (f = 0, length = object.length; f < length; f++) {\n          next = callback(object[f], f, object)\n          if (next === false) {\n            break\n          }\n        }\n      } else {\n        var keys = Object.keys(object)\n        for (f = 0, length = keys.length; f < length; f++) {\n          var key = keys[f]\n          next = callback(object[key], key, object)\n          if (next === false) {\n            break\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Helper for making DOM elements\n   * tag: tag name\n   * options: see below\n   * Options include:\n   * namespace: defaults to http://www.w3.org/1999/xhtml\n   * attributes: hashmap of attribute values\n   * style: hashmap of styles\n   * text: text to add as a child node\n   * children: array of further child nodes\n   * innerHTML: optional HTML for element\n   * class: class name(s)\n   * document: defaults to current document\n   * eventListeners: array of event listeners (this option won't work until $tw.utils.addEventListeners() has been loaded)\n   */\n  $tw.utils.domMaker = function (tag, options) {\n    var doc = options.document || document\n    var element = doc.createElementNS(\n      options.namespace || 'http://www.w3.org/1999/xhtml',\n      tag\n    )\n    if (options.class) {\n      element.className = options.class\n    }\n    if (options.text) {\n      element.appendChild(doc.createTextNode(options.text))\n    }\n    $tw.utils.each(options.children, function (child) {\n      element.appendChild(child)\n    })\n    if (options.innerHTML) {\n      element.innerHTML = options.innerHTML\n    }\n    $tw.utils.each(options.attributes, function (attribute, name) {\n      element.setAttribute(name, attribute)\n    })\n    $tw.utils.each(options.style, function (value, name) {\n      element.style[name] = value\n    })\n    if (options.eventListeners) {\n      $tw.utils.addEventListeners(element, options.eventListeners)\n    }\n    return element\n  }\n\n  /**\n   * Display an error and exit\n   */\n  $tw.utils.error = function (err) {\n    // Prepare the error message\n    var errHeading =\n      $tw.language === undefined\n        ? 'Internal JavaScript Error'\n        : $tw.language.getString('InternalJavaScriptError/Title')\n    var promptMsg =\n      $tw.language === undefined\n        ? 'Well, this is embarrassing. It is recommended that you restart TiddlyWiki by refreshing your browser'\n        : $tw.language.getString('InternalJavaScriptError/Hint')\n    // Log the error to the console\n    console.error($tw.node ? '\\x1b[1;31m' + err + '\\x1b[0m' : err)\n    if ($tw.browser && !$tw.node) {\n      // Display an error message to the user\n      var dm = $tw.utils.domMaker\n      var heading = dm('h1', { text: errHeading })\n      var prompt = dm('div', { text: promptMsg, class: 'tc-error-prompt' })\n      var message = dm('div', { text: err, class: 'tc-error-message' })\n      var button = dm('div', {\n        children: [\n          dm('button', {\n            text:\n              $tw.language === undefined\n                ? 'close'\n                : $tw.language.getString('Buttons/Close/Caption')\n          })\n        ],\n        class: 'tc-error-prompt'\n      })\n      var form = dm('form', {\n        children: [heading, prompt, message, button],\n        class: 'tc-error-form'\n      })\n      document.body.insertBefore(form, document.body.firstChild)\n      form.addEventListener(\n        'submit',\n        function (event) {\n          document.body.removeChild(form)\n          event.preventDefault()\n          return false\n        },\n        true\n      )\n      return null\n    } else if (!$tw.browser) {\n      // Exit if we're under node.js\n      process.exit(1)\n    }\n  }\n\n  /**\n   * Use our custom error handler if we're in the browser\n   */\n  if ($tw.boot.tasks.trapErrors) {\n    window.onerror = function (errorMsg, url, lineNumber) {\n      $tw.utils.error(errorMsg)\n      return false\n    }\n  }\n\n  /**\n   * Extend an object with the properties from a list of source objects\n   */\n  $tw.utils.extend = function (object /*, sourceObjectList */) {\n    $tw.utils.each(Array.prototype.slice.call(arguments, 1), function (source) {\n      if (source) {\n        for (var p in source) {\n          object[p] = source[p]\n        }\n      }\n    })\n    return object\n  }\n\n  /**\n   * Fill in any null or undefined properties of an object with the properties from a list of source objects.\n   * Each property that is an object is called recursively\n   */\n  $tw.utils.deepDefaults = function (object /*, sourceObjectList */) {\n    $tw.utils.each(Array.prototype.slice.call(arguments, 1), function (source) {\n      if (source) {\n        for (var p in source) {\n          if (object[p] === null || object[p] === undefined) {\n            object[p] = source[p]\n          }\n          if (typeof object[p] === 'object' && typeof source[p] === 'object') {\n            $tw.utils.deepDefaults(object[p], source[p])\n          }\n        }\n      }\n    })\n    return object\n  }\n\n  /**\n   * Convert \"&amp;\" to &, \"&nbsp;\" to nbsp, \"&lt;\" to <, \"&gt;\" to > and \"&quot;\" to \"\n   */\n  $tw.utils.htmlDecode = function (s) {\n    return s\n      .toString()\n      .replace(/&lt;/gm, '<')\n      .replace(/&nbsp;/gm, '\\xA0')\n      .replace(/&gt;/gm, '>')\n      .replace(/&quot;/gm, '\"')\n      .replace(/&amp;/gm, '&')\n  }\n\n  /**\n   * Get the browser location.hash. We don't use location.hash because of the way that Firefox auto-urldecodes it (see http://stackoverflow.com/questions/1703552/encoding-of-window-location-hash)\n   */\n  $tw.utils.getLocationHash = function () {\n    var parts = window.location.href.split('#')\n    return '#' + (parts.length > 1 ? parts[1] : '')\n  }\n\n  /**\n   * Pad a string to a given length with \"0\"s. Length defaults to 2\n   */\n  $tw.utils.pad = function (value, length) {\n    length = length || 2\n    var s = value.toString()\n    if (s.length < length) {\n      s = '000000000000000000000000000'.substr(0, length - s.length) + s\n    }\n    return s\n  }\n\n  // Convert a date into UTC YYYYMMDDHHMMSSmmm format\n  $tw.utils.stringifyDate = function (value) {\n    return (\n      value.getUTCFullYear() +\n      $tw.utils.pad(value.getUTCMonth() + 1) +\n      $tw.utils.pad(value.getUTCDate()) +\n      $tw.utils.pad(value.getUTCHours()) +\n      $tw.utils.pad(value.getUTCMinutes()) +\n      $tw.utils.pad(value.getUTCSeconds()) +\n      $tw.utils.pad(value.getUTCMilliseconds(), 3)\n    )\n  }\n\n  // Parse a date from a UTC YYYYMMDDHHMMSSmmm format string\n  $tw.utils.parseDate = function (value) {\n    if (typeof value === 'string') {\n      return new Date(\n        Date.UTC(\n          parseInt(value.substr(0, 4), 10),\n          parseInt(value.substr(4, 2), 10) - 1,\n          parseInt(value.substr(6, 2), 10),\n          parseInt(value.substr(8, 2) || '00', 10),\n          parseInt(value.substr(10, 2) || '00', 10),\n          parseInt(value.substr(12, 2) || '00', 10),\n          parseInt(value.substr(14, 3) || '000', 10)\n        )\n      )\n    } else if ($tw.utils.isDate(value)) {\n      return value\n    } else {\n      return null\n    }\n  }\n\n  // Stringify an array of tiddler titles into a list string\n  $tw.utils.stringifyList = function (value) {\n    if ($tw.utils.isArray(value)) {\n      var result = new Array(value.length)\n      for (var t = 0, l = value.length; t < l; t++) {\n        var entry = value[t] || ''\n        if (entry.indexOf(' ') !== -1) {\n          result[t] = '[[' + entry + ']]'\n        } else {\n          result[t] = entry\n        }\n      }\n      return result.join(' ')\n    } else {\n      return value || ''\n    }\n  }\n\n  // Parse a string array from a bracketted list. For example \"OneTiddler [[Another Tiddler]] LastOne\"\n  $tw.utils.parseStringArray = function (value, allowDuplicate) {\n    if (typeof value === 'string') {\n      var memberRegExp = /(?:^|[^\\S\\xA0])(?:\\[\\[(.*?)\\]\\])(?=[^\\S\\xA0]|$)|([\\S\\xA0]+)/gm\n      var results = []\n      var names = {}\n      var match\n      do {\n        match = memberRegExp.exec(value)\n        if (match) {\n          var item = match[1] || match[2]\n          if (\n            item !== undefined &&\n            (!$tw.utils.hop(names, item) || allowDuplicate)\n          ) {\n            results.push(item)\n            names[item] = true\n          }\n        }\n      } while (match)\n      return results\n    } else if ($tw.utils.isArray(value)) {\n      return value\n    } else {\n      return null\n    }\n  }\n\n  // Parse a block of name:value fields. The `fields` object is used as the basis for the return value\n  $tw.utils.parseFields = function (text, fields) {\n    fields = fields || Object.create(null)\n    text.split(/\\r?\\n/gm).forEach(function (line) {\n      if (line.charAt(0) !== '#') {\n        var p = line.indexOf(':')\n        if (p !== -1) {\n          var field = line.substr(0, p).trim()\n          var value = line.substr(p + 1).trim()\n          if (field) {\n            fields[field] = value\n          }\n        }\n      }\n    })\n    return fields\n  }\n\n  /**\n   * Resolves a source filepath delimited with `/` relative to a specified absolute root filepath.\n   * In relative paths, the special folder name `..` refers to immediate parent directory, and the\n   * name `.` refers to the current directory\n   */\n  $tw.utils.resolvePath = function (sourcepath, rootpath) {\n    // If the source path starts with ./ or ../ then it is relative to the root\n    if (sourcepath.substr(0, 2) === './' || sourcepath.substr(0, 3) === '../') {\n      var src = sourcepath.split('/')\n      var root = rootpath.split('/')\n      // Remove the filename part of the root\n      root.splice(root.length - 1, 1)\n      // Process the source path bit by bit onto the end of the root path\n      while (src.length > 0) {\n        var c = src.shift()\n        if (c === '..') {\n          // Slice off the last root entry for a double dot\n          if (root.length > 0) {\n            root.splice(root.length - 1, 1)\n          }\n        } else if (c !== '.') {\n          // Ignore dots\n          root.push(c) // Copy other elements across\n        }\n      }\n      return root.join('/')\n    } else {\n      // If it isn't relative, just return the path\n      if (rootpath) {\n        var root = rootpath.split('/')\n        // Remove the filename part of the root\n        root.splice(root.length - 1, 1)\n        return root.join('/') + '/' + sourcepath\n      } else {\n        return sourcepath\n      }\n    }\n  }\n\n  /**\n   * Parse a semantic version string into its constituent parts -- see https://semver.org\n   */\n  $tw.utils.parseVersion = function (version) {\n    /*eslint no-useless-escape:\"off\"*/\n    var match = /^v?((\\d+)\\.(\\d+)\\.(\\d+))(?:-([\\dA-Za-z\\-]+(?:\\.[\\dA-Za-z\\-]+)*))?(?:\\+([\\dA-Za-z\\-]+(?:\\.[\\dA-Za-z\\-]+)*))?$/.exec(\n      version\n    )\n    if (match) {\n      return {\n        version: match[1],\n        major: parseInt(match[2], 10),\n        minor: parseInt(match[3], 10),\n        patch: parseInt(match[4], 10),\n        prerelease: match[5],\n        build: match[6]\n      }\n    } else {\n      return null\n    }\n  }\n\n  /**\n   * Returns +1 if the version string A is greater than the version string B, 0 if they are the same, and +1 if B is greater than A.\n   * Missing or malformed version strings are parsed as 0.0.0\n   */\n  $tw.utils.compareVersions = function (versionStringA, versionStringB) {\n    var defaultVersion = {\n      major: 0,\n      minor: 0,\n      patch: 0\n    }\n    var versionA = $tw.utils.parseVersion(versionStringA) || defaultVersion\n    var versionB = $tw.utils.parseVersion(versionStringB) || defaultVersion\n    var diff = [\n      versionA.major - versionB.major,\n      versionA.minor - versionB.minor,\n      versionA.patch - versionB.patch\n    ]\n    if (\n      diff[0] > 0 ||\n      (diff[0] === 0 && diff[1] > 0) ||\n      (diff[0] === 0) & (diff[1] === 0) & (diff[2] > 0)\n    ) {\n      return +1\n    } else if (\n      diff[0] < 0 ||\n      (diff[0] === 0 && diff[1] < 0) ||\n      (diff[0] === 0) & (diff[1] === 0) & (diff[2] < 0)\n    ) {\n      return -1\n    } else {\n      return 0\n    }\n  }\n\n  /**\n   * Returns true if the version string A is greater than the version string B. Returns true if the versions are the same\n   */\n  $tw.utils.checkVersions = function (versionStringA, versionStringB) {\n    return $tw.utils.compareVersions(versionStringA, versionStringB) !== -1\n  }\n\n  /**\n   * Register file type information\n   * options: {flags: flags,deserializerType: deserializerType}\n   * flags:\"image\" for image types\n   * deserializerType: defaults to type if not specified\n   */\n  $tw.utils.registerFileType = function (type, encoding, extension, options) {\n    options = options || {}\n    if ($tw.utils.isArray(extension)) {\n      $tw.utils.each(extension, function (extension) {\n        $tw.config.fileExtensionInfo[extension] = { type: type }\n      })\n      extension = extension[0]\n    } else {\n      $tw.config.fileExtensionInfo[extension] = { type: type }\n    }\n    $tw.config.contentTypeInfo[type] = {\n      encoding: encoding,\n      extension: extension,\n      flags: options.flags || [],\n      deserializerType: options.deserializerType || type\n    }\n  }\n\n  /**\n   * Given an extension, always access the $tw.config.fileExtensionInfo\n   * using a lowercase extension only.\n   */\n  $tw.utils.getFileExtensionInfo = function (ext) {\n    return ext ? $tw.config.fileExtensionInfo[ext.toLowerCase()] : null\n  }\n\n  /**\n   * Given an extension, get the correct encoding for that file.\n   * defaults to utf8\n   */\n  $tw.utils.getTypeEncoding = function (ext) {\n    var extensionInfo = $tw.utils.getFileExtensionInfo(ext)\n    var type = extensionInfo ? extensionInfo.type : null\n    var typeInfo = type ? $tw.config.contentTypeInfo[type] : null\n    return typeInfo ? typeInfo.encoding : 'utf8'\n  }\n\n  /**\n   * Run code globally with specified context variables in scope\n   */\n  $tw.utils.evalGlobal = function (code, context, filename) {\n    var contextCopy = $tw.utils.extend(Object.create(null), context)\n    // Get the context variables as a pair of arrays of names and values\n    var contextNames = []\n    var contextValues = []\n    $tw.utils.each(contextCopy, function (value, name) {\n      contextNames.push(name)\n      contextValues.push(value)\n    })\n    // Add the code prologue and epilogue\n    code =\n      '(function(' +\n      contextNames.join(',') +\n      ') {(function(){\\n' +\n      code +\n      '\\n;})();\\nreturn exports;\\n})\\n'\n    // Compile the code into a function\n    var fn\n    if ($tw.browser) {\n      /*eslint no-eval:\"off\"*/\n      fn = window.eval(code + '\\n\\n//# sourceURL=' + filename)\n    } else {\n      fn = vm.runInThisContext(code, filename)\n    }\n    // Call the function and return the exports\n    return fn.apply(null, contextValues)\n  }\n\n  /*\n   * Run code in a sandbox with only the specified context variables in scope\n   */\n  $tw.utils.evalSandboxed = $tw.browser\n    ? $tw.utils.evalGlobal\n    : function (code, context, filename) {\n        var sandbox = $tw.utils.extend(Object.create(null), context)\n        vm.runInNewContext(code, sandbox, filename)\n        return sandbox.exports\n      }\n\n  /**\n   * Creates a PasswordPrompt object\n   */\n  $tw.utils.PasswordPrompt = function () {\n    // Store of pending password prompts\n    this.passwordPrompts = []\n    // Create the wrapper\n    this.promptWrapper = $tw.utils.domMaker('div', {\n      class: 'tc-password-wrapper'\n    })\n    document.body.appendChild(this.promptWrapper)\n    // Hide the empty wrapper\n    this.setWrapperDisplay()\n  }\n\n  /**\n   * Hides or shows the wrapper depending on whether there are any outstanding prompts\n   */\n  $tw.utils.PasswordPrompt.prototype.setWrapperDisplay = function () {\n    if (this.passwordPrompts.length) {\n      this.promptWrapper.style.display = 'block'\n    } else {\n      this.promptWrapper.style.display = 'none'\n    }\n  }\n\n  /**\n   * Adds a new password prompt. Options are:\n   * submitText: text to use for submit button (defaults to \"Login\")\n   * serviceName: text of the human readable service name\n   * noUserName: set true to disable username prompt\n   * canCancel: set true to enable a cancel button (callback called with null)\n   * repeatPassword: set true to prompt for the password twice\n   * callback: function to be called on submission with parameter of object {username:,password:}.\n   *  Callback must return `true` to remove the password prompt\n   */\n  $tw.utils.PasswordPrompt.prototype.createPrompt = function (options) {\n    // Create and add the prompt to the DOM\n    var self = this\n    var submitText = options.submitText || 'Login'\n    var dm = $tw.utils.domMaker\n    var children = [dm('h1', { text: options.serviceName })]\n    if (!options.noUserName) {\n      children.push(\n        dm('input', {\n          attributes: {\n            type: 'text',\n            name: 'username',\n            placeholder: $tw.language.getString('Encryption/Username')\n          }\n        })\n      )\n    }\n    children.push(\n      dm('input', {\n        attributes: {\n          type: 'password',\n          name: 'password',\n          placeholder:\n            $tw.language === undefined\n              ? 'Password'\n              : $tw.language.getString('Encryption/Password')\n        }\n      })\n    )\n    if (options.repeatPassword) {\n      children.push(\n        dm('input', {\n          attributes: {\n            type: 'password',\n            name: 'password2',\n            placeholder: $tw.language.getString('Encryption/RepeatPassword')\n          }\n        })\n      )\n    }\n    if (options.canCancel) {\n      children.push(\n        dm('button', {\n          text: $tw.language.getString('Encryption/Cancel'),\n          attributes: {\n            type: 'button'\n          },\n          eventListeners: [\n            {\n              name: 'click',\n              handlerFunction: function (event) {\n                self.removePrompt(promptInfo)\n                options.callback(null)\n              }\n            }\n          ]\n        })\n      )\n    }\n    children.push(\n      dm('button', {\n        attributes: { type: 'submit' },\n        text: submitText\n      })\n    )\n    var form = dm('form', {\n      attributes: { autocomplete: 'off' },\n      children: children\n    })\n    this.promptWrapper.appendChild(form)\n    window.setTimeout(function () {\n      form.elements[0].focus()\n    }, 10)\n    // Add a submit event handler\n    var self = this\n    form.addEventListener(\n      'submit',\n      function (event) {\n        // Collect the form data\n        var data = {}\n        $tw.utils.each(form.elements, function (element) {\n          if (element.name && element.value) {\n            data[element.name] = element.value\n          }\n        })\n        // Check that the passwords match\n        if (options.repeatPassword && data.password !== data.password2) {\n          alert($tw.language.getString('Encryption/PasswordNoMatch'))\n        } else {\n          // Call the callback\n          if (options.callback(data)) {\n            // Remove the prompt if the callback returned true\n            self.removePrompt(promptInfo)\n          } else {\n            // Clear the password if the callback returned false\n            $tw.utils.each(form.elements, function (element) {\n              if (element.name === 'password' || element.name === 'password2') {\n                element.value = ''\n              }\n            })\n          }\n        }\n        event.preventDefault()\n        return false\n      },\n      true\n    )\n    // Add the prompt to the list\n    var promptInfo = {\n      serviceName: options.serviceName,\n      callback: options.callback,\n      form: form\n    }\n    this.passwordPrompts.push(promptInfo)\n    // Make sure the wrapper is displayed\n    this.setWrapperDisplay()\n  }\n\n  $tw.utils.PasswordPrompt.prototype.removePrompt = function (promptInfo) {\n    var i = this.passwordPrompts.indexOf(promptInfo)\n    if (i !== -1) {\n      this.passwordPrompts.splice(i, 1)\n      promptInfo.form.parentNode.removeChild(promptInfo.form)\n      this.setWrapperDisplay()\n    }\n  }\n\n  /**\n   * Crypto helper object for encrypted content. It maintains the password text in a closure, and provides methods to change\n   * the password, and to encrypt/decrypt a block of text\n   */\n  $tw.utils.Crypto = function () {\n    var sjcl = $tw.node ? global.sjcl || require('./sjcl.js') : window.sjcl\n    var currentPassword = null\n    var callSjcl = function (method, inputText, password) {\n      password = password || currentPassword\n      var outputText\n      try {\n        if (password) {\n          outputText = sjcl[method](password, inputText)\n        }\n      } catch (ex) {\n        console.log('Crypto error:' + ex)\n        outputText = null\n      }\n      return outputText\n    }\n    this.setPassword = function (newPassword) {\n      currentPassword = newPassword\n      this.updateCryptoStateTiddler()\n    }\n    this.updateCryptoStateTiddler = function () {\n      if ($tw.wiki) {\n        var state = currentPassword ? 'yes' : 'no'\n        var tiddler = $tw.wiki.getTiddler('$:/isEncrypted')\n        if (!tiddler || tiddler.fields.text !== state) {\n          $tw.wiki.addTiddler(\n            new $tw.Tiddler({ title: '$:/isEncrypted', text: state })\n          )\n        }\n      }\n    }\n    this.hasPassword = function () {\n      return !!currentPassword\n    }\n    this.encrypt = function (text, password) {\n      return callSjcl('encrypt', text, password)\n    }\n    this.decrypt = function (text, password) {\n      return callSjcl('decrypt', text, password)\n    }\n  }\n\n  /////////////////////////// Module mechanism\n\n  /**\n   * Execute the module named 'moduleName'. The name can optionally be relative to the module named 'moduleRoot'\n   */\n  $tw.modules.execute = function (moduleName, moduleRoot) {\n    var name = moduleName\n    if (moduleName.charAt(0) === '.') {\n      name = $tw.utils.resolvePath(moduleName, moduleRoot)\n    }\n    if (!$tw.modules.titles[name]) {\n      if ($tw.modules.titles[name + '.js']) {\n        name = name + '.js'\n      } else if ($tw.modules.titles[name + '/index.js']) {\n        name = name + '/index.js'\n      } else if ($tw.modules.titles[moduleName]) {\n        name = moduleName\n      } else if ($tw.modules.titles[moduleName + '.js']) {\n        name = moduleName + '.js'\n      } else if ($tw.modules.titles[moduleName + '/index.js']) {\n        name = moduleName + '/index.js'\n      }\n    }\n    var moduleInfo = $tw.modules.titles[name]\n    var tiddler = $tw.wiki.getTiddler(name)\n    var _exports = {}\n    var sandbox = {\n      module: { exports: _exports },\n      //moduleInfo: moduleInfo,\n      exports: _exports,\n      console: console,\n      setInterval: setInterval,\n      clearInterval: clearInterval,\n      setTimeout: setTimeout,\n      clearTimeout: clearTimeout,\n      Buffer: $tw.browser ? undefined : Buffer,\n      $tw: $tw,\n      require: function (title) {\n        return $tw.modules.execute(title, name)\n      }\n    }\n\n    Object.defineProperty(sandbox.module, 'id', {\n      value: name,\n      writable: false,\n      enumerable: true,\n      configurable: false\n    })\n\n    if (!$tw.browser) {\n      $tw.utils.extend(sandbox, {\n        process: process\n      })\n    } else {\n      /**\n       * CommonJS optional require.main property:\n       * In a browser we offer a fake main module which points back to the boot function\n       * (Theoretically, this may allow TW to eventually load itself as a module in the browser)\n       */\n      Object.defineProperty(sandbox.require, 'main', {\n        value:\n          typeof require !== 'undefined' ? require.main : { TiddlyWiki: _boot },\n        writable: false,\n        enumerable: true,\n        configurable: false\n      })\n    }\n    if (!moduleInfo) {\n      // We could not find the module on this path\n      // Try to defer to browserify etc, or node\n      if ($tw.browser) {\n        if (window.require) {\n          try {\n            return window.require(moduleName)\n          } catch (e) {}\n        }\n        throw new Error(\n          \"Cannot find module named '\" +\n            moduleName +\n            \"' required by module '\" +\n            moduleRoot +\n            \"', resolved to \" +\n            name\n        )\n      } else {\n        // If we don't have a module with that name, let node.js try to find it\n        return require(moduleName)\n      }\n    }\n    // Execute the module if we haven't already done so\n    if (!moduleInfo.exports) {\n      try {\n        // Check the type of the definition\n        if (typeof moduleInfo.definition === 'function') {\n          // Function\n          moduleInfo.exports = _exports\n          moduleInfo.definition(moduleInfo, moduleInfo.exports, sandbox.require)\n        } else if (typeof moduleInfo.definition === 'string') {\n          // String\n          moduleInfo.exports = _exports\n          $tw.utils.evalSandboxed(\n            moduleInfo.definition,\n            sandbox,\n            tiddler.fields.title\n          )\n          if (sandbox.module.exports) {\n            moduleInfo.exports = sandbox.module.exports //more codemirror workaround\n          }\n        } else {\n          // Object\n          moduleInfo.exports = moduleInfo.definition\n        }\n      } catch (e) {\n        if (e instanceof SyntaxError) {\n          var line = e.lineNumber || e.line // Firefox || Safari\n          if (typeof line !== 'undefined' && line !== null) {\n            $tw.utils.error(\n              'Syntax error in boot module ' +\n                name +\n                ':' +\n                line +\n                ':\\n' +\n                e.stack\n            )\n          } else if (!$tw.browser) {\n            // this is the only way to get node.js to display the line at which the syntax error appeared,\n            // and $tw.utils.error would exit anyway\n            // cf. https://bugs.chromium.org/p/v8/issues/detail?id=2589\n            throw e\n          } else {\n            // Opera: line number is included in e.message\n            // Chrome/IE: there's currently no way to get the line number\n            $tw.utils.error(\n              'Syntax error in boot module ' +\n                name +\n                ': ' +\n                e.message +\n                '\\n' +\n                e.stack\n            )\n          }\n        } else {\n          // line number should be included in e.stack for runtime errors\n          $tw.utils.error(\n            'Error executing boot module ' +\n              name +\n              ': ' +\n              JSON.stringify(e) +\n              '\\n\\n' +\n              e.stack\n          )\n        }\n      }\n    }\n    // Return the exports of the module\n    return moduleInfo.exports\n  }\n\n  /**\n   * Apply a callback to each module of a particular type\n   * moduleType: type of modules to enumerate\n   * callback: function called as callback(title,moduleExports) for each module\n   */\n  $tw.modules.forEachModuleOfType = function (moduleType, callback) {\n    var modules = $tw.modules.types[moduleType]\n    $tw.utils.each(modules, function (element, title) {\n      callback(title, $tw.modules.execute(title))\n    })\n  }\n\n  /**\n   * Get all the modules of a particular type in a hashmap by their `name` field\n   */\n  $tw.modules.getModulesByTypeAsHashmap = function (moduleType, nameField) {\n    nameField = nameField || 'name'\n    var results = Object.create(null)\n    $tw.modules.forEachModuleOfType(moduleType, function (title, module) {\n      results[module[nameField]] = module\n    })\n    return results\n  }\n\n  /**\n   * Apply the exports of the modules of a particular type to a target object\n   */\n  $tw.modules.applyMethods = function (moduleType, targetObject) {\n    if (!targetObject) {\n      targetObject = Object.create(null)\n    }\n    $tw.modules.forEachModuleOfType(moduleType, function (title, module) {\n      $tw.utils.each(module, function (element, title, object) {\n        targetObject[title] = module[title]\n      })\n    })\n    return targetObject\n  }\n\n  /**\n   * Return an array of classes created from the modules of a specified type. Each module should export the properties to be added to those of the optional base class\n   */\n  $tw.modules.createClassesFromModules = function (\n    moduleType,\n    subType,\n    baseClass\n  ) {\n    var classes = Object.create(null)\n    $tw.modules.forEachModuleOfType(moduleType, function (\n      title,\n      moduleExports\n    ) {\n      if (!subType || moduleExports.types[subType]) {\n        var newClass = function () {}\n        if (baseClass) {\n          /*eslint new-cap:\"off\"*/\n          newClass.prototype = new baseClass()\n          newClass.prototype.constructor = baseClass\n        }\n        $tw.utils.extend(newClass.prototype, moduleExports)\n        classes[moduleExports.name] = newClass\n      }\n    })\n    return classes\n  }\n\n  /////////////////////////// Barebones tiddler object\n\n  /**\n   * Construct a tiddler object from a hashmap of tiddler fields. If multiple hasmaps are provided they are merged,\n   * taking precedence to the right\n   */\n  $tw.Tiddler = function (/* [fields,] fields */) {\n    this.fields = Object.create(null)\n    this.cache = Object.create(null)\n    for (var c = 0; c < arguments.length; c++) {\n      var arg = arguments[c]\n      var src = arg instanceof $tw.Tiddler ? arg.fields : arg\n      for (var t in src) {\n        if (src[t] === undefined || src[t] === null) {\n          if (t in this.fields) {\n            delete this.fields[t] // If we get a field that's undefined, delete any previous field value\n          }\n        } else {\n          // Parse the field with the associated field module (if any)\n          var fieldModule = $tw.Tiddler.fieldModules[t]\n          var value\n          if (fieldModule && fieldModule.parse) {\n            value = fieldModule.parse.call(this, src[t])\n          } else {\n            value = src[t]\n          }\n          // Freeze the field to keep it immutable\n          if (value != null && typeof value === 'object') {\n            Object.freeze(value)\n          }\n          this.fields[t] = value\n        }\n      }\n    }\n    // Freeze the tiddler against modification\n    Object.freeze(this.fields)\n    Object.freeze(this)\n  }\n\n  $tw.Tiddler.prototype.hasField = function (field) {\n    return $tw.utils.hop(this.fields, field)\n  }\n\n  /**\n   * Compare two tiddlers for equality\n   * tiddler: the tiddler to compare\n   * excludeFields: array of field names to exclude from the comparison\n   */\n  $tw.Tiddler.prototype.isEqual = function (tiddler, excludeFields) {\n    if (!(tiddler instanceof $tw.Tiddler)) {\n      return false\n    }\n    excludeFields = excludeFields || []\n    var self = this\n    var differences = [] // Fields that have differences\n    // Add to the differences array\n    function addDifference (fieldName) {\n      // Check for this field being excluded\n      if (excludeFields.indexOf(fieldName) === -1) {\n        // Save the field as a difference\n        $tw.utils.pushTop(differences, fieldName)\n      }\n    }\n    // Returns true if the two values of this field are equal\n    function isFieldValueEqual (fieldName) {\n      var valueA = self.fields[fieldName]\n      var valueB = tiddler.fields[fieldName]\n      // Check for identical string values\n      if (\n        typeof valueA === 'string' &&\n        typeof valueB === 'string' &&\n        valueA === valueB\n      ) {\n        return true\n      }\n      // Check for identical array values\n      if (\n        $tw.utils.isArray(valueA) &&\n        $tw.utils.isArray(valueB) &&\n        $tw.utils.isArrayEqual(valueA, valueB)\n      ) {\n        return true\n      }\n      // Check for identical date values\n      if (\n        $tw.utils.isDate(valueA) &&\n        $tw.utils.isDate(valueB) &&\n        valueA.getTime() === valueB.getTime()\n      ) {\n        return true\n      }\n      // Otherwise the fields must be different\n      return false\n    }\n    // Compare our fields\n    for (var fieldName in this.fields) {\n      if (!isFieldValueEqual(fieldName)) {\n        addDifference(fieldName)\n      }\n    }\n    // There's a difference for every field in the other tiddler that we don't have\n    for (fieldName in tiddler.fields) {\n      if (!(fieldName in this.fields)) {\n        addDifference(fieldName)\n      }\n    }\n    // Return whether there were any differences\n    return differences.length === 0\n  }\n\n  /**\n   * Register and install the built in tiddler field modules\n   */\n  $tw.modules.define('$:/boot/tiddlerfields/modified', 'tiddlerfield', {\n    name: 'modified',\n    parse: $tw.utils.parseDate,\n    stringify: $tw.utils.stringifyDate\n  })\n  $tw.modules.define('$:/boot/tiddlerfields/created', 'tiddlerfield', {\n    name: 'created',\n    parse: $tw.utils.parseDate,\n    stringify: $tw.utils.stringifyDate\n  })\n  $tw.modules.define('$:/boot/tiddlerfields/color', 'tiddlerfield', {\n    name: 'color',\n    editTag: 'input',\n    editType: 'color'\n  })\n  $tw.modules.define('$:/boot/tiddlerfields/tags', 'tiddlerfield', {\n    name: 'tags',\n    parse: $tw.utils.parseStringArray,\n    stringify: $tw.utils.stringifyList\n  })\n  $tw.modules.define('$:/boot/tiddlerfields/list', 'tiddlerfield', {\n    name: 'list',\n    parse: $tw.utils.parseStringArray,\n    stringify: $tw.utils.stringifyList\n  })\n\n  /////////////////////////// Barebones wiki store\n\n  /**\n   * Wiki constructor. State is stored in private members that only a small number of privileged accessor methods have direct access.\n   * Methods added via the prototype have to use these accessors and cannot access the state data directly.\n   * options include:\n   * enableIndexers - Array of indexer names to enable, or null to use all available indexers\n   */\n  $tw.Wiki = function (options) {\n    options = options || {}\n    var tiddlers = Object.create(null) // Hashmap of tiddlers\n    var tiddlerTitles = null // Array of tiddler titles\n    var getTiddlerTitles = function () {\n      if (!tiddlerTitles) {\n        tiddlerTitles = Object.keys(tiddlers)\n      }\n      return tiddlerTitles\n    }\n    var pluginTiddlers = [] // Array of tiddlers containing registered plugins, ordered by priority\n    var pluginInfo = Object.create(null) // Hashmap of parsed plugin content\n    var shadowTiddlers = Object.create(null) // Hashmap by title of {source:, tiddler:}\n    var shadowTiddlerTitles = null\n    var getShadowTiddlerTitles = function () {\n      if (!shadowTiddlerTitles) {\n        shadowTiddlerTitles = Object.keys(shadowTiddlers)\n      }\n      return shadowTiddlerTitles\n    }\n    var enableIndexers = options.enableIndexers || null\n    var indexers = []\n    var indexersByName = Object.create(null)\n\n    this.addIndexer = function (indexer, name) {\n      // Bail if this indexer is not enabled\n      if (enableIndexers && enableIndexers.indexOf(name) === -1) {\n        return\n      }\n      indexers.push(indexer)\n      indexersByName[name] = indexer\n      indexer.init()\n    }\n\n    this.getIndexer = function (name) {\n      return indexersByName[name] || null\n    }\n\n    // Add a tiddler to the store\n    this.addTiddler = function (tiddler) {\n      if (!(tiddler instanceof $tw.Tiddler)) {\n        tiddler = new $tw.Tiddler(tiddler)\n      }\n      // Save the tiddler\n      if (tiddler) {\n        var title = tiddler.fields.title\n        if (title) {\n          // Uncomment the following line for detailed logs of all tiddler writes\n          // console.log(\"Adding\",title,tiddler)\n          // Record the old tiddler state\n          var updateDescriptor = {\n            old: {\n              tiddler: this.getTiddler(title),\n              shadow: this.isShadowTiddler(title),\n              exists: this.tiddlerExists(title)\n            }\n          }\n          // Save the new tiddler\n          tiddlers[title] = tiddler\n          // Check we've got it's title\n          if (tiddlerTitles && tiddlerTitles.indexOf(title) === -1) {\n            tiddlerTitles.push(title)\n          }\n          // Record the new tiddler state\n          updateDescriptor.new = {\n            tiddler: tiddler,\n            shadow: this.isShadowTiddler(title),\n            exists: this.tiddlerExists(title)\n          }\n          // Update indexes\n          this.clearCache(title)\n          this.clearGlobalCache()\n          $tw.utils.each(indexers, function (indexer) {\n            indexer.update(updateDescriptor)\n          })\n          // Queue a change event\n          this.enqueueTiddlerEvent(title)\n        }\n      }\n    }\n\n    // Delete a tiddler\n    this.deleteTiddler = function (title) {\n      // Uncomment the following line for detailed logs of all tiddler deletions\n      // console.log(\"Deleting\",title)\n      if ($tw.utils.hop(tiddlers, title)) {\n        // Record the old tiddler state\n        var updateDescriptor = {\n          old: {\n            tiddler: this.getTiddler(title),\n            shadow: this.isShadowTiddler(title),\n            exists: this.tiddlerExists(title)\n          }\n        }\n        // Delete the tiddler\n        delete tiddlers[title]\n        // Delete it from the list of titles\n        if (tiddlerTitles) {\n          var index = tiddlerTitles.indexOf(title)\n          if (index !== -1) {\n            tiddlerTitles.splice(index, 1)\n          }\n        }\n        // Record the new tiddler state\n        updateDescriptor.new = {\n          tiddler: this.getTiddler(title),\n          shadow: this.isShadowTiddler(title),\n          exists: this.tiddlerExists(title)\n        }\n        // Update indexes\n        this.clearCache(title)\n        this.clearGlobalCache()\n        $tw.utils.each(indexers, function (indexer) {\n          indexer.update(updateDescriptor)\n        })\n        // Queue a change event\n        this.enqueueTiddlerEvent(title, true)\n      }\n    }\n\n    // Get a tiddler from the store\n    this.getTiddler = function (title) {\n      if (title) {\n        var t = tiddlers[title]\n        if (t instanceof $tw.Tiddler) {\n          return t\n        } else if (title !== undefined && shadowTiddlers[title]) {\n          return shadowTiddlers[title].tiddler\n        }\n        return undefined\n      }\n    }\n\n    // Get an array of all tiddler titles\n    this.allTitles = function () {\n      return getTiddlerTitles().slice(0)\n    }\n\n    // Iterate through all tiddler titles\n    this.each = function (callback) {\n      var titles = getTiddlerTitles()\n      var index\n      var titlesLength\n      var title\n      for (\n        index = 0, titlesLength = titles.length;\n        index < titlesLength;\n        index++\n      ) {\n        title = titles[index]\n        callback(tiddlers[title], title)\n      }\n    }\n\n    // Get an array of all shadow tiddler titles\n    this.allShadowTitles = function () {\n      return getShadowTiddlerTitles().slice(0)\n    }\n\n    // Iterate through all shadow tiddler titles\n    this.eachShadow = function (callback) {\n      var titles = getShadowTiddlerTitles()\n      var index\n      var titlesLength\n      var title\n      for (\n        index = 0, titlesLength = titles.length;\n        index < titlesLength;\n        index++\n      ) {\n        title = titles[index]\n        var shadowInfo = shadowTiddlers[title]\n        callback(shadowInfo.tiddler, title)\n      }\n    }\n\n    // Iterate through all tiddlers and then the shadows\n    this.eachTiddlerPlusShadows = function (callback) {\n      var index\n      var titlesLength\n      var title\n      var titles = getTiddlerTitles()\n      for (\n        index = 0, titlesLength = titles.length;\n        index < titlesLength;\n        index++\n      ) {\n        title = titles[index]\n        callback(tiddlers[title], title)\n      }\n      titles = getShadowTiddlerTitles()\n      for (\n        index = 0, titlesLength = titles.length;\n        index < titlesLength;\n        index++\n      ) {\n        title = titles[index]\n        if (!tiddlers[title]) {\n          var shadowInfo = shadowTiddlers[title]\n          callback(shadowInfo.tiddler, title)\n        }\n      }\n    }\n\n    // Iterate through all the shadows and then the tiddlers\n    this.eachShadowPlusTiddlers = function (callback) {\n      var index\n      var titlesLength\n      var title\n      var titles = getShadowTiddlerTitles()\n      for (\n        index = 0, titlesLength = titles.length;\n        index < titlesLength;\n        index++\n      ) {\n        title = titles[index]\n        if (tiddlers[title]) {\n          callback(tiddlers[title], title)\n        } else {\n          var shadowInfo = shadowTiddlers[title]\n          callback(shadowInfo.tiddler, title)\n        }\n      }\n      titles = getTiddlerTitles()\n      for (\n        index = 0, titlesLength = titles.length;\n        index < titlesLength;\n        index++\n      ) {\n        title = titles[index]\n        if (!shadowTiddlers[title]) {\n          callback(tiddlers[title], title)\n        }\n      }\n    }\n\n    // Test for the existence of a tiddler (excludes shadow tiddlers)\n    this.tiddlerExists = function (title) {\n      return !!$tw.utils.hop(tiddlers, title)\n    }\n\n    // Determines if a tiddler is a shadow tiddler, regardless of whether it has been overridden by a real tiddler\n    this.isShadowTiddler = function (title) {\n      return $tw.utils.hop(shadowTiddlers, title)\n    }\n\n    this.getShadowSource = function (title) {\n      if ($tw.utils.hop(shadowTiddlers, title)) {\n        return shadowTiddlers[title].source\n      }\n      return null\n    }\n\n    // Get an array of all the currently recognised plugin types\n    this.getPluginTypes = function () {\n      var types = []\n      $tw.utils.each(pluginTiddlers, function (pluginTiddler) {\n        var pluginType = pluginTiddler.fields['plugin-type']\n        if (pluginType && types.indexOf(pluginType) === -1) {\n          types.push(pluginType)\n        }\n      })\n      return types\n    }\n\n    // Read plugin info for all plugins, or just an array of titles. Returns the number of plugins updated or deleted\n    this.readPluginInfo = function (titles) {\n      var results = {\n        modifiedPlugins: [],\n        deletedPlugins: []\n      }\n      $tw.utils.each(titles || getTiddlerTitles(), function (title) {\n        var tiddler = tiddlers[title]\n        if (tiddler) {\n          if (\n            tiddler.fields.type === 'application/json' &&\n            tiddler.hasField('plugin-type')\n          ) {\n            pluginInfo[tiddler.fields.title] = JSON.parse(tiddler.fields.text)\n            results.modifiedPlugins.push(tiddler.fields.title)\n          }\n        } else {\n          if (pluginInfo[title]) {\n            delete pluginInfo[title]\n            results.deletedPlugins.push(title)\n          }\n        }\n      })\n      return results\n    }\n\n    // Get plugin info for a plugin\n    this.getPluginInfo = function (title) {\n      return pluginInfo[title]\n    }\n\n    // Register the plugin tiddlers of a particular type, or null/undefined for any type, optionally restricting registration to an array of tiddler titles. Return the array of titles affected\n    this.registerPluginTiddlers = function (pluginType, titles) {\n      var self = this\n      var registeredTitles = []\n      var checkTiddler = function (tiddler, title) {\n        if (\n          tiddler &&\n          tiddler.fields.type === 'application/json' &&\n          tiddler.fields['plugin-type'] &&\n          (!pluginType || tiddler.fields['plugin-type'] === pluginType)\n        ) {\n          var disablingTiddler = self.getTiddler(\n            '$:/config/Plugins/Disabled/' + title\n          )\n          if (\n            title === '$:/core' ||\n            !disablingTiddler ||\n            (disablingTiddler.fields.text || '').trim() !== 'yes'\n          ) {\n            self.unregisterPluginTiddlers(null, [title]) // Unregister the plugin if it's already registered\n            pluginTiddlers.push(tiddler)\n            registeredTitles.push(tiddler.fields.title)\n          }\n        }\n      }\n      if (titles) {\n        $tw.utils.each(titles, function (title) {\n          checkTiddler(self.getTiddler(title), title)\n        })\n      } else {\n        this.each(function (tiddler, title) {\n          checkTiddler(tiddler, title)\n        })\n      }\n      return registeredTitles\n    }\n\n    // Unregister the plugin tiddlers of a particular type, or null/undefined for any type, optionally restricting unregistering to an array of tiddler titles. Returns an array of the titles affected\n    this.unregisterPluginTiddlers = function (pluginType, titles) {\n      var unregisteredTitles = []\n      // Remove any previous registered plugins of this type\n      for (var t = pluginTiddlers.length - 1; t >= 0; t--) {\n        var tiddler = pluginTiddlers[t]\n        if (\n          tiddler.fields['plugin-type'] &&\n          (!pluginType || tiddler.fields['plugin-type'] === pluginType) &&\n          (!titles || titles.indexOf(tiddler.fields.title) !== -1)\n        ) {\n          unregisteredTitles.push(tiddler.fields.title)\n          pluginTiddlers.splice(t, 1)\n        }\n      }\n      return unregisteredTitles\n    }\n\n    // Unpack the currently registered plugins, creating shadow tiddlers for their constituent tiddlers\n    this.unpackPluginTiddlers = function () {\n      // Sort the plugin titles by the `plugin-priority` field\n      pluginTiddlers.sort(function (a, b) {\n        if ('plugin-priority' in a.fields && 'plugin-priority' in b.fields) {\n          return a.fields['plugin-priority'] - b.fields['plugin-priority']\n        } else if ('plugin-priority' in a.fields) {\n          return -1\n        } else if ('plugin-priority' in b.fields) {\n          return +1\n        } else if (a.fields.title < b.fields.title) {\n          return -1\n        } else if (a.fields.title === b.fields.title) {\n          return 0\n        } else {\n          return +1\n        }\n      })\n      // Now go through the plugins in ascending order and assign the shadows\n      shadowTiddlers = Object.create(null)\n      $tw.utils.each(pluginTiddlers, function (tiddler) {\n        // Extract the constituent tiddlers\n        if ($tw.utils.hop(pluginInfo, tiddler.fields.title)) {\n          $tw.utils.each(pluginInfo[tiddler.fields.title].tiddlers, function (\n            constituentTiddler,\n            constituentTitle\n          ) {\n            // Save the tiddler object\n            if (constituentTitle) {\n              shadowTiddlers[constituentTitle] = {\n                source: tiddler.fields.title,\n                tiddler: new $tw.Tiddler(constituentTiddler, {\n                  title: constituentTitle\n                })\n              }\n            }\n          })\n        }\n      })\n      shadowTiddlerTitles = null\n      this.clearCache(null)\n      this.clearGlobalCache()\n      $tw.utils.each(indexers, function (indexer) {\n        indexer.rebuild()\n      })\n    }\n\n    if (this.addIndexersToWiki) {\n      this.addIndexersToWiki()\n    }\n  }\n\n  // Dummy methods that will be filled in after boot\n  $tw.Wiki.prototype.clearCache = $tw.Wiki.prototype.clearGlobalCache = $tw.Wiki.prototype.enqueueTiddlerEvent = function () {}\n\n  // Add an array of tiddlers\n  $tw.Wiki.prototype.addTiddlers = function (tiddlers) {\n    for (var t = 0; t < tiddlers.length; t++) {\n      this.addTiddler(tiddlers[t])\n    }\n  }\n\n  /**\n   * Define all modules stored in ordinary tiddlers\n   */\n  $tw.Wiki.prototype.defineTiddlerModules = function () {\n    this.each(function (tiddler, title) {\n      if (tiddler.hasField('module-type')) {\n        switch (tiddler.fields.type) {\n          case 'application/javascript':\n            // We only define modules that haven't already been defined, because in the browser modules in system tiddlers are defined in inline script\n            if (!$tw.utils.hop($tw.modules.titles, tiddler.fields.title)) {\n              $tw.modules.define(\n                tiddler.fields.title,\n                tiddler.fields['module-type'],\n                tiddler.fields.text\n              )\n            }\n            break\n          case 'application/json':\n            $tw.modules.define(\n              tiddler.fields.title,\n              tiddler.fields['module-type'],\n              JSON.parse(tiddler.fields.text)\n            )\n            break\n          case 'application/x-tiddler-dictionary':\n            $tw.modules.define(\n              tiddler.fields.title,\n              tiddler.fields['module-type'],\n              $tw.utils.parseFields(tiddler.fields.text)\n            )\n            break\n        }\n      }\n    })\n  }\n\n  /**\n   * Register all the module tiddlers that have a module type\n   */\n  $tw.Wiki.prototype.defineShadowModules = function () {\n    var self = this\n    this.eachShadow(function (tiddler, title) {\n      // Don't define the module if it is overidden by an ordinary tiddler\n      if (!self.tiddlerExists(title) && tiddler.hasField('module-type')) {\n        // Define the module\n        $tw.modules.define(\n          tiddler.fields.title,\n          tiddler.fields['module-type'],\n          tiddler.fields.text\n        )\n      }\n    })\n  }\n\n  /**\n   * Enable safe mode by deleting any tiddlers that override a shadow tiddler\n   */\n  $tw.Wiki.prototype.processSafeMode = function () {\n    var self = this\n    var overrides = []\n    // Find the overriding tiddlers\n    this.each(function (tiddler, title) {\n      if (self.isShadowTiddler(title)) {\n        console.log(title)\n        overrides.push(title)\n      }\n    })\n    // Assemble a report tiddler\n    var titleReportTiddler = 'TiddlyWiki Safe Mode'\n    var report = []\n    report.push(\n      'TiddlyWiki has been started in [[safe mode|https://tiddlywiki.com/static/SafeMode.html]]. All plugins are temporarily disabled. Most customisations have been disabled by renaming the following tiddlers:'\n    )\n    // Delete the overrides\n    overrides.forEach(function (title) {\n      var tiddler = self.getTiddler(title)\n      var newTitle = 'SAFE: ' + title\n      self.deleteTiddler(title)\n      self.addTiddler(new $tw.Tiddler(tiddler, { title: newTitle }))\n      report.push('* [[' + title + '|' + newTitle + ']]')\n    })\n    report.push()\n    this.addTiddler(\n      new $tw.Tiddler({ title: titleReportTiddler, text: report.join('\\n\\n') })\n    )\n    // Set $:/DefaultTiddlers to point to our report\n    this.addTiddler(\n      new $tw.Tiddler({\n        title: '$:/DefaultTiddlers',\n        text: '[[' + titleReportTiddler + ']]'\n      })\n    )\n  }\n\n  /**\n   * Extracts tiddlers from a typed block of text, specifying default field values\n   */\n  $tw.Wiki.prototype.deserializeTiddlers = function (\n    type,\n    text,\n    srcFields,\n    options\n  ) {\n    srcFields = srcFields || Object.create(null)\n    options = options || {}\n    var deserializer = $tw.Wiki.tiddlerDeserializerModules[options.deserializer]\n    var fields = Object.create(null)\n    if (!deserializer) {\n      deserializer = $tw.Wiki.tiddlerDeserializerModules[type]\n    }\n    if (!deserializer && $tw.utils.getFileExtensionInfo(type)) {\n      // If we didn't find the serializer, try converting it from an extension to a content type\n      type = $tw.utils.getFileExtensionInfo(type).type\n      deserializer = $tw.Wiki.tiddlerDeserializerModules[type]\n    }\n    if (!deserializer && $tw.config.contentTypeInfo[type]) {\n      // see if this type has a different deserializer registered with it\n      type = $tw.config.contentTypeInfo[type].deserializerType\n      deserializer = $tw.Wiki.tiddlerDeserializerModules[type]\n    }\n    if (!deserializer) {\n      // If we still don't have a deserializer, treat it as plain text\n      deserializer = $tw.Wiki.tiddlerDeserializerModules['text/plain']\n    }\n    for (var f in srcFields) {\n      fields[f] = srcFields[f]\n    }\n    if (deserializer) {\n      return deserializer.call(this, text, fields, type)\n    } else {\n      // Return a raw tiddler for unknown types\n      fields.text = text\n      return [fields]\n    }\n  }\n\n  /**\n   * Register the built in tiddler deserializer modules\n   */\n  var deserializeHeaderComment = function (text, fields) {\n    var headerCommentRegExp = new RegExp(\n      $tw.config.jsModuleHeaderRegExpString,\n      'mg'\n    )\n    var match = headerCommentRegExp.exec(text)\n    fields.text = text\n    if (match) {\n      fields = $tw.utils.parseFields(match[1].split(/\\r?\\n\\r?\\n/gm)[0], fields)\n    }\n    return [fields]\n  }\n  $tw.modules.define('$:/boot/tiddlerdeserializer/js', 'tiddlerdeserializer', {\n    'application/javascript': deserializeHeaderComment\n  })\n  $tw.modules.define('$:/boot/tiddlerdeserializer/css', 'tiddlerdeserializer', {\n    'text/css': deserializeHeaderComment\n  })\n  $tw.modules.define('$:/boot/tiddlerdeserializer/tid', 'tiddlerdeserializer', {\n    'application/x-tiddler': function (text, fields) {\n      var split = text.split(/\\r?\\n\\r?\\n/gm)\n      if (split.length >= 1) {\n        fields = $tw.utils.parseFields(split[0], fields)\n      }\n      if (split.length >= 2) {\n        fields.text = split.slice(1).join('\\n\\n')\n      }\n      return [fields]\n    }\n  })\n  $tw.modules.define(\n    '$:/boot/tiddlerdeserializer/tids',\n    'tiddlerdeserializer',\n    {\n      'application/x-tiddlers': function (text, fields) {\n        var titles = []\n        var tiddlers = []\n        var match = /\\r?\\n\\r?\\n/gm.exec(text)\n        if (match) {\n          fields = $tw.utils.parseFields(text.substr(0, match.index), fields)\n          var lines = text\n            .substr(match.index + match[0].length)\n            .split(/\\r?\\n/gm)\n          for (var t = 0; t < lines.length; t++) {\n            var line = lines[t]\n            if (line.charAt(0) !== '#') {\n              var colonPos = line.indexOf(':')\n              if (colonPos !== -1) {\n                var tiddler = $tw.utils.extend(Object.create(null), fields)\n                tiddler.title =\n                  (tiddler.title || '') + line.substr(0, colonPos).trim()\n                if (titles.indexOf(tiddler.title) !== -1) {\n                  console.log(\n                    'Warning: .multids file contains multiple definitions for ' +\n                      tiddler.title\n                  )\n                }\n                titles.push(tiddler.title)\n                tiddler.text = line.substr(colonPos + 2).trim()\n                tiddlers.push(tiddler)\n              }\n            }\n          }\n        }\n        return tiddlers\n      }\n    }\n  )\n  $tw.modules.define('$:/boot/tiddlerdeserializer/txt', 'tiddlerdeserializer', {\n    'text/plain': function (text, fields, type) {\n      fields.text = text\n      fields.type = type || 'text/plain'\n      return [fields]\n    }\n  })\n  $tw.modules.define(\n    '$:/boot/tiddlerdeserializer/html',\n    'tiddlerdeserializer',\n    {\n      'text/html': function (text, fields) {\n        fields.text = text\n        fields.type = 'text/html'\n        return [fields]\n      }\n    }\n  )\n  $tw.modules.define(\n    '$:/boot/tiddlerdeserializer/json',\n    'tiddlerdeserializer',\n    {\n      'application/json': function (text, fields) {\n        var isTiddlerValid = function (data) {\n          // Not valid if it's not an object with a title property\n          if (typeof data !== 'object' || !$tw.utils.hop(data, 'title')) {\n            return false\n          }\n          for (var f in data) {\n            if ($tw.utils.hop(data, f)) {\n              // Check field name doesn't contain whitespace or control characters\n              /*eslint no-control-regex:\"off\"*/\n              if (typeof data[f] !== 'string' || /[\\x00-\\x1F\\s]/.test(f)) {\n                return false\n              }\n            }\n          }\n          return true\n        }\n        var isTiddlerArrayValid = function (data) {\n          for (var t = 0; t < data.length; t++) {\n            if (!isTiddlerValid(data[t])) {\n              return false\n            }\n          }\n          return true\n        }\n        var data = JSON.parse(text)\n        if ($tw.utils.isArray(data) && isTiddlerArrayValid(data)) {\n          return data\n        } else if (isTiddlerValid(data)) {\n          return [data]\n        } else {\n          // Plain JSON file\n          fields.text = text\n          fields.type = 'application/json'\n          return [fields]\n        }\n      }\n    }\n  )\n\n  /////////////////////////// Browser definitions\n\n  if ($tw.browser && !$tw.node) {\n    /**\n     * Decrypt any tiddlers stored within the element with the ID \"encryptedArea\".\n     * The function is asynchronous to allow the user to be prompted for a password\n     * callback: function to be called the decryption is complete\n     */\n    $tw.boot.decryptEncryptedTiddlers = function (callback) {\n      var encryptedArea = document.getElementById('encryptedStoreArea')\n      if (encryptedArea) {\n        var encryptedText = encryptedArea.innerHTML\n        var prompt = 'Enter a password to decrypt this TiddlyWiki'\n        // Prompt for the password\n        if ($tw.utils.hop($tw.boot, 'encryptionPrompts')) {\n          prompt = $tw.boot.encryptionPrompts.decrypt\n        }\n        $tw.passwordPrompt.createPrompt({\n          serviceName: prompt,\n          noUserName: true,\n          submitText: 'Decrypt',\n          callback: function (data) {\n            // Attempt to decrypt the tiddlers\n            $tw.crypto.setPassword(data.password)\n            var decryptedText = $tw.crypto.decrypt(encryptedText)\n            if (decryptedText) {\n              var json = JSON.parse(decryptedText)\n              for (var title in json) {\n                $tw.preloadTiddler(json[title])\n              }\n              // Call the callback\n              callback()\n              // Exit and remove the password prompt\n              return true\n            } else {\n              // We didn't decrypt everything, so continue to prompt for password\n              return false\n            }\n          }\n        })\n      } else {\n        // Just invoke the callback straight away if there weren't any encrypted tiddlers\n        callback()\n      }\n    }\n\n    /**\n     * Register a deserializer that can extract tiddlers from the DOM\n     */\n    $tw.modules.define(\n      '$:/boot/tiddlerdeserializer/dom',\n      'tiddlerdeserializer',\n      {\n        '(DOM)': function (node) {\n          var extractTextTiddlers = function (node) {\n            var e = node.firstChild\n            while (e && e.nodeName.toLowerCase() !== 'pre') {\n              e = e.nextSibling\n            }\n            var title = node.getAttribute ? node.getAttribute('title') : null\n            if (e && title) {\n              var attrs = node.attributes\n              var tiddler = {\n                text: $tw.utils.htmlDecode(e.innerHTML)\n              }\n              for (var i = attrs.length - 1; i >= 0; i--) {\n                tiddler[attrs[i].name] = attrs[i].value\n              }\n              return [tiddler]\n            } else {\n              return null\n            }\n          }\n          var extractModuleTiddlers = function (node) {\n            if (node.hasAttribute && node.hasAttribute('data-tiddler-title')) {\n              var text = node.innerHTML\n              var s = text.indexOf('{')\n              var e = text.lastIndexOf('}')\n              if (node.hasAttribute('data-module') && s !== -1 && e !== -1) {\n                text = text.substring(s + 1, e)\n              }\n              var fields = { text: text }\n              var attributes = node.attributes\n              for (var a = 0; a < attributes.length; a++) {\n                if (attributes[a].nodeName.substr(0, 13) === 'data-tiddler-') {\n                  fields[attributes[a].nodeName.substr(13)] =\n                    attributes[a].value\n                }\n              }\n              return [fields]\n            } else {\n              return null\n            }\n          }\n          var t\n          var result = []\n          if (node) {\n            for (t = 0; t < node.childNodes.length; t++) {\n              var childNode = node.childNodes[t]\n              var tiddlers = extractTextTiddlers(childNode)\n              tiddlers = tiddlers || extractModuleTiddlers(childNode)\n              if (tiddlers) {\n                result.push.apply(result, tiddlers)\n              }\n            }\n          }\n          return result\n        }\n      }\n    )\n\n    $tw.loadTiddlersBrowser = function () {\n      // In the browser, we load tiddlers from certain elements\n      var containerIds = [\n        'libraryModules',\n        'modules',\n        'bootKernelPrefix',\n        'bootKernel',\n        'styleArea',\n        'storeArea',\n        'systemArea'\n      ]\n      for (var t = 0; t < containerIds.length; t++) {\n        $tw.wiki.addTiddlers(\n          $tw.wiki.deserializeTiddlers(\n            '(DOM)',\n            document.getElementById(containerIds[t])\n          )\n        )\n      }\n    }\n  } else {\n    /////////////////////////// Server definitions\n\n    /**\n     * Get any encrypted tiddlers\n     */\n    $tw.boot.decryptEncryptedTiddlers = function (callback) {\n      // Storing encrypted tiddlers on the server isn't supported yet\n      callback()\n    }\n  } // End of if($tw.browser && !$tw.node)\n\n  /////////////////////////// Node definitions\n\n  if ($tw.node) {\n    /**\n     * Load the tiddlers contained in a particular file (and optionally extract fields from the accompanying .meta file)\n     * returned as {filepath:,type:,tiddlers:[],hasMetaFile:}\n     */\n    $tw.loadTiddlersFromFile = function (filepath, fields) {\n      var ext = path.extname(filepath)\n      var extensionInfo = $tw.utils.getFileExtensionInfo(ext)\n      var type = extensionInfo ? extensionInfo.type : null\n      var typeInfo = type ? $tw.config.contentTypeInfo[type] : null\n      var data = fs.readFileSync(\n        filepath,\n        typeInfo ? typeInfo.encoding : 'utf8'\n      )\n      var tiddlers = $tw.wiki.deserializeTiddlers(ext, data, fields)\n      var metadata = $tw.loadMetadataForFile(filepath)\n      if (metadata) {\n        if (type === 'application/json') {\n          tiddlers = [{ text: data, type: 'application/json' }]\n        }\n        tiddlers = [$tw.utils.extend({}, tiddlers[0], metadata)]\n      }\n      return {\n        filepath: filepath,\n        type: type,\n        tiddlers: tiddlers,\n        hasMetaFile: !!metadata\n      }\n    }\n\n    /**\n     * Load the metadata fields in the .meta file corresponding to a particular file\n     */\n    $tw.loadMetadataForFile = function (filepath) {\n      var metafilename = filepath + '.meta'\n      if (fs.existsSync(metafilename)) {\n        return $tw.utils.parseFields(\n          fs.readFileSync(metafilename, 'utf8') || ''\n        )\n      } else {\n        return null\n      }\n    }\n\n    /**\n     * A default set of files for TiddlyWiki to ignore during load.\n     * This matches what NPM ignores, and adds \"*.meta\" to ignore tiddler\n     * metadata files.\n     */\n    $tw.boot.excludeRegExp = /^\\.DS_Store$|^.*\\.meta$|^\\..*\\.swp$|^\\._.*$|^\\.git$|^\\.hg$|^\\.lock-wscript$|^\\.svn$|^\\.wafpickle-.*$|^CVS$|^npm-debug\\.log$/\n\n    /**\n     * Load all the tiddlers recursively from a directory, including honouring `tiddlywiki.files` files for drawing in external files. Returns an array of {filepath:,type:,tiddlers: [{..fields...}],hasMetaFile:}. Note that no file information is returned for externally loaded tiddlers, just the `tiddlers` property.\n     */\n    $tw.loadTiddlersFromPath = function (filepath, excludeRegExp) {\n      excludeRegExp = excludeRegExp || $tw.boot.excludeRegExp\n      var tiddlers = []\n      if (fs.existsSync(filepath)) {\n        var stat = fs.statSync(filepath)\n        if (stat.isDirectory()) {\n          var files = fs.readdirSync(filepath)\n          // Look for a tiddlywiki.files file\n          if (files.indexOf('tiddlywiki.files') !== -1) {\n            Array.prototype.push.apply(\n              tiddlers,\n              $tw.loadTiddlersFromSpecification(filepath, excludeRegExp)\n            )\n          } else {\n            // If not, read all the files in the directory\n            $tw.utils.each(files, function (file) {\n              if (!excludeRegExp.test(file) && file !== 'plugin.info') {\n                tiddlers.push.apply(\n                  tiddlers,\n                  $tw.loadTiddlersFromPath(\n                    filepath + path.sep + file,\n                    excludeRegExp\n                  )\n                )\n              }\n            })\n          }\n        } else if (stat.isFile()) {\n          tiddlers.push($tw.loadTiddlersFromFile(filepath, { title: filepath }))\n        }\n      }\n      return tiddlers\n    }\n\n    /**\n     * Load all the tiddlers defined by a `tiddlywiki.files` specification file\n     * filepath: pathname of the directory containing the specification file\n     */\n    $tw.loadTiddlersFromSpecification = function (filepath, excludeRegExp) {\n      var tiddlers = []\n      // Read the specification\n      var filesInfo = JSON.parse(\n        fs.readFileSync(filepath + path.sep + 'tiddlywiki.files', 'utf8')\n      )\n      // Helper to process a file\n      var processFile = function (filename, isTiddlerFile, fields) {\n        var extInfo = $tw.config.fileExtensionInfo[path.extname(filename)]\n        var type = (extInfo || {}).type || fields.type || 'text/plain'\n        var typeInfo = $tw.config.contentTypeInfo[type] || {}\n        var pathname = path.resolve(filepath, filename)\n        var text = fs.readFileSync(pathname, typeInfo.encoding || 'utf8')\n        var metadata = $tw.loadMetadataForFile(pathname) || {}\n        var fileTiddlers\n        if (isTiddlerFile) {\n          fileTiddlers =\n            $tw.wiki.deserializeTiddlers(\n              path.extname(pathname),\n              text,\n              metadata\n            ) || []\n        } else {\n          fileTiddlers = [$tw.utils.extend({ text: text }, metadata)]\n        }\n        var combinedFields = $tw.utils.extend({}, fields, metadata)\n        $tw.utils.each(fileTiddlers, function (tiddler) {\n          $tw.utils.each(combinedFields, function (fieldInfo, name) {\n            if (typeof fieldInfo === 'string' || $tw.utils.isArray(fieldInfo)) {\n              tiddler[name] = fieldInfo\n            } else {\n              var value = tiddler[name]\n              switch (fieldInfo.source) {\n                case 'filename':\n                  value = path.basename(filename)\n                  break\n                case 'filename-uri-decoded':\n                  value = decodeURIComponent(path.basename(filename))\n                  break\n                case 'basename':\n                  value = path.basename(filename, path.extname(filename))\n                  break\n                case 'basename-uri-decoded':\n                  value = decodeURIComponent(\n                    path.basename(filename, path.extname(filename))\n                  )\n                  break\n                case 'extname':\n                  value = path.extname(filename)\n                  break\n                case 'created':\n                  value = new Date(fs.statSync(pathname).birthtime)\n                  break\n                case 'modified':\n                  value = new Date(fs.statSync(pathname).mtime)\n                  break\n              }\n              if (fieldInfo.prefix) {\n                value = fieldInfo.prefix + value\n              }\n              if (fieldInfo.suffix) {\n                value = value + fieldInfo.suffix\n              }\n              tiddler[name] = value\n            }\n          })\n        })\n        tiddlers.push({ tiddlers: fileTiddlers })\n      }\n      // Process the listed tiddlers\n      $tw.utils.each(filesInfo.tiddlers, function (tidInfo) {\n        if (tidInfo.prefix && tidInfo.suffix) {\n          tidInfo.fields.text = {\n            prefix: tidInfo.prefix,\n            suffix: tidInfo.suffix\n          }\n        } else if (tidInfo.prefix) {\n          tidInfo.fields.text = { prefix: tidInfo.prefix }\n        } else if (tidInfo.suffix) {\n          tidInfo.fields.text = { suffix: tidInfo.suffix }\n        }\n        processFile(tidInfo.file, tidInfo.isTiddlerFile, tidInfo.fields)\n      })\n      // Process any listed directories\n      $tw.utils.each(filesInfo.directories, function (dirSpec) {\n        // Read literal directories directly\n        if (typeof dirSpec === 'string') {\n          var pathname = path.resolve(filepath, dirSpec)\n          if (fs.existsSync(pathname) && fs.statSync(pathname).isDirectory()) {\n            tiddlers.push.apply(\n              tiddlers,\n              $tw.loadTiddlersFromPath(pathname, excludeRegExp)\n            )\n          }\n        } else {\n          // Process directory specifier\n          var dirPath = path.resolve(filepath, dirSpec.path)\n          var files = fs.readdirSync(dirPath)\n          var fileRegExp = new RegExp(dirSpec.filesRegExp || '^.*$')\n          var metaRegExp = /^.*\\.meta$/\n          for (var t = 0; t < files.length; t++) {\n            var filename = files[t]\n            if (\n              filename !== 'tiddlywiki.files' &&\n              !metaRegExp.test(filename) &&\n              fileRegExp.test(filename)\n            ) {\n              processFile(\n                dirPath + path.sep + filename,\n                dirSpec.isTiddlerFile,\n                dirSpec.fields\n              )\n            }\n          }\n        }\n      })\n      return tiddlers\n    }\n\n    /**\n     * Load the tiddlers from a plugin folder, and package them up into a proper JSON plugin tiddler\n     */\n    $tw.loadPluginFolder = function (filepath, excludeRegExp) {\n      excludeRegExp = excludeRegExp || $tw.boot.excludeRegExp\n      var infoPath = filepath + path.sep + 'plugin.info'\n      if (fs.existsSync(filepath) && fs.statSync(filepath).isDirectory()) {\n        // Read the plugin information\n        if (!fs.existsSync(infoPath) || !fs.statSync(infoPath).isFile()) {\n          console.log('Warning: missing plugin.info file in ' + filepath)\n          return null\n        }\n        var pluginInfo = JSON.parse(fs.readFileSync(infoPath, 'utf8'))\n        // Read the plugin files\n        var pluginFiles = $tw.loadTiddlersFromPath(filepath, excludeRegExp)\n        // Save the plugin tiddlers into the plugin info\n        pluginInfo.tiddlers = pluginInfo.tiddlers || Object.create(null)\n        for (var f = 0; f < pluginFiles.length; f++) {\n          var tiddlers = pluginFiles[f].tiddlers\n          for (var t = 0; t < tiddlers.length; t++) {\n            var tiddler = tiddlers[t]\n            if (tiddler.title) {\n              pluginInfo.tiddlers[tiddler.title] = tiddler\n            }\n          }\n        }\n        // Give the plugin the same version number as the core if it doesn't have one\n        if (!('version' in pluginInfo)) {\n          pluginInfo.version = $tw.packageInfo.version\n        }\n        // Use \"plugin\" as the plugin-type if we don't have one\n        if (!('plugin-type' in pluginInfo)) {\n          pluginInfo['plugin-type'] = 'plugin'\n        }\n        pluginInfo.dependents = pluginInfo.dependents || []\n        pluginInfo.type = 'application/json'\n        // Set plugin text\n        pluginInfo.text = JSON.stringify(\n          { tiddlers: pluginInfo.tiddlers },\n          null,\n          4\n        )\n        delete pluginInfo.tiddlers\n        // Deserialise array fields (currently required for the dependents field)\n        for (var field in pluginInfo) {\n          if ($tw.utils.isArray(pluginInfo[field])) {\n            pluginInfo[field] = $tw.utils.stringifyList(pluginInfo[field])\n          }\n        }\n        return pluginInfo\n      } else {\n        return null\n      }\n    }\n\n    /**\n     * name: Name of the plugin to find\n     * paths: array of file paths to search for it\n     * Returns the path of the plugin folder\n     */\n    $tw.findLibraryItem = function (name, paths) {\n      var pathIndex = 0\n      do {\n        var pluginPath = path.resolve(paths[pathIndex], './' + name)\n        if (\n          fs.existsSync(pluginPath) &&\n          fs.statSync(pluginPath).isDirectory()\n        ) {\n          return pluginPath\n        }\n      } while (++pathIndex < paths.length)\n      return null\n    }\n\n    /**\n     * name: Name of the plugin to load\n     * paths: array of file paths to search for it\n     */\n    $tw.loadPlugin = function (name, paths) {\n      var pluginPath = $tw.findLibraryItem(name, paths)\n      if (pluginPath) {\n        var pluginFields = $tw.loadPluginFolder(pluginPath)\n        if (pluginFields) {\n          $tw.wiki.addTiddler(pluginFields)\n          return\n        }\n      }\n      console.log(\"Warning: Cannot find plugin '\" + name + \"'\")\n    }\n\n    /**\n     * libraryPath: Path of library folder for these plugins (relative to core path)\n     * envVar: Environment variable name for these plugins\n     * Returns an array of search paths\n     */\n    $tw.getLibraryItemSearchPaths = function (libraryPath, envVar) {\n      var pluginPaths = [path.resolve($tw.boot.corePath, libraryPath)]\n      var env = process.env[envVar]\n      if (env) {\n        env.split(path.delimiter).map(function (item) {\n          if (item) {\n            pluginPaths.push(item)\n          }\n        })\n      }\n      return pluginPaths\n    }\n\n    /**\n     * plugins: Array of names of plugins (eg, \"tiddlywiki/filesystemadaptor\")\n     * libraryPath: Path of library folder for these plugins (relative to core path)\n     * envVar: Environment variable name for these plugins\n     */\n    $tw.loadPlugins = function (plugins, libraryPath, envVar) {\n      if (plugins) {\n        var pluginPaths = $tw.getLibraryItemSearchPaths(libraryPath, envVar)\n        for (var t = 0; t < plugins.length; t++) {\n          $tw.loadPlugin(plugins[t], pluginPaths)\n        }\n      }\n    }\n\n    /**\n     * path: path of wiki directory\n     * options:\n     *  parentPaths: array of parent paths that we mustn't recurse into\n     *  readOnly: true if the tiddler file paths should not be retained\n     */\n    $tw.loadWikiTiddlers = function (wikiPath, options) {\n      options = options || {}\n      var parentPaths = options.parentPaths || []\n      var wikiInfoPath = path.resolve(wikiPath, $tw.config.wikiInfo)\n      var wikiInfo\n      var pluginFields\n      // Bail if we don't have a wiki info file\n      if (fs.existsSync(wikiInfoPath)) {\n        wikiInfo = JSON.parse(fs.readFileSync(wikiInfoPath, 'utf8'))\n      } else {\n        return null\n      }\n      // Load any parent wikis\n      if (wikiInfo.includeWikis) {\n        parentPaths = parentPaths.slice(0)\n        parentPaths.push(wikiPath)\n        $tw.utils.each(wikiInfo.includeWikis, function (info) {\n          if (typeof info === 'string') {\n            info = { path: info }\n          }\n          var resolvedIncludedWikiPath = path.resolve(wikiPath, info.path)\n          if (parentPaths.indexOf(resolvedIncludedWikiPath) === -1) {\n            var subWikiInfo = $tw.loadWikiTiddlers(resolvedIncludedWikiPath, {\n              parentPaths: parentPaths,\n              readOnly: info['read-only']\n            })\n            // Merge the build targets\n            wikiInfo.build = $tw.utils.extend(\n              [],\n              subWikiInfo.build,\n              wikiInfo.build\n            )\n          } else {\n            $tw.utils.error(\n              'Cannot recursively include wiki ' + resolvedIncludedWikiPath\n            )\n          }\n        })\n      }\n      // Load any plugins, themes and languages listed in the wiki info file\n      $tw.loadPlugins(\n        wikiInfo.plugins,\n        $tw.config.pluginsPath,\n        $tw.config.pluginsEnvVar\n      )\n      $tw.loadPlugins(\n        wikiInfo.themes,\n        $tw.config.themesPath,\n        $tw.config.themesEnvVar\n      )\n      $tw.loadPlugins(\n        wikiInfo.languages,\n        $tw.config.languagesPath,\n        $tw.config.languagesEnvVar\n      )\n      // Load the wiki files, registering them as writable\n      var resolvedWikiPath = path.resolve(\n        wikiPath,\n        $tw.config.wikiTiddlersSubDir\n      )\n      $tw.utils.each($tw.loadTiddlersFromPath(resolvedWikiPath), function (\n        tiddlerFile\n      ) {\n        if (!options.readOnly && tiddlerFile.filepath) {\n          $tw.utils.each(tiddlerFile.tiddlers, function (tiddler) {\n            $tw.boot.files[tiddler.title] = {\n              filepath: tiddlerFile.filepath,\n              type: tiddlerFile.type,\n              hasMetaFile: tiddlerFile.hasMetaFile\n            }\n          })\n        }\n        $tw.wiki.addTiddlers(tiddlerFile.tiddlers)\n      })\n      // Save the original tiddler file locations if requested\n      var config = wikiInfo.config || {}\n      if (config['retain-original-tiddler-path']) {\n        var output = {}\n        var relativePath\n        for (var title in $tw.boot.files) {\n          relativePath = path.relative(\n            resolvedWikiPath,\n            $tw.boot.files[title].filepath\n          )\n          output[title] =\n            path.sep === '/'\n              ? relativePath\n              : relativePath.split(path.sep).join('/')\n        }\n        $tw.wiki.addTiddler({\n          title: '$:/config/OriginalTiddlerPaths',\n          type: 'application/json',\n          text: JSON.stringify(output)\n        })\n      }\n      // Save the path to the tiddlers folder for the filesystemadaptor\n      $tw.boot.wikiTiddlersPath = path.resolve(\n        $tw.boot.wikiPath,\n        config['default-tiddler-location'] || $tw.config.wikiTiddlersSubDir\n      )\n      // Load any plugins within the wiki folder\n      var wikiPluginsPath = path.resolve(wikiPath, $tw.config.wikiPluginsSubDir)\n      if (fs.existsSync(wikiPluginsPath)) {\n        var pluginFolders = fs.readdirSync(wikiPluginsPath)\n        for (var t = 0; t < pluginFolders.length; t++) {\n          pluginFields = $tw.loadPluginFolder(\n            path.resolve(wikiPluginsPath, './' + pluginFolders[t])\n          )\n          if (pluginFields) {\n            $tw.wiki.addTiddler(pluginFields)\n          }\n        }\n      }\n      // Load any themes within the wiki folder\n      var wikiThemesPath = path.resolve(wikiPath, $tw.config.wikiThemesSubDir)\n      if (fs.existsSync(wikiThemesPath)) {\n        var themeFolders = fs.readdirSync(wikiThemesPath)\n        for (var t = 0; t < themeFolders.length; t++) {\n          pluginFields = $tw.loadPluginFolder(\n            path.resolve(wikiThemesPath, './' + themeFolders[t])\n          )\n          if (pluginFields) {\n            $tw.wiki.addTiddler(pluginFields)\n          }\n        }\n      }\n      // Load any languages within the wiki folder\n      var wikiLanguagesPath = path.resolve(\n        wikiPath,\n        $tw.config.wikiLanguagesSubDir\n      )\n      if (fs.existsSync(wikiLanguagesPath)) {\n        var languageFolders = fs.readdirSync(wikiLanguagesPath)\n        for (var t = 0; t < languageFolders.length; t++) {\n          pluginFields = $tw.loadPluginFolder(\n            path.resolve(wikiLanguagesPath, './' + languageFolders[t])\n          )\n          if (pluginFields) {\n            $tw.wiki.addTiddler(pluginFields)\n          }\n        }\n      }\n      return wikiInfo\n    }\n\n    $tw.loadTiddlersNode = function () {\n      // Load the boot tiddlers\n      $tw.utils.each($tw.loadTiddlersFromPath($tw.boot.bootPath), function (\n        tiddlerFile\n      ) {\n        $tw.wiki.addTiddlers(tiddlerFile.tiddlers)\n      })\n      // Load the core tiddlers\n      $tw.wiki.addTiddler($tw.loadPluginFolder($tw.boot.corePath))\n      // Load any extra plugins\n      $tw.utils.each($tw.boot.extraPlugins, function (name) {\n        if (name.charAt(0) === '+') {\n          // Relative path to plugin\n          var pluginFields = $tw.loadPluginFolder(name.substring(1))\n          if (pluginFields) {\n            $tw.wiki.addTiddler(pluginFields)\n          }\n        } else {\n          var parts = name.split('/')\n          var type = parts[0]\n          if (\n            parts.length === 3 &&\n            ['plugins', 'themes', 'languages'].indexOf(type) !== -1\n          ) {\n            $tw.loadPlugins(\n              [parts[1] + '/' + parts[2]],\n              $tw.config[type + 'Path'],\n              $tw.config[type + 'EnvVar']\n            )\n          }\n        }\n      })\n      // Load the tiddlers from the wiki directory\n      if ($tw.boot.wikiPath) {\n        $tw.boot.wikiInfo = $tw.loadWikiTiddlers($tw.boot.wikiPath)\n      }\n    }\n\n    // End of if($tw.node)\n  }\n\n  /////////////////////////// Main startup function called once tiddlers have been decrypted\n\n  /**\n   * Startup TiddlyWiki\n   */\n  $tw.boot.startup = function (options) {\n    options = options || {}\n    // Get the URL hash and check for safe mode\n    $tw.locationHash = '#'\n    if ($tw.browser && !$tw.node) {\n      if (location.hash === '#:safe') {\n        $tw.safeMode = true\n      } else {\n        $tw.locationHash = $tw.utils.getLocationHash()\n      }\n    }\n    // Initialise some more $tw properties\n    $tw.utils.deepDefaults($tw, {\n      modules: {\n        // Information about each module\n        titles: Object.create(null), // hashmap by module title of {fn:, exports:, moduleType:}\n        types: {} // hashmap by module type of hashmap of exports\n      },\n      config: {\n        // Configuration overridables\n        pluginsPath: '../plugins/',\n        themesPath: '../themes/',\n        languagesPath: '../languages/',\n        editionsPath: '../editions/',\n        wikiInfo: './tiddlywiki.info',\n        wikiPluginsSubDir: './plugins',\n        wikiThemesSubDir: './themes',\n        wikiLanguagesSubDir: './languages',\n        wikiTiddlersSubDir: './tiddlers',\n        wikiOutputSubDir: './output',\n        jsModuleHeaderRegExpString:\n          '^\\\\/\\\\*\\\\\\\\(?:\\\\r?\\\\n)((?:^[^\\\\r\\\\n]*(?:\\\\r?\\\\n))+?)(^\\\\\\\\\\\\*\\\\/$(?:\\\\r?\\\\n)?)',\n        fileExtensionInfo: Object.create(null), // Map file extension to {type:}\n        contentTypeInfo: Object.create(null), // Map type to {encoding:,extension:}\n        pluginsEnvVar: 'TIDDLYWIKI_PLUGIN_PATH',\n        themesEnvVar: 'TIDDLYWIKI_THEME_PATH',\n        languagesEnvVar: 'TIDDLYWIKI_LANGUAGE_PATH',\n        editionsEnvVar: 'TIDDLYWIKI_EDITION_PATH'\n      },\n      log: {}, // Log flags\n      unloadTasks: []\n    })\n    if (!$tw.boot.tasks.readBrowserTiddlers) {\n      // For writable tiddler files, a hashmap of title to {filepath:,type:,hasMetaFile:}\n      $tw.boot.files = Object.create(null)\n      // System paths and filenames\n      $tw.boot.bootPath = options.bootPath || path.dirname(module.filename)\n      $tw.boot.corePath = path.resolve($tw.boot.bootPath, '../core')\n      // If there's no arguments then default to `--help`\n      if ($tw.boot.argv.length === 0) {\n        $tw.boot.argv = ['--help']\n      }\n      // Parse any extra plugin references\n      $tw.boot.extraPlugins = $tw.boot.extraPlugins || []\n      while ($tw.boot.argv[0] && $tw.boot.argv[0].indexOf('+') === 0) {\n        $tw.boot.extraPlugins.push($tw.boot.argv[0].substring(1))\n        $tw.boot.argv.splice(0, 1)\n      }\n      // If the first command line argument doesn't start with `--` then we\n      // interpret it as the path to the wiki folder, which will otherwise default\n      // to the current folder\n      if ($tw.boot.argv[0] && $tw.boot.argv[0].indexOf('--') !== 0) {\n        $tw.boot.wikiPath = $tw.boot.argv[0]\n        $tw.boot.argv = $tw.boot.argv.slice(1)\n      } else {\n        $tw.boot.wikiPath = process.cwd()\n      }\n      // Read package info\n      $tw.packageInfo = $tw.packageInfo || require('../package.json')\n      // Check node version number\n      if (\n        !$tw.utils.checkVersions(\n          process.version.substr(1),\n          $tw.packageInfo.engines.node.substr(2)\n        )\n      ) {\n        $tw.utils.error(\n          'TiddlyWiki5 requires node.js version ' + $tw.packageInfo.engines.node\n        )\n      }\n    }\n    // Add file extension information\n    $tw.utils.registerFileType('text/vnd.tiddlywiki', 'utf8', '.tid')\n    $tw.utils.registerFileType('application/x-tiddler', 'utf8', '.tid')\n    $tw.utils.registerFileType('application/x-tiddlers', 'utf8', '.multids')\n    $tw.utils.registerFileType(\n      'application/x-tiddler-html-div',\n      'utf8',\n      '.tiddler'\n    )\n    $tw.utils.registerFileType('text/vnd.tiddlywiki2-recipe', 'utf8', '.recipe')\n    $tw.utils.registerFileType('text/plain', 'utf8', '.txt')\n    $tw.utils.registerFileType('text/css', 'utf8', '.css')\n    $tw.utils.registerFileType('text/html', 'utf8', ['.html', '.htm'])\n    $tw.utils.registerFileType('application/hta', 'utf16le', '.hta', {\n      deserializerType: 'text/html'\n    })\n    $tw.utils.registerFileType('application/javascript', 'utf8', '.js')\n    $tw.utils.registerFileType('application/json', 'utf8', '.json')\n    $tw.utils.registerFileType('application/pdf', 'base64', '.pdf', {\n      flags: ['image']\n    })\n    $tw.utils.registerFileType('application/zip', 'base64', '.zip')\n    $tw.utils.registerFileType('application/x-zip-compressed', 'base64', '.zip')\n    $tw.utils.registerFileType('image/jpeg', 'base64', ['.jpg', '.jpeg'], {\n      flags: ['image']\n    })\n    $tw.utils.registerFileType('image/png', 'base64', '.png', {\n      flags: ['image']\n    })\n    $tw.utils.registerFileType('image/gif', 'base64', '.gif', {\n      flags: ['image']\n    })\n    $tw.utils.registerFileType('image/webp', 'base64', '.webp', {\n      flags: ['image']\n    })\n    $tw.utils.registerFileType('image/heic', 'base64', '.heic', {\n      flags: ['image']\n    })\n    $tw.utils.registerFileType('image/heif', 'base64', '.heif', {\n      flags: ['image']\n    })\n    $tw.utils.registerFileType('image/svg+xml', 'utf8', '.svg', {\n      flags: ['image']\n    })\n    $tw.utils.registerFileType('image/x-icon', 'base64', '.ico', {\n      flags: ['image']\n    })\n    $tw.utils.registerFileType('application/font-woff', 'base64', '.woff')\n    $tw.utils.registerFileType('application/x-font-ttf', 'base64', '.woff')\n    $tw.utils.registerFileType('application/font-woff2', 'base64', '.woff2')\n    $tw.utils.registerFileType('audio/ogg', 'base64', '.ogg')\n    $tw.utils.registerFileType('video/ogg', 'base64', ['.ogm', '.ogv', '.ogg'])\n    $tw.utils.registerFileType('video/webm', 'base64', '.webm')\n    $tw.utils.registerFileType('video/mp4', 'base64', '.mp4')\n    $tw.utils.registerFileType('audio/mp3', 'base64', '.mp3')\n    $tw.utils.registerFileType('audio/mp4', 'base64', ['.mp4', '.m4a'])\n    $tw.utils.registerFileType('text/markdown', 'utf8', ['.md', '.markdown'], {\n      deserializerType: 'text/x-markdown'\n    })\n    $tw.utils.registerFileType('text/x-markdown', 'utf8', ['.md', '.markdown'])\n    $tw.utils.registerFileType('application/enex+xml', 'utf8', '.enex')\n    $tw.utils.registerFileType(\n      'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n      'base64',\n      '.docx'\n    )\n    $tw.utils.registerFileType(\n      'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n      'base64',\n      '.xlsx'\n    )\n    $tw.utils.registerFileType(\n      'application/vnd.openxmlformats-officedocument.presentationml.presentation',\n      'base64',\n      '.pptx'\n    )\n    $tw.utils.registerFileType('text/x-bibtex', 'utf8', '.bib', {\n      deserializerType: 'application/x-bibtex'\n    })\n    $tw.utils.registerFileType('application/x-bibtex', 'utf8', '.bib')\n    $tw.utils.registerFileType('application/epub+zip', 'base64', '.epub')\n    $tw.utils.registerFileType(\n      'application/octet-stream',\n      'base64',\n      '.octet-stream'\n    )\n    // Create the wiki store for the app\n    $tw.wiki = new $tw.Wiki()\n    // Install built in tiddler fields modules\n    $tw.Tiddler.fieldModules = $tw.modules.getModulesByTypeAsHashmap(\n      'tiddlerfield'\n    )\n    // Install the tiddler deserializer modules\n    $tw.Wiki.tiddlerDeserializerModules = Object.create(null)\n    $tw.modules.applyMethods(\n      'tiddlerdeserializer',\n      $tw.Wiki.tiddlerDeserializerModules\n    )\n    // Call unload handlers in the browser\n    if ($tw.browser) {\n      window.onbeforeunload = function (event) {\n        event = event || {}\n        var result\n        $tw.utils.each($tw.unloadTasks, function (task) {\n          var r = task(event)\n          if (r) {\n            result = r\n          }\n        })\n        return result\n      }\n    }\n    // Load tiddlers\n    if ($tw.boot.tasks.readBrowserTiddlers) {\n      $tw.loadTiddlersBrowser()\n    } else {\n      $tw.loadTiddlersNode()\n    }\n    // Load any preloaded tiddlers\n    if ($tw.preloadTiddlers) {\n      $tw.wiki.addTiddlers($tw.preloadTiddlers)\n    }\n    // Give hooks a chance to modify the store\n    $tw.hooks.invokeHook('th-boot-tiddlers-loaded')\n    // Unpack plugin tiddlers\n    $tw.wiki.readPluginInfo()\n    $tw.wiki.registerPluginTiddlers(\n      'plugin',\n      $tw.safeMode ? ['$:/core'] : undefined\n    )\n    $tw.wiki.unpackPluginTiddlers()\n    // Process \"safe mode\"\n    if ($tw.safeMode) {\n      $tw.wiki.processSafeMode()\n    }\n    // Register typed modules from the tiddlers we've just loaded\n    $tw.wiki.defineTiddlerModules()\n    // And any modules within plugins\n    $tw.wiki.defineShadowModules()\n    // Make sure the crypto state tiddler is up to date\n    if ($tw.crypto) {\n      $tw.crypto.updateCryptoStateTiddler()\n    }\n    // Gather up any startup modules\n    $tw.boot.remainingStartupModules = [] // Array of startup modules\n    $tw.modules.forEachModuleOfType('startup', function (title, module) {\n      if (module.startup) {\n        $tw.boot.remainingStartupModules.push(module)\n      }\n    })\n    // Keep track of the startup tasks that have been executed\n    $tw.boot.executedStartupModules = Object.create(null)\n    $tw.boot.disabledStartupModules = $tw.boot.disabledStartupModules || []\n    // Repeatedly execute the next eligible task\n    $tw.boot.executeNextStartupTask(options.callback)\n  }\n\n  /**\n   * Add another unload task\n   */\n  $tw.addUnloadTask = function (task) {\n    if ($tw.unloadTasks.indexOf(task) === -1) {\n      $tw.unloadTasks.push(task)\n    }\n  }\n\n  /**\n   * Execute the remaining eligible startup tasks\n   */\n  $tw.boot.executeNextStartupTask = function (callback) {\n    // Find the next eligible task\n    var taskIndex = 0\n    var task\n    var asyncTaskCallback = function () {\n      if (task.name) {\n        $tw.boot.executedStartupModules[task.name] = true\n      }\n      return $tw.boot.executeNextStartupTask(callback)\n    }\n    while (taskIndex < $tw.boot.remainingStartupModules.length) {\n      task = $tw.boot.remainingStartupModules[taskIndex]\n      if ($tw.boot.isStartupTaskEligible(task)) {\n        // Remove this task from the list\n        $tw.boot.remainingStartupModules.splice(taskIndex, 1)\n        // Assemble log message\n        var s = ['Startup task:', task.name]\n        if (task.platforms) {\n          s.push('platforms:', task.platforms.join(','))\n        }\n        if (task.after) {\n          s.push('after:', task.after.join(','))\n        }\n        if (task.before) {\n          s.push('before:', task.before.join(','))\n        }\n        $tw.boot.log(s.join(' '))\n        // Execute task\n        if (!$tw.utils.hop(task, 'synchronous') || task.synchronous) {\n          task.startup()\n          if (task.name) {\n            $tw.boot.executedStartupModules[task.name] = true\n          }\n          return $tw.boot.executeNextStartupTask(callback)\n        } else {\n          task.startup(asyncTaskCallback)\n          return true\n        }\n      }\n      taskIndex++\n    }\n    if (typeof callback === 'function') {\n      callback()\n    }\n    return false\n  }\n\n  /**\n   * Returns true if we are running on one platforms specified in a task modules `platforms` array\n   */\n  $tw.boot.doesTaskMatchPlatform = function (taskModule) {\n    var platforms = taskModule.platforms\n    if (platforms) {\n      for (var t = 0; t < platforms.length; t++) {\n        if (\n          (platforms[t] === 'browser' && !$tw.browser) ||\n          (platforms[t] === 'node' && !$tw.node)\n        ) {\n          return false\n        }\n      }\n    }\n    return true\n  }\n\n  $tw.boot.isStartupTaskEligible = function (taskModule) {\n    var t\n    // Check that the platform is correct\n    if (!$tw.boot.doesTaskMatchPlatform(taskModule)) {\n      return false\n    }\n    var name = taskModule.name\n    var remaining = $tw.boot.remainingStartupModules\n    if (name) {\n      // Fail if this module is disabled\n      if ($tw.boot.disabledStartupModules.indexOf(name) !== -1) {\n        return false\n      }\n      // Check that no other outstanding tasks must be executed before this one\n      for (t = 0; t < remaining.length; t++) {\n        var task = remaining[t]\n        if (task.before && task.before.indexOf(name) !== -1) {\n          if (\n            $tw.boot.doesTaskMatchPlatform(task) ||\n            (task.name && $tw.boot.disabledStartupModules.indexOf(name) !== -1)\n          ) {\n            return false\n          }\n        }\n      }\n    }\n    // Check that all of the tasks that we must be performed after has been done\n    var after = taskModule.after\n    if (after) {\n      for (t = 0; t < after.length; t++) {\n        if (!$tw.boot.executedStartupModules[after[t]]) {\n          return false\n        }\n      }\n    }\n    return true\n  }\n\n  /**\n   * Global Hooks mechanism which allows plugins to modify default functionality\n   */\n  $tw.hooks = $tw.hooks || { names: {} }\n\n  /**\n   * Add hooks to the  hashmap\n   */\n  $tw.hooks.addHook = function (hookName, definition) {\n    if ($tw.utils.hop($tw.hooks.names, hookName)) {\n      $tw.hooks.names[hookName].push(definition)\n    } else {\n      $tw.hooks.names[hookName] = [definition]\n    }\n  }\n\n  /**\n   * Invoke the hook by key\n   */\n  $tw.hooks.invokeHook = function (hookName /*, value,... */) {\n    var args = Array.prototype.slice.call(arguments, 1)\n    if ($tw.utils.hop($tw.hooks.names, hookName)) {\n      for (var i = 0; i < $tw.hooks.names[hookName].length; i++) {\n        args[0] = $tw.hooks.names[hookName][i].apply(null, args)\n      }\n    }\n    return args[0]\n  }\n\n  /////////////////////////// Main boot function to decrypt tiddlers and then startup\n\n  $tw.boot.boot = function (callback) {\n    // Initialise crypto object\n    $tw.crypto = new $tw.utils.Crypto()\n    // Initialise password prompter\n    if ($tw.browser && !$tw.node) {\n      $tw.passwordPrompt = new $tw.utils.PasswordPrompt()\n    }\n    // Preload any encrypted tiddlers\n    $tw.boot.decryptEncryptedTiddlers(function () {\n      // Startup\n      $tw.boot.startup({ callback: callback })\n    })\n  }\n\n  return $tw\n}\n\nif (typeof exports !== 'undefined') {\n  exports.TiddlyWiki = _boot\n} else {\n  _boot(window.$tw)\n}\n\n// Ipfs Boot kernel\n/*\\\ntitle: $:/boot/ipfs-boot.js\ntype: application/javascript\n\n\\*/\nvar _boot = function ($tw) {\n  /*jslint node: true, browser: true */\n  'use strict'\n\n  $tw.boot.getLogger = function () {\n    var log = $tw.node ? global.log || require('loglevel') : window.log\n    if (log !== undefined && log !== null) {\n      const loggers = log.getLoggers()\n      var eruda = loggers.eruda\n      if (eruda) {\n        return eruda\n      }\n      var ipfs = loggers.ipfs\n      if (!ipfs) {\n        ipfs = log.getLogger('ipfs')\n        ipfs.setLevel('info', false)\n        ipfs.info('Loglevel is starting up...')\n      }\n      return ipfs\n    }\n    return console\n  }\n\n  /**\n   * Crypto helper object for encrypted content. It maintains the password text in a closure, and provides methods to change\n   * the password, and to encrypt/decrypt a block of text\n   */\n  $tw.utils.Crypto = function () {\n    var currentPassword = null\n    var currentPublicKey = null\n    var callSjcl = function (method, inputText, password) {\n      password = password || currentPassword\n      var outputText\n      var sjcl = $tw.node ? global.sjcl || require('sjcl') : window.sjcl\n      try {\n        if (password) {\n          var tStart = new Date()\n          outputText = sjcl[method](password, inputText)\n          var tStop = new Date() - tStart\n          var ratio = Math.floor((outputText.length * 100) / inputText.length)\n          var uMethod = method.charAt(0).toUpperCase() + method.slice(1) + 'ion'\n          $tw.boot\n            .getLogger()\n            .info(\n              `Standford ${uMethod}: ${tStop}ms, In: ${inputText.length} bytes, Out: ${outputText.length} bytes, Ratio: ${ratio}%`\n            )\n        }\n      } catch (ex) {\n        $tw.boot.getLogger().error('Crypto error:' + ex)\n        outputText = null\n      }\n      return outputText\n    }\n    this.setPassword = function (newPassword) {\n      currentPassword =\n        newPassword === undefined || newPassword == null ? null : newPassword\n      currentPublicKey = null\n      if ($tw.wiki) {\n        this.updateCryptoStateTiddler()\n      }\n    }\n    this.setEncryptionPublicKey = function (newPublicKey) {\n      currentPassword = null\n      currentPublicKey =\n        newPublicKey === undefined || newPublicKey == null ? null : newPublicKey\n      if ($tw.wiki) {\n        this.updateCryptoStateTiddler()\n      }\n    }\n    this.updateCryptoStateTiddler = function () {\n      if ($tw.wiki) {\n        var encrypted = $tw.wiki.getTiddler('$:/isEncrypted')\n        if (encrypted) {\n          var publicKey = encrypted.fields._encryption_public_key\n          if (publicKey) {\n            currentPassword = null\n            currentPublicKey = publicKey\n          }\n        }\n        var state = currentPassword || currentPublicKey ? 'yes' : 'no'\n        if (!encrypted || encrypted.fields.text !== state) {\n          if (currentPublicKey) {\n            $tw.wiki.addTiddler(\n              new $tw.Tiddler({\n                title: '$:/isEncrypted',\n                _encryption_public_key: currentPublicKey,\n                text: state\n              })\n            )\n          } else {\n            $tw.wiki.addTiddler(\n              new $tw.Tiddler({\n                title: '$:/isEncrypted',\n                text: state\n              })\n            )\n          }\n        }\n        var encryption = $tw.wiki.getTiddler('$:/config/Encryption')\n        if (!currentPublicKey || !encryption) {\n          $tw.wiki.addTiddler(\n            new $tw.Tiddler({\n              title: '$:/config/Encryption',\n              text: 'standford'\n            })\n          )\n        } else {\n          $tw.wiki.addTiddler(\n            new $tw.Tiddler({\n              title: '$:/config/Encryption',\n              text: 'ethereum'\n            })\n          )\n        }\n      }\n    }\n    this.hasPassword = function () {\n      return !!currentPassword\n    }\n    this.hasEncryptionPublicKey = function () {\n      return !!currentPublicKey\n    }\n    this.encrypt = function (text, password, publicKey) {\n      publicKey = publicKey || currentPublicKey\n      if (publicKey) {\n        var output\n        var sigUtil = $tw.node\n          ? global.sigUtil || require('eth-sig-util')\n          : window.sigUtil\n        var tStart = new Date()\n        try {\n          output = sigUtil.encrypt(\n            publicKey,\n            { data: text },\n            'x25519-xsalsa20-poly1305'\n          )\n          output = JSON.stringify(output)\n          var tStop = new Date() - tStart\n          var ratio = Math.floor((output.length * 100) / text.length)\n          $tw.boot\n            .getLogger()\n            .info(\n              `Ethereum Encryption: ${tStop}ms, In: ${text.length} bytes, Out: ${output.length} bytes, Ratio: ${ratio}%`\n            )\n        } catch (error) {\n          $tw.boot.getLogger().error('Crypto error:' + error)\n          output = null\n        }\n        return output\n      } else {\n        return callSjcl('encrypt', text, password)\n      }\n    }\n    this.decrypt = function (text, password) {\n      return callSjcl('decrypt', text, password)\n    }\n    this.keccak256 = function (text) {\n      var createKeccakHash = $tw.node\n        ? global.createKeccakHash || require('keccak')\n        : window.createKeccakHash\n      var hash = createKeccakHash('keccak256')\n      hash.update(text)\n      return hash.digest('hex')\n    }\n  }\n\n  /**\n   * Compress helper object for compressed content.\n   */\n  $tw.utils.Compress = function () {\n    var pako = $tw.node ? global.pako || require('pako') : window.pako\n    var currentState = null\n    this.setCompressState = function (state) {\n      currentState = state ? 'yes' : 'no'\n      this.updateCompressStateTiddler()\n    }\n    this.updateCompressStateTiddler = function () {\n      if ($tw.wiki) {\n        var state = currentState === 'yes' ? 'yes' : 'no'\n        var tiddler = $tw.wiki.getTiddler('$:/isCompressed')\n        if (!tiddler || tiddler.fields.text !== state) {\n          $tw.wiki.addTiddler(\n            new $tw.Tiddler({ title: '$:/isCompressed', text: state })\n          )\n        }\n      }\n    }\n    this.deflate = function (str) {\n      var tStart = new Date()\n      var ua = pako.deflate(str, { raw: false })\n      var b64 = this.btoa(ua)\n      var tStop = new Date() - tStart\n      var ratio = Math.floor((b64.length * 100) / str.length)\n      $tw.boot\n        .getLogger()\n        .info(\n          `Deflate: ${tStop}ms, In: ${str.length} bytes, Out: ${b64.length} bytes, Ratio: ${ratio}%`\n        )\n      return b64\n    }\n    this.inflate = function (b64) {\n      var tStart = new Date()\n      var ua = this.decode(b64)\n      var str = pako.inflate(ua, { to: 'string' })\n      var tStop = new Date() - tStart\n      var ratio = Math.floor((str.length * 100) / b64.length)\n      $tw.boot\n        .getLogger()\n        .info(\n          `Inflate: ${tStop}ms, In: ${b64.length} bytes, Out: ${str.length} bytes, Ratio: ${ratio}%`\n        )\n      return str\n    }\n    this.decode = function (b64) {\n      return Base64Binary.decode(b64)\n    }\n    this.btoa = function (ua) {\n      try {\n        return this.Uint8ArrayToBase64(ua)\n      } catch (error) {\n        return Buffer.from(ua).toString('base64')\n      }\n    }\n    // https://stackoverflow.com/questions/12710001/how-to-convert-uint8-array-to-base64-encoded-string\n    this.Uint8ArrayToBase64 = function (uint8) {\n      var CHUNK_SIZE = 0x8000\n      var index = 0\n      var length = uint8.length\n      var str = ''\n      var slice\n      while (index < length) {\n        slice = uint8.subarray(index, Math.min(index + CHUNK_SIZE, length))\n        str += String.fromCharCode.apply(null, slice)\n        index += CHUNK_SIZE\n      }\n      return btoa(str)\n    }\n    // https://stackoverflow.com/questions/21797299/convert-base64-string-to-arraybuffer/21797381\n    // https://github.com/danguer/blog-examples/blob/master/js/base64-binary.js\n    /*\n     * Copyright (c) 2011, Daniel Guerrero\n     * All rights reserved.\n     * Redistribution and use in source and binary forms, with or without\n     * modification, are permitted provided that the following conditions are met:\n     * Redistributions of source code must retain the above copyright\n     * notice, this list of conditions and the following disclaimer.\n     * Redistributions in binary form must reproduce the above copyright\n     * notice, this list of conditions and the following disclaimer in the\n     * documentation and/or other materials provided with the distribution.\n     * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n     * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n     * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n     * DISCLAIMED. IN NO EVENT SHALL DANIEL GUERRERO BE LIABLE FOR ANY\n     * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n     * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n     * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n     * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n     * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n     * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n     */\n    /**\n     * Uses the new array typed in javascript to binary base64 encode/decode\n     * at the moment just decodes a binary base64 encoded\n     * into either an ArrayBuffer (decodeArrayBuffer)\n     * or into an Uint8Array (decode)\n     *\n     * References:\n     * https://developer.mozilla.org/en/JavaScript_typed_arrays/ArrayBuffer\n     * https://developer.mozilla.org/en/JavaScript_typed_arrays/Uint8Array\n     */\n    var Base64Binary = {\n      _keyStr:\n        'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=',\n      /* will return a  Uint8Array type */\n      decodeArrayBuffer: function (input) {\n        var bytes = (input.length / 4) * 3\n        var ab = new ArrayBuffer(bytes)\n        this.decode(input, ab)\n        return ab\n      },\n      removePaddingChars: function (input) {\n        var lkey = this._keyStr.indexOf(input.charAt(input.length - 1))\n        if (lkey === 64) {\n          return input.substring(0, input.length - 1)\n        }\n        return input\n      },\n      decode: function (input, ab) {\n        //get last chars to see if are valid\n        input = this.removePaddingChars(input)\n        input = this.removePaddingChars(input)\n        var bytes = parseInt((input.length / 4) * 3, 10)\n        var ua\n        var chr1, chr2, chr3\n        var enc1, enc2, enc3, enc4\n        var i = 0\n        var j = 0\n        if (ab) ua = new Uint8Array(ab)\n        else ua = new Uint8Array(bytes)\n        /*eslint no-useless-escape:\"off\"*/\n        input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, '')\n        for (i = 0; i < bytes; i += 3) {\n          //get the 3 octects in 4 ascii chars\n          enc1 = this._keyStr.indexOf(input.charAt(j++))\n          enc2 = this._keyStr.indexOf(input.charAt(j++))\n          enc3 = this._keyStr.indexOf(input.charAt(j++))\n          enc4 = this._keyStr.indexOf(input.charAt(j++))\n          chr1 = (enc1 << 2) | (enc2 >> 4)\n          chr2 = ((enc2 & 15) << 4) | (enc3 >> 2)\n          chr3 = ((enc3 & 3) << 6) | enc4\n          ua[i] = chr1\n          if (enc3 !== 64) ua[i + 1] = chr2\n          if (enc4 !== 64) ua[i + 2] = chr3\n        }\n        return ua\n      }\n    }\n  }\n\n  /////////////////////////// Browser definitions\n\n  if ($tw.browser && !$tw.node) {\n    $tw.boot.metamaskPrompt = async function (\n      text,\n      keccak256,\n      signature,\n      callback\n    ) {\n      var checkAccountPermission = async function (provider) {\n        if (typeof provider.request === 'function') {\n          const permissions = await provider.request({\n            method: 'wallet_getPermissions'\n          })\n          const accountsPermission = permissions.find(\n            permission => permission.parentCapability === 'eth_accounts'\n          )\n          if (accountsPermission) {\n            return true\n          }\n        }\n        return false\n      }\n      var requestAccountPermission = async function (provider) {\n        if (typeof provider.request === 'function') {\n          const permissions = await provider.request({\n            method: 'wallet_requestPermissions',\n            params: [{ eth_accounts: {} }]\n          })\n          const accountsPermission = permissions.find(\n            permission => permission.parentCapability === 'eth_accounts'\n          )\n          if (accountsPermission) {\n            return true\n          }\n        }\n        return false\n      }\n      // Check hash\n      if (keccak256) {\n        const hash = $tw.crypto.keccak256(text)\n        if (keccak256 !== hash) {\n          throw new Error(\n            'Tampered encrypted content, signature do not match...'\n          )\n        }\n      }\n      // Decrypt\n      var decryptedText = null\n      try {\n        const provider = await window.detectEthereumProvider({\n          mustBeMetaMask: true\n        })\n        if (provider === undefined || provider == null) {\n          throw new Error('Please install MetaMask...')\n        }\n        provider.autoRefreshOnNetworkChange = false\n        var accounts = null\n        var permission = false\n        // Permission Attempt\n        try {\n          permission = await checkAccountPermission(provider)\n          if (permission === false) {\n            permission = await requestAccountPermission(provider)\n          }\n        } catch (error) {\n          if (error.code === 4001) {\n            throw error\n          }\n          $tw.boot.getLogger().error(error)\n        }\n        // Request Accounts attempt\n        try {\n          if (\n            permission === false ||\n            (await provider._metamask.isUnlocked()) === false\n          ) {\n            accounts = await provider.request({\n              method: 'eth_requestAccounts'\n            })\n          }\n          if (\n            accounts === undefined ||\n            accounts == null ||\n            Array.isArray(accounts) === false ||\n            accounts.length === 0\n          ) {\n            accounts = await provider.request({ method: 'eth_accounts' })\n          }\n        } catch (error) {\n          if (error.code === 4001) {\n            throw error\n          }\n          $tw.boot.getLogger().error(error)\n        }\n        // Enable attempt\n        if (\n          accounts === undefined ||\n          accounts == null ||\n          Array.isArray(accounts) === false ||\n          accounts.length === 0\n        ) {\n          if (typeof provider.enable === 'function') {\n            accounts = await provider.enable()\n          }\n        }\n        if (\n          accounts === undefined ||\n          accounts == null ||\n          Array.isArray(accounts) === false ||\n          accounts.length === 0\n        ) {\n          throw new Error('Unable to retrieve any Ethereum accounts...')\n        }\n        if (provider.chainId !== undefined) {\n          $tw.boot\n            .getLogger()\n            .log(`Chain: ${provider.chainId}, Ethereum Account: ${accounts[0]}`)\n        } else {\n          $tw.boot.getLogger().log(`Ethereum Account: ${accounts[0]}`)\n        }\n        try {\n          var tStart = new Date()\n          decryptedText = await provider.request({\n            method: 'eth_decrypt',\n            params: [text, accounts[0]]\n          })\n          if (decryptedText !== undefined || decryptedText !== null) {\n            var tStop = new Date() - tStart\n            var ratio = Math.floor((decryptedText.length * 100) / text.length)\n            $tw.boot\n              .getLogger()\n              .info(\n                `Ethereum Decrypt: ${tStop}ms, In: ${text.length}, Out: ${decryptedText.length}, Ratio: ${ratio}%`\n              )\n          }\n        } catch (error) {\n          if (error.code === 4001) {\n            throw error\n          }\n          $tw.boot.getLogger().error(error)\n          throw new Error('Unable to Decrypt Ethereum content...')\n        }\n      } catch (error) {\n        if (error.code === 4001) {\n          $tw.utils.error('Rejected User Request...')\n        } else {\n          $tw.utils.error(error.message)\n        }\n      }\n      callback(decryptedText)\n    }\n\n    $tw.boot.passwordPrompt = function (text, callback) {\n      var prompt = 'Enter a password to decrypt this TiddlyWiki'\n      // Prompt for the password\n      if ($tw.utils.hop($tw.boot, 'encryptionPrompts')) {\n        prompt = $tw.boot.encryptionPrompts.decrypt\n      }\n      $tw.passwordPrompt.createPrompt({\n        serviceName: prompt,\n        noUserName: true,\n        submitText: 'Decrypt',\n        callback: function (data) {\n          // Attempt to decrypt the tiddlers\n          $tw.crypto.setPassword(data.password)\n          var decryptedText = $tw.crypto.decrypt(text)\n          if (decryptedText) {\n            callback(decryptedText)\n            // Exit and remove the password prompt\n            return true\n          } else {\n            // We didn't decrypt everything, so continue to prompt for password\n            return false\n          }\n        }\n      })\n    }\n\n    $tw.boot.preloadTiddler = function (text, callback) {\n      try {\n        if (text !== undefined && text !== null) {\n          var json = JSON.parse(text)\n          for (var title in json) {\n            $tw.preloadTiddler(json[title])\n          }\n        }\n      } catch (error) {\n        $tw.boot.getLogger().error(error)\n      }\n      callback()\n    }\n\n    $tw.boot.inflateTiddlers = function (callback) {\n      var compressedStoreArea = document.getElementById('compressedStoreArea')\n      if (compressedStoreArea) {\n        var inflate = function (b64) {\n          if (b64 !== undefined && b64 !== null) {\n            $tw.boot.preloadTiddler($tw.compress.inflate(b64), callback)\n          }\n        }\n        var content = compressedStoreArea.innerHTML\n        if (content.match(/{\"compressed\":/)) {\n          var json = JSON.parse(content)\n          if (json.compressed.match(/{\"iv\":/)) {\n            $tw.boot.passwordPrompt(json.compressed, function (decrypted) {\n              inflate(decrypted)\n            })\n          } else if (json.compressed.match(/{\"version\":/)) {\n            $tw.boot.metamaskPrompt(\n              json.compressed,\n              json.keccak256,\n              json.signature,\n              function (decrypted) {\n                inflate(decrypted)\n              }\n            )\n          } else {\n            inflate(json.compressed)\n          }\n        } else {\n          $tw.boot.preloadTiddler(content, callback)\n        }\n      } else {\n        // Preload any encrypted tiddlers\n        $tw.boot.decryptEncryptedTiddlers(callback)\n      }\n    }\n\n    /**\n     * Decrypt any tiddlers stored within the element with the ID \"encryptedArea\".\n     * The function is asynchronous to allow the user to be prompted for a password\n     * callback: function to be called the decryption is complete\n     */\n    $tw.boot.decryptEncryptedTiddlers = function (callback) {\n      var encryptedStoreArea = document.getElementById('encryptedStoreArea')\n      if (encryptedStoreArea) {\n        var content = encryptedStoreArea.innerHTML\n        if (content.match(/{\"iv\":/)) {\n          $tw.boot.passwordPrompt(content, function (decrypted) {\n            $tw.boot.preloadTiddler(decrypted, callback)\n          })\n        } else if (content.match(/{\"encrypted\":/)) {\n          const json = JSON.parse(content)\n          $tw.boot.metamaskPrompt(\n            json.encrypted,\n            json.keccak256,\n            json.signature,\n            function (decrypted) {\n              $tw.boot.preloadTiddler(decrypted, callback)\n            }\n          )\n        } else {\n          $tw.boot.preloadTiddler(content, callback)\n        }\n      } else {\n        // Just invoke the callback straight away if there weren't any encrypted tiddlers\n        callback()\n      }\n    }\n  } else {\n    /////////////////////////// Server definitions\n\n    /**\n     * Get any compressed tiddlers\n     */\n    $tw.boot.inflateTiddlers = function (callback) {\n      // Storing compressed tiddlers on the server isn't supported yet\n      callback()\n    }\n\n    /**\n     * Get any encrypted tiddlers\n     */\n    $tw.boot.decryptEncryptedTiddlers = function (callback) {\n      // Storing encrypted tiddlers on the server isn't supported yet\n      callback()\n    }\n  } // End of if($tw.browser && !$tw.node)\n\n  /////////////////////////// Main boot function to decrypt tiddlers and then startup\n\n  $tw.boot.boot = function (callback) {\n    // Initialise crypto object\n    $tw.crypto = new $tw.utils.Crypto()\n    // Initialise password prompter\n    if ($tw.browser && !$tw.node) {\n      $tw.passwordPrompt = new $tw.utils.PasswordPrompt()\n    }\n    // Initialise compress object\n    $tw.compress = new $tw.utils.Compress()\n    // Preload any compressed tiddlers\n    $tw.boot.inflateTiddlers(function () {\n      // Startup\n      $tw.boot.startup({ callback: callback })\n    })\n  }\n\n  return $tw\n}\n\nif (typeof exports !== 'undefined') {\n  exports.TiddlyWiki = _boot\n} else {\n  _boot(window.$tw)\n}\n\n// Boot handler\n/*\\\ntitle: $:/boot/boothandler.js\ntype: application/javascript\n\n\\*/\nvar bootHandler = function ($tw) {\n  /*jslint node: true, browser: true */\n  'use strict'\n  if (!$tw) {\n    throw new Error('Undefined TiddlyWiki...')\n  }\n  if (!$tw.boot) {\n    throw new Error('Undefined TiddlyWiki boot...')\n  }\n  if ($tw.browser && !$tw.boot.suppressBoot) {\n    $tw.boot.boot()\n  }\n}\n\nif (typeof exports === 'undefined') {\n  bootHandler(window.$tw)\n} else {\n  // Export functionality as a module\n  exports.bootHandler = bootHandler\n}\n",
    "type": "application/javascript",
    "modified": "20200905094915385",
    "tags": "$:/ipfs/core",
    "library": "yes"
}